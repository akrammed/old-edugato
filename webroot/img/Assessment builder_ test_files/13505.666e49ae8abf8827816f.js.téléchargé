"use strict";(self.webpackChunkcodeneuron_templates=self.webpackChunkcodeneuron_templates||[]).push([[13505],{19110:(e,t,s)=>{s.d(t,{Z:()=>a});s(47941),s(89554),s(41539),s(54747),s(88674),s(17727),s(92222),s(69600),s(21249),s(26699),s(32023),s(57658);var r=s(92741),o=s(25898),n=s(84564);const a={data:function(){return{checkedCoursesAndUnits:{},updateResetUsersSelection:{checkedUsers:[],uncheckedUsers:[],allUsersChecked:!1,numUsers:0},updateResetUserFilters:{},updateResetAnalyticFilters:[],updateResetAdvanceFiltersToggle:!1,showMarkAsCompleteModal:!1,showResetProgressModal:!1,legacyUnits:[]}},computed:{selectedAnyUnit:function(){return Object.keys(this.checkedCoursesAndUnits).length>0},totalUnitsSelected:function(){var e,t=this,s=0;return Object.keys(null!==(e=this.checkedCoursesAndUnits)&&void 0!==e?e:{}).forEach((function(e){var r=t.checkedCoursesAndUnits[e];if(1===r.length&&"all"===r[0]){var o=t.getCourseData(e);s+=t.getCourseTotalUnits(o)}else s+=r.length})),s},needsToUpgrade:function(){return!this.$lw.isLearnworldsSupport&&!this.hasPermission(n._.BULK_ACTIONS)}},methods:{checkIfAllCourseUnitsAreSelected:function(e){return alert("You need to override this method"),!1},getCourseData:function(e){return alert("You need to override this method"),{}},getCourseTotalUnits:function(e){return alert("You need to override this method"),0},getSectionTotalUnits:function(e,t){return alert("You need to override this method"),0},massResetProgress:function(){this.resetProgress("Mass Update Progress sidebar")},userCardResetProgress:function(){this.resetProgress("Update Progress user card")},resetProgress:function(e){if(this.selectedAnyUnit){var t=this.createPayload();this.performUpdateProgressRequest("author/import/reset_progress",t,"Reset progress",e)}},massMarkAsComplete:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.markAsComplete(e,"Mass Update Progress sidebar")},userCardMarkAsComplete:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.markAsComplete(e,"Update Progress user card")},markAsComplete:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(this.selectedAnyUnit){var s=this.createPayload();s.sendCourseCompleteEmail=e,this.performUpdateProgressRequest("author/import/complete_progress",s,"Mark as complete",t)}},performUpdateProgressRequest:function(e,t,s,o){var n=this;window.broadcastEvent({action:"save"},!0),r.Z.post("".concat(window.server).concat(e),t).then((function(e){if(window.broadcastEvent({action:"saveFinished"},!0),e.data.errors&&e.data.errors.length>0)throw e.data.errors.map((function(e){return e.message})).join(", ");if(n.$lw.track(s,{asset:o}),n.$emit("close"),n.$emit("clearUserSelection"),e.data.isAsync){var t=window.authorController.redirectTo;return n.$lwGates.hasActivityViewPermission()||(t=function(){return showMessage("info","User actions log","You have no access to proceed. To access this page, the “View activity log” permission is required.",[{name:"OK"}])}),window.broadcastEvent({action:"asyncMassImportInProgress",payload:{id:e.data.importLog}}),showMessage("success","Mass update progress","Update progress scheduled for execution. You will be informed when finished",[{name:"OK"},{name:"Go to user actions log",func:t,args:["/author/import_logs"]}])}return showMessage("success","Mass update progress","Update progress was completed successfully",[{name:"OK"}])})).catch((function(e){return showMessage("error","Error executing action",e,[{name:"OK"}])})).finally((function(){return window.broadcastEvent({action:"saveFinished"},!0)}))},emptyCheckedCoursesAndUnits:function(){this.$set(this,"checkedCoursesAndUnits",{})},createPayload:function(){var e=this,t={courses:{},analyticFilters:this.updateResetAnalyticFilters,userFilters:this.updateResetUserFilters,userSelection:this.updateResetUsersSelection};return this.updateResetAdvanceFiltersToggle?t.userFilters={}:t.analyticFilters={},Object.keys(this.checkedCoursesAndUnits).forEach((function(s){var r=e.checkedCoursesAndUnits[s],o=e.getCourseData(s),n=e.checkIfAllCourseUnitsAreSelected(o);t.courses[s]=n?["all"]:r})),t},displayHideMarkAsCompleteModal:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e&&this.$lw.track("Mark as Complete Click",{asset:t}),this.showMarkAsCompleteModal=e},displayHideResetProgressModal:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e&&this.$lw.track("Reset Progress Click",{asset:t}),this.showResetProgressModal=e},isLegacyUnit:function(e){return"ebook"!==e&&this.legacyUnits.includes(e)}},created:function(){var e=this;o.Z.getUnitTypes().then((function(t){if(t.data.errors&&t.data.errors.length>0)throw t.data.errors.map((function(e){return e.message})).join(", ");var s=t.data.units;Object.keys(null!=s?s:{}).forEach((function(t){s[t].legacy&&e.legacyUnits.push(t)}))})).catch((function(e){return showMessage("error","Error fetching unit types",e,[{name:"OK"}])}))}}},16579:(e,t,s)=>{s.d(t,{Z:()=>c});var r=s(15861),o=s(64687),n=s.n(o),a=(s(57327),s(41539),s(88674),s(69600),s(21249),s(2707),s(68309),s(69826),s(97920)),i=s(82995),l=s(84564);const c={data:function(){return{userGroupMemberships:[]}},computed:{userGroupsWithMembership:function(){return this.userGroupMemberships.filter((function(e){return e.is_member}))},userGroupsWithoutMembership:function(){return this.userGroupMemberships.filter((function(e){return!e.is_member}))},needsToUpgrade:function(){return!this.hasPermission(l._.USER_GROUPS)}},methods:{loadUserGroupMemberships:function(e){var t={groupType:i.tf};return this.loadMemberships(e,t)},loadSeatOfferingMemberships:function(e){var t={groupType:i.ab};return this.loadMemberships(e,t)},loadMemberships:function(e,t){var s=this;return(0,r.Z)(n().mark((function r(){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,o){a.Z.getUserGroupInfoForUser(e,t).then((function(e){if(e.data.errors&&e.data.errors.length>0){if("User groups/seat offerings not applicable to school's plan."===e.data.errors[0].message)return;var t=e.data.errors.map((function(e){return e.message})).join(", ");showMessage("alert","Error getting user's user group / seat offering info",t,[{name:"OK"}]),o()}s.userGroupMemberships=e.data.user_group_memberships.sort((function(e,t){return e.user_group.name.localeCompare(t.user_group.name)})),r()}))})));case 1:case"end":return r.stop()}}),r)})))()},isUserGroupMember:function(e){return!!this.userGroupMemberships.find((function(t){return t.user_group.id===e}))},upgradeHandler:function(){this.$emit("close"),this.redirectToBillingAndTrack("Add to group sidebar","Users")}}}},25898:(e,t,s)=>{s.d(t,{Z:()=>o});s(92222);var r=s(93949);const o={repository:s(46536).ZP,getCourses:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.repository.get((0,r.bW)("/author/courses",e))},getCourse:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.repository.get((0,r.bW)("/course/".concat(e),t))},getCourseContents:function(e){var t=e.courseId,s=e.getParams,r="course/".concat(t);return r="".concat(r,"author"===s?"?contents-author":"?contents"),this.repository.get(r)},getUserDripData:function(e,t){return this.repository.get("/author/course/".concat(e,"/drip-users?search=").concat(t))},getUserDripDataForSection:function(e,t,s){return this.repository.get("/author/course/".concat(e,"/drip-users/").concat(t,"?page=").concat(s))},changeUserDripDay:function(e,t,s){var r={course:e,user:t,day:s};return this.repository.post("/author/users-course/drip-day",r)},createSections:function(e){return this.repository.post("author/course/sections/create",e)},createUnits:function(e){return this.repository.post("author/course/units/create",e)},importLearningActivities:function(e,t){if("sections"!==e&&"units"!==e)throw"Invalid import type '".concat(e,"'. Use either sections or units");return this.repository.post("author/course/".concat(e,"/import"),t)},getAssignment:function(e){return this.repository.get("/assignment-submission/".concat(e))},getAssignments:function(e){var t=(0,r.RX)(null!=e?e:{}),s=t?"?":"";return this.repository.get("/assignments".concat(s).concat(t))},getAssessments:function(e){var t,s=(e=(0,r.ut)(e)).courseId;delete e[s];var o=(0,r.RX)(null!==(t=e)&&void 0!==t?t:{}),n=o?"?":"";return this.repository.get("/author/".concat(s,"/assessments").concat(n).concat(o))},cloneCourse:function(e,t){return this.repository.post("course-clone/".concat(e),t)},deleteCourse:function(e){return this.repository.delete("course/".concat(e))},reorderCourses:function(e){return this.repository.post("courses-order",e)},validateUnitPassword:function(e,t,s){return this.repository.post("validate-unit-password/".concat(e,"/").concat(t),{password:s})},getUnitTypes:function(){return this.repository.get("/units/types")},saveCompletionRulesForLearningActivity:function(e,t){return this.repository.post("course/".concat(e,"/courseplayer"),t)}}},922:(e,t,s)=>{s.d(t,{Z:()=>o});s(68309),s(79753),s(92222),s(47042);const r={props:["value","name","isDisabled"],data:function(){return{selected:""}},created:function(){this.value&&(this.selected=this.value)},methods:{onChange:function(e){this.$emit("input",e.target.checked)}},watch:{value:function(e){this.selected=e}}};const o=(0,s(51900).Z)(r,(function(){var e,t=this,s=t._self._c;return s("div",{staticClass:"onoffswitch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],staticClass:"onoffswitch-checkbox",attrs:{type:"checkbox",id:t.name,disabled:null!==(e=t.isDisabled)&&void 0!==e&&e},domProps:{checked:Array.isArray(t.selected)?t._i(t.selected,null)>-1:t.selected},on:{change:[function(e){var s=t.selected,r=e.target,o=!!r.checked;if(Array.isArray(s)){var n=t._i(s,null);r.checked?n<0&&(t.selected=s.concat([null])):n>-1&&(t.selected=s.slice(0,n).concat(s.slice(n+1)))}else t.selected=o},t.onChange]}}),t._v(" "),s("label",{staticClass:"onoffswitch-label",attrs:{for:t.name}},[s("span",{staticClass:"onoffswitch-inner"}),t._v(" "),s("span",{staticClass:"onoffswitch-switch"})])])}),[],!1,null,null,null).exports},5453:(e,t,s)=>{s.d(t,{Z:()=>a});s(79753),s(92222),s(47042),s(9653);var r=s(33061),o=s(7217);const n={name:"MarkAsCompleteModal",props:{totalUsers:{type:Number,default:0},totalUnits:{type:Number,default:0}},components:{AuthoringTip:o.Z,Modal:r.Z},data:function(){return{AUTHOR_TIP_TYPE:o.B,sendCourseCompleteEmailChecked:!1,acknowledgeActionChecked:!1}},methods:{close:function(){this.$emit("close")},markAsComplete:function(){this.$emit("markAsComplete",this.sendCourseCompleteEmailChecked),this.close()}}};const a=(0,s(51900).Z)(n,(function(){var e=this,t=e._self._c;return t("modal",{staticStyle:{"z-index":"10000000"},attrs:{"content-classes":"w-700 h-320",titleBold:!0,portalable:!0},on:{close:e.close},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("\n        Are you sure you want to mark the selection as complete?\n    ")]},proxy:!0}])},[e._v(" "),t("div",{staticClass:"fg-1 ov-y-auto ov-x-hidden"},[e._t("description"),e._v(" "),t("div",{staticClass:"p-15"},[t("AuthoringTip",{attrs:{type:e.AUTHOR_TIP_TYPE.TIP,title:"Marking as complete means:"}},[t("ul",{staticClass:"p-0-28"},[t("li",[e._v(e._s(e.totalUnits)+" learning activities will be marked as completed")]),e._v(" "),t("li",[e._v(e._s(e.totalUsers)+" selected user"+e._s(e.totalUsers>1?"s":"")+" will be affected")]),e._v(" "),t("li",[e._v("Forms, exams & certificates will be automatically graded, with final score 100%. In case they are already completed by the learner, the score will not be affected.")])])])],1),e._v(" "),t("label",{staticClass:"cursor-pointer flex a-i-c mb-5 p-0-15"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.sendCourseCompleteEmailChecked,expression:"sendCourseCompleteEmailChecked"}],staticClass:"lw-checkbox-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.sendCourseCompleteEmailChecked)?e._i(e.sendCourseCompleteEmailChecked,null)>-1:e.sendCourseCompleteEmailChecked},on:{change:function(t){var s=e.sendCourseCompleteEmailChecked,r=t.target,o=!!r.checked;if(Array.isArray(s)){var n=e._i(s,null);r.checked?n<0&&(e.sendCourseCompleteEmailChecked=s.concat([null])):n>-1&&(e.sendCourseCompleteEmailChecked=s.slice(0,n).concat(s.slice(n+1)))}else e.sendCourseCompleteEmailChecked=o}}}),e._v(" "),t("span",{staticClass:"lw-checkbox-box small mr-10"}),e._v(" "),t("p",{staticClass:"lbl-small italic lbl-dark-gray normal"},[e._v("Send a course completion email to the user"+e._s(e.totalUsers>1?"s":"")+" for the completed courses")])]),e._v(" "),t("label",{staticClass:"cursor-pointer flex a-i-c mb-5 p-0-15"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.acknowledgeActionChecked,expression:"acknowledgeActionChecked"}],staticClass:"lw-checkbox-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.acknowledgeActionChecked)?e._i(e.acknowledgeActionChecked,null)>-1:e.acknowledgeActionChecked},on:{change:function(t){var s=e.acknowledgeActionChecked,r=t.target,o=!!r.checked;if(Array.isArray(s)){var n=e._i(s,null);r.checked?n<0&&(e.acknowledgeActionChecked=s.concat([null])):n>-1&&(e.acknowledgeActionChecked=s.slice(0,n).concat(s.slice(n+1)))}else e.acknowledgeActionChecked=o}}}),e._v(" "),t("span",{staticClass:"lw-checkbox-box small mr-10"}),e._v(" "),t("p",{staticClass:"lbl-small italic lbl-dark-gray normal"},[e._v("I understand that this action cannot be undone")])])],2),e._v(" "),t("div",{staticClass:"lw-bottom-bar flex a-i-c j-c-fe fsh-0 flex-wrap"},[t("button",{staticClass:"btn btn-l",class:{disabled:!e.acknowledgeActionChecked},on:{click:function(t){return t.stopPropagation(),e.markAsComplete()}}},[e._v("Mark as complete")]),e._v(" "),t("button",{staticClass:"btn btn-l btn-secondary",on:{click:e.close}},[e._v("Cancel")])])])}),[],!1,null,"16584a2b",null).exports},66089:(e,t,s)=>{s.d(t,{Z:()=>o});const r={name:"NoUserGroupInSchoolPlaceholder",mixins:[s(11180).Z],props:{isSeat:{type:Boolean,default:!1}}};const o=(0,s(51900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"no-content-msg-with-icon"},[t("img",{staticClass:"no-content-msg-icon",attrs:{src:e.imagePath+"/author/images/empty-state.svg",alt:"empty state"}}),e._v(" "),t("span",{staticClass:"no-content-msg-txt"},[e._v("\n          You haven’t created a "+e._s(e.isSeat?"seat offering":"user group")+" yet.\n          "),e.isSeat?t("a",{attrs:{href:"/author/multiple_seats"},on:{click:function(t){return e.redirectTo("/author/multiple_seats")}}},[e._v("Create a seat offering here")]):t("a",{attrs:{href:"/author/user_groups"},on:{click:function(t){return e.redirectTo("/author/user_groups")}}},[e._v("Create a user group here")]),e._v(".\n    ")])])}),[],!1,null,null,null).exports},62823:(e,t,s)=>{s.d(t,{Z:()=>i});s(79753),s(92222),s(47042),s(9653);var r=s(33061),o=s(7217),n=s(4950);const a={name:"ResetProgressModal",components:{AuthoringTip:o.Z,Modal:r.Z},props:{totalUsers:{type:Number,default:0},totalUnits:{type:Number,default:0}},data:function(){return{acknowledgeActionChecked:!1}},computed:{AUTHOR_TIP_TYPE:function(){return n.d}},methods:{close:function(){this.$emit("close")},resetProgress:function(){this.$emit("resetProgress"),this.close()}}};const i=(0,s(51900).Z)(a,(function(){var e=this,t=e._self._c;return t("modal",{attrs:{"content-classes":"w-700 h-320",titleBold:!0},on:{close:e.close},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"flex a-i-c"},[t("span",[e._v("Are you sure you want to reset progress for the selection?")]),e._v(" "),t("span",{staticClass:"ml-2 authoring-tag ginger"},[e._v("Beta")])])]},proxy:!0}])},[e._v(" "),t("div",{staticClass:"fg-1 ov-y-auto ov-x-hidden"},[e._t("description"),e._v(" "),t("div",{staticClass:"p-15"},[t("AuthoringTip",{attrs:{type:e.AUTHOR_TIP_TYPE.TIP,title:"Resetting progress means:"}},[t("ul",{staticClass:"p-0-28"},[t("li",[e._v("This action will reset progress for "+e._s(e.totalUnits)+" selected items (courses/sections/activities).")]),e._v(" "),t("li",[e._v("This action will affect "+e._s(e.totalUsers)+" selected users.")])])])],1),e._v(" "),t("label",{staticClass:"cursor-pointer flex a-i-c mb-5 p-0-15"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.acknowledgeActionChecked,expression:"acknowledgeActionChecked"}],staticClass:"lw-checkbox-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.acknowledgeActionChecked)?e._i(e.acknowledgeActionChecked,null)>-1:e.acknowledgeActionChecked},on:{change:function(t){var s=e.acknowledgeActionChecked,r=t.target,o=!!r.checked;if(Array.isArray(s)){var n=e._i(s,null);r.checked?n<0&&(e.acknowledgeActionChecked=s.concat([null])):n>-1&&(e.acknowledgeActionChecked=s.slice(0,n).concat(s.slice(n+1)))}else e.acknowledgeActionChecked=o}}}),e._v(" "),t("span",{staticClass:"lw-checkbox-box small mr-10"}),e._v(" "),t("p",{staticClass:"lbl-small italic lbl-dark-gray normal"},[e._v("I understand that this action cannot be undone")])])],2),e._v(" "),t("div",{staticClass:"lw-bottom-bar flex a-i-c j-c-fe fsh-0 flex-wrap"},[t("button",{staticClass:"btn btn-l",class:{disabled:!e.acknowledgeActionChecked},on:{click:function(t){return t.stopPropagation(),e.resetProgress()}}},[e._v("Reset progress")]),e._v(" "),t("button",{staticClass:"btn btn-l btn-secondary",on:{click:e.close}},[e._v("Cancel")])])])}),[],!1,null,"f2d0d8bc",null).exports},3368:(e,t,s)=>{s.d(t,{Z:()=>_});s(9653),s(92222),s(69600),s(21249);var r=s(92741),o=s(12233),n=s(34566),a=s(11180),i=s(25612),l=(s(57327),s(41539),s(79753),s(47042),s(93433)),c=(s(89554),s(54747),s(26833),s(57658),s(26699),s(32023),s(47941),s(82772),s(40561),s(69826),s(5453)),u=s(62823),d=s(31664),p=s(19110),h=s(4532);const m={name:"MultipleUsersProgress",components:{MarkAsCompleteModal:c.Z,ResetProgressModal:u.Z,UnitImage:h.Z},mixins:[d.Z,a.Z,p.Z],props:{analyticFilters:{type:Array,default:function(){return[]}},usersCount:{type:Number,default:0},userFilters:{type:Object,default:function(){}},userSelection:{type:Object,default:function(){}},actionType:{type:String,default:""},advanceFiltersToggle:{type:Boolean,default:!1}},data:function(){return{selectedCourses:[],coursesToModify:{},allExpanded:!1,selectedCourse:{id:"",title:"Select a course"}}},computed:{coursesToDisplay:function(){var e,t=[];return Object.values(null!==(e=this.coursesToModify)&&void 0!==e?e:{}).forEach((function(e){t.push(e)})),t},availableOptions:function(){var e=[{id:"",title:"Select a course"},{id:"allCourses",title:"All courses"}];return e.push.apply(e,(0,l.Z)(this.availableCourses)),e.push({id:"customList",title:"Custom List..."}),e}},created:function(){this.loadCourses(),this.updateResetUsersSelection=this.userSelection,this.updateResetUserFilters=this.userFilters,this.updateResetAnalyticFilters=this.analyticFilters,this.updateResetAdvanceFiltersToggle=this.advanceFiltersToggle},methods:{selectAllCourses:function(e){var t=this;this.selectAllCoursesVisible=!e,e?this.availableCourses.forEach((function(e){t.selectedCourses.map((function(e){return e.id})).includes(e.id)||(t.selectedCourses.push(e),t.addRemoveCourseToCoursesToModify(e))})):(this.selectedCourses=[],this.availableCourses.forEach((function(e){t.addRemoveCourseToCoursesToModify(e)})))},addRemoveCourseToCoursesToModify:function(e){if(this.selectedCourses.map((function(e){return e.id})).includes(e.id)){var t,s=window.authorController.getCourseContents()[e.titleId];s.selected=!1,s.expanded=!1,Object.values(null!==(t=s.sections)&&void 0!==t?t:{}).forEach((function(e){var t;e.selected=!1,e.expanded=!1,Object.values(null!==(t=e.units)&&void 0!==t?t:{}).forEach((function(e){e.selected=!1}))})),this.$set(this.coursesToModify,e.id,s)}else this.$delete(this.coursesToModify,e.id),this.$delete(this.checkedCoursesAndUnits,e.id)},toggleCourseExpanded:function(e){e.expanded=!e.expanded,Object.keys(e.sections).forEach((function(t){return e.sections[t].expanded=e.expanded}))},toggleChapterExpanded:function(e,t){t&&e.sections.hasOwnProperty(t)&&(e.sections[t].expanded=!e.sections[t].expanded)},expandCollapseAll:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.coursesToDisplay.forEach((function(s){s.expanded=t,Object.keys(s.sections).forEach((function(e){return s.sections[e].expanded=s.expanded})),e.allExpanded=t}))},selectUnselectCourse:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.selected=null!==s?s:!e.selected;var r=Object.values(e.sections).filter((function(e){return"private"===e.access})).length>0&&0===Object.values(e.sections).filter((function(e){return"private"!==e.access})).length;if(0===e.sections.length||r){var o=e.id;e.selected?this.$set(this.checkedCoursesAndUnits,o,["all"]):this.$delete(this.checkedCoursesAndUnits,o)}else Object.keys(e.sections).forEach((function(s){"private"!==e.sections[s].access&&t.selectUnselectChapter(e,s,e.selected)}))},selectUnselectChapter:function(e,t){var s=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=e.sections[t];"private"!==o.access&&(o.selected=null!==r?r:!o.selected,Object.values(o.units).forEach((function(t){s.selectUnselectUnit(e.id,t,o.selected)})))},selectUnselectUnit:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!this.isLegacyUnit(t.type)){t.selected=null!==s?s:!t.selected;var r=t.id;if(t.selected)this.checkedCoursesAndUnits.hasOwnProperty(e)?this.checkedCoursesAndUnits[e].includes(r)||this.checkedCoursesAndUnits[e].push(r):this.$set(this.checkedCoursesAndUnits,e,[r]);else if(this.checkedCoursesAndUnits.hasOwnProperty(e)){var o=this.checkedCoursesAndUnits[e].indexOf(r);o>-1&&this.checkedCoursesAndUnits[e].splice(o,1),0===this.checkedCoursesAndUnits[e].length&&this.$delete(this.checkedCoursesAndUnits,e)}}},checkIfCourseHasNoUnitsAndIsSelected:function(e){return!this.checkIfCourseHasUnits(e)&&e.selected},checkIfCourseHasUnits:function(e){return this.getCourseTotalUnits(e)>0},checkIfAllCourseUnitsAreSelected:function(e){var t,s=this,r=!1;return Object.keys(null!==(t=e.sections)&&void 0!==t?t:{}).forEach((function(t){if(!r){var o=e.sections[t];"private"===o.access||"private"!==o.access&&0===s.getSectionTotalUnits(e,t)||(r=!s.checkIfAllSectionUnitsAreSelected(e,t))}})),0===this.getCourseTotalUnits(e)&&(r=!0),!r},checkIfCourseHasAtLeastOneUnitSelected:function(e){var t,s=this.checkIfAllCourseUnitsAreSelected(e),r=!1;return Object.keys(null!==(t=e.sections)&&void 0!==t?t:{}).forEach((function(t){if(!r){var s=e.sections[t];"private"!==s.access&&Object.values(s.units).forEach((function(e){r||!0===e.selected&&(r=!0)}))}})),!s&&r},checkIfAllSectionUnitsAreSelected:function(e,t){var s=!1;return Object.values(e.sections[t].units).forEach((function(e){s||!1===e.selected&&(s=!0)})),0===this.getSectionTotalUnits(e,t)?s=!1:!s},checkIfSectionHasAtLeastOneUnitSelected:function(e,t){var s=this.checkIfAllSectionUnitsAreSelected(e,t),r=!1;return Object.values(e.sections[t].units).forEach((function(e){r||!0===e.selected&&(r=!0)})),0===this.getSectionTotalUnits(e,t)&&(r=!1),!s&&r},getCourseTotalUnits:function(e){var t,s=this,r=0;return Object.keys(null!==(t=e.sections)&&void 0!==t?t:{}).forEach((function(t){"private"!==e.sections[t].access&&(r+=s.getSectionTotalUnits(e,t))})),r},getSectionTotalUnits:function(e,t){return Object.keys(e.sections[t].units).length},selectCourseToModify:function(){this.selectAllCourses(!1),this.showAllCoursesList=!1,""!==this.selectedCourse.id&&("allCourses"!==this.selectedCourse.id?"customList"!==this.selectedCourse.id?(this.selectedCourses.push(this.selectedCourse),this.addRemoveCourseToCoursesToModify(this.selectedCourse)):this.showAllCoursesList=!0:this.selectAllCourses(!0))},getCourseData:function(e){var t;return Object.values(null!==(t=this.coursesToModify)&&void 0!==t?t:{}).find((function(t){return t.id===e}))}}};var f=s(51900);const v=(0,f.Z)(m,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"section-card-row-small relative z-index-1"},[e._m(0),e._v(" "),t("div",{staticClass:"section-card-part-small",class:{disabled:e.needsToUpgrade}},[t("label",{staticClass:"form-select-lbl select-lbl",staticStyle:{"margin-top":"5px"}},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedCourse,expression:"selectedCourse"}],staticClass:"form-text-input form-big-text-input",on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedCourse=t.target.multiple?s:s[0]},function(t){return e.selectCourseToModify()}]}},e._l(e.availableOptions,(function(s){return t("option",{key:s.id,attrs:{id:"option_".concat(s.id)},domProps:{value:s}},[e._v(e._s(s.title)+"\n                    ")])})),0)]),e._v(" "),e.showAllCoursesList?t("div",[t("p",{staticClass:"learnworlds-sideform-section-row-lbl",staticStyle:{"margin-top":"7px","padding-left":"10px"}},[t("a",{directives:[{name:"show",rawName:"v-show",value:e.selectAllCoursesVisible,expression:"selectAllCoursesVisible"}],attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.selectAllCourses(!0)}}},[e._v("Select all courses")]),e._v(" "),t("a",{directives:[{name:"show",rawName:"v-show",value:!e.selectAllCoursesVisible,expression:"!selectAllCoursesVisible"}],attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.selectAllCourses(!1)}}},[e._v("Deselect all courses")])]),e._v(" "),t("div",{staticClass:"checkboxes-list"},e._l(e.availableCourses,(function(s){return t("div",{key:s.id,staticClass:"flex-wrapper with-checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCourses,expression:"selectedCourses"}],staticClass:"checkmark-checkbox",attrs:{type:"checkbox",id:s.id},domProps:{value:s,checked:Array.isArray(e.selectedCourses)?e._i(e.selectedCourses,s)>-1:e.selectedCourses},on:{change:[function(t){var r=e.selectedCourses,o=t.target,n=!!o.checked;if(Array.isArray(r)){var a=s,i=e._i(r,a);o.checked?i<0&&(e.selectedCourses=r.concat([a])):i>-1&&(e.selectedCourses=r.slice(0,i).concat(r.slice(i+1)))}else e.selectedCourses=n},function(t){return e.addRemoveCourseToCoursesToModify(s)}]}}),e._v(" "),t("label",{attrs:{for:s.id}}),e._v(" "),t("div",{staticClass:"settings-small-lbl v-middle"},[e._v(e._s(s.title))])])})),0)]):e._e()])]),e._v(" "),t("div",{staticClass:"section-card-row-small relative z-index-1"},[e._m(1),e._v(" "),t("div",{staticClass:"section-card-part-small",class:{disabled:e.needsToUpgrade}},[e.coursesToDisplay&&e.coursesToDisplay.length>0?t("div",{staticClass:"user-stats-progress"},[t("div",[e.coursesToDisplay.length>0?t("ul",[t("li",{staticClass:"head-row"},[t("div",[e._v("Course\n                                "),t("div",{staticClass:"ml-5 inline-block responsive-hide-629"},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.expandCollapseAll(!e.allExpanded)}}},[e._v("\n                                        "+e._s(e.allExpanded?"- Collapse all":"+ Expand all"))])])]),e._v(" "),t("div",{staticClass:"flex j-c-c"})])]):e._e(),e._v(" "),e._l(e.coursesToDisplay,(function(s){return t("ul",{key:s.title,staticClass:"panel with-accordion"},[t("li",{class:{expanded:s.expanded}},[t("ul",{staticClass:"full-width"},[t("li",{staticClass:"chapter-title",on:{click:function(t){return e.toggleCourseExpanded(s)}}},[t("div",[t("img",{staticClass:"arrow",attrs:{src:e.imagePath+"/author/images/angle-down_grey.svg"}}),e._v(" "),t("span",[e._v(e._s(s.title))]),e._v(" "),s.expired?t("span",{staticClass:"authoring-tag notice"},[e._v("unenrolled/expired")]):e._e()]),e._v(" "),t("div",{staticClass:"form-lbl flex j-c-c",on:{click:function(t){return t.stopPropagation(),e.selectUnselectCourse(s)}}},[t("input",{staticClass:"lw-accordion2-item-checkbox checkmark-checkbox",class:[e.checkIfCourseHasAtLeastOneUnitSelected(s)&&e.checkIfCourseHasUnits(s)?"indeterminate":""],attrs:{type:"checkbox"},domProps:{checked:e.checkIfCourseHasAtLeastOneUnitSelected(s)||e.checkIfAllCourseUnitsAreSelected(s)||e.checkIfCourseHasNoUnitsAndIsSelected(s)}}),e._v(" "),t("label")])])])]),e._v(" "),e._l(s.sections,(function(r,o){return!0===s.expanded&&"private"!==r.access&&e.getSectionTotalUnits(s,o)>0?t("li",{key:o,class:{expanded:r.expanded}},[t("ul",{staticClass:"full-width nested"},[t("li",{staticClass:"chapter-title",on:{click:function(t){return e.toggleChapterExpanded(s,o)}}},[t("div",{staticClass:"pl-20"},[t("img",{staticClass:"arrow",attrs:{src:e.imagePath+"/author/images/angle-down_grey.svg"}}),e._v(" "),t("span",[e._v(e._s(r.title))])]),e._v(" "),t("div",{staticClass:"form-lbl flex j-c-c small",class:[0===e.getSectionTotalUnits(s,o)?"disabled":""],on:{click:function(t){return t.stopPropagation(),e.selectUnselectChapter(s,o)}}},[t("input",{staticClass:"lw-accordion2-item-checkbox checkmark-checkbox",class:[e.checkIfSectionHasAtLeastOneUnitSelected(s,o)?"indeterminate":""],attrs:{type:"checkbox"},domProps:{checked:e.checkIfSectionHasAtLeastOneUnitSelected(s,o)||e.checkIfAllSectionUnitsAreSelected(s,o)}}),e._v(" "),t("label")])]),e._v(" "),e._l(r.units,(function(r,o){return t("li",{key:o,staticClass:"learning-unit-row"},[t("div",[t("UnitImage",{attrs:{"unit-type":r.icon}}),e._v(" "),t("span",{staticClass:"learning-unit-name"},[e._v(e._s(r.title))])],1),e._v(" "),t("div",{staticClass:"with-suboptions with-bubble specific-editing-lbl-wrapper",on:{click:function(t){return t.stopPropagation(),e.selectUnselectUnit(s.id,r)}}},[t("input",{staticClass:"lw-accordion2-item-checkbox checkmark-checkbox",class:{disabled:e.isLegacyUnit(r.type)},attrs:{type:"checkbox",id:r.unitName},domProps:{checked:!0===r.selected}}),e._v(" "),t("label",{class:{disabled:e.isLegacyUnit(r.type)}}),e._v(" "),e.isLegacyUnit(r.type)?t("span",{staticClass:"specific-editing-lbl to-left wrap w-200 talign-l"},[e._v("You need to migrate this legacy learning activity to the new one in order to use the “Update progress” functionality.")]):e._e()])])}))],2)]):e._e()}))],2)})),e._v(" "),t("div",{staticClass:"pt-10"},[t("div",{staticClass:"flex flex-d-row j-c-sb a-i-c"},[t("div",{staticClass:"flex flex-wrap gap-4"},[t("button",{staticClass:"btn btn-l nowrap",class:{disabled:!e.selectedAnyUnit||e.needsToUpgrade},on:{click:function(t){return e.displayHideMarkAsCompleteModal(!0,"Mass Update Progress sidebar")}}},[e._v("\n                                    Mark complete\n                                ")]),e._v(" "),t("button",{staticClass:"btn btn-l",class:{disabled:!e.selectedAnyUnit||e.needsToUpgrade},on:{click:function(t){return e.displayHideResetProgressModal(!0,"Mass Update Progress sidebar")}}},[e._v("\n                                    Reset progress\n                                ")]),e._v(" "),t("button",{staticClass:"btn btn-l btn-secondary",attrs:{type:"button"},on:{click:function(t){return e.$emit("close")}}},[e._v("\n                                    Cancel\n                                ")])]),e._v(" "),t("div",{staticClass:"talign-r"},[e.needsToUpgrade?e._e():[e.totalUnitsSelected>0?t("span",{staticClass:"lbl-normal"},[e._v(e._s(e.totalUnitsSelected)+" activities")]):e._e()]],2)])])],2)]):t("div",{staticClass:"no-content-msg-with-icon"},[t("img",{staticClass:"no-content-msg-icon",attrs:{src:e.imagePath+"/author/images/empty-state.svg"}}),e._v(" "),t("div",{staticClass:"js-user-stats-list-nocourses no-content-msg"},[e._v("Select a course to view it's learning\n                    activities\n                ")])])])]),e._v(" "),e.showMarkAsCompleteModal?t("mark-as-complete-modal",{attrs:{"total-users":e.updateResetUsersSelection.numUsers,"total-units":e.totalUnitsSelected},on:{close:function(t){return e.displayHideMarkAsCompleteModal(!1)},markAsComplete:e.massMarkAsComplete}}):e._e(),e._v(" "),e.showResetProgressModal?t("reset-progress-modal",{attrs:{"total-users":e.updateResetUsersSelection.numUsers,"total-units":e.totalUnitsSelected},on:{close:function(t){return e.displayHideResetProgressModal(!1)},resetProgress:e.massResetProgress}}):e._e()],1)}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"section-card-part-small"},[t("div",{staticClass:"inner-title-small"},[e._v("Select courses")]),e._v(" "),t("p",{staticClass:"inner-subtitle-small"},[e._v("\n                Select for which courses you want to update progress.\n            ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"section-card-part-small"},[t("div",{staticClass:"inner-title-small"},[e._v("Update progress")]),e._v(" "),t("p",{staticClass:"inner-subtitle-small"},[e._v("\n                Reset or complete learning activities, sections or the whole course for your users.\n            ")])])}],!1,null,"4f2912b7",null).exports;var g=s(14351),C=s(84564);const b={name:"massActionsUpdateResetProgressSidebar",components:{AuthorSideformSection:g.Z,AuthorSideform:n.Z,UpgradeBanner:o.Z,UserCardProgress:i.Z,MultipleUsersProgress:v},mixins:[a.Z],props:{analyticFilters:{type:Array,default:function(){return[]}},usersCount:{type:Number,default:0},userFilters:{type:Object,default:function(){}},userSelection:{type:Object,default:function(){}},actionType:{type:String,default:""},advanceFiltersToggle:{type:Boolean,default:!1},displayOverlay:{type:Boolean,default:!0}},data:function(){return{user:null}},computed:{totalUsersAffected:function(){return!1===this.userSelection.allUsersChecked?this.userSelection.checkedUsers.length:this.usersCount-this.userSelection.uncheckedUsers.length},isSingleUser:function(){return 1===this.totalUsersAffected},needsToUpgrade:function(){return!this.$lw.isLearnworldsSupport&&!this.hasPermission(C._.BULK_ACTIONS)}},created:function(){1===this.totalUsersAffected&&this.getUserDetails()},methods:{getUserDetails:function(){var e=this,t=this.userSelection.checkedUsers[0],s="".concat(server,"author/user/").concat(t);r.Z.get(s).then((function(t){if(t.data.errors&&t.data.errors.length>0)return showMessage("alert","Error fetching user details",t.data.errors.map((function(e){return e.message})).join(", "),[{name:"OK"}]);e.user=t.data.user})).catch((function(e){displayError(e)}))}}};const _=(0,f.Z)(b,(function(){var e,t,s=this,r=s._self._c;return r("AuthorSideform",{attrs:{title:"Update progress"},on:{close:function(e){return s.$emit("close")}},scopedSlots:s._u([s.needsToUpgrade?{key:"upgrade",fn:function(){return[r("UpgradeBanner",{attrs:{description:"Save time with mass actions. Easily perform tasks on multiple users at once by selecting them through the table."},on:{upgrade:function(e){return s.redirectToBillingAndTrack("Mass Update Progress sidebar","Users")}}})]},proxy:!0}:null],null,!0)},[s._v(" "),r("AuthorSideformSection",{attrs:{title:"Selected user".concat(s.totalUsersAffected>1?"s":""),description:s.totalUsersAffected>1?"Number of users who will be affected by the update.":"User who will be affected by the update."}},[s.isSingleUser?r("div",{staticClass:"flex a-i-c"},[r("img",{staticClass:"user-image",attrs:{src:null===(e=s.user)||void 0===e?void 0:e.image,width:"50"}}),s._v(" "),r("span",{staticClass:"js-username username lbl-normal grey2 weight-500"},[s._v(s._s(null===(t=s.user)||void 0===t?void 0:t.username))])]):r("p",{staticClass:"settings-descr"},[s._v(s._s(s.totalUsersAffected)+" users selected")])]),s._v(" "),s.isSingleUser?r("div",{staticClass:"section-card-row-small"},[null!==s.user?r("div",{staticClass:"section-card-row-small relative"},[r("div",{staticClass:"section-card-part-small"},[r("div",{staticClass:"inner-title-small"},[s._v("Update Progress")]),s._v(" "),r("p",{staticClass:"inner-subtitle-small"},[s._v("\n                    Reset or complete learning activities, sections or the whole course for your user.\n                ")])]),s._v(" "),r("div",{staticClass:"section-card-part-small"},[r("UserCardProgress",{class:{disabled:s.needsToUpgrade},attrs:{"enable-update-reset-progress-buttons":!0,"display-update-progress-toggle":!1,user:s.user},on:{close:function(e){return s.$emit("close")},clearUserSelection:function(e){return s.$emit("clearUserSelection")}}})],1)]):s._e()]):r("MultipleUsersProgress",{attrs:{"analytic-filters":s.analyticFilters,"users-count":s.usersCount,"user-filters":s.userFilters,"user-selection":s.userSelection,"action-type":s.actionType,"advance-filters-toggle":s.advanceFiltersToggle},on:{close:function(e){return s.$emit("close")},clearUserSelection:function(e){return s.$emit("clearUserSelection")}}})],1)}),[],!1,null,"6426eedc",null).exports},31664:(e,t,s)=>{s.d(t,{Z:()=>a});var r=s(93433),o=(s(69826),s(41539),s(21249),s(57327),s(89554),s(54747),s(26833),s(57658),s(2707),function(e,t){return e.title.toLowerCase()>t.title.toLowerCase()?1:-1});const n={name:"SelectProductMixin",data:function(){return{includeFreeCourses:!0,selectedProductId:"",selectedProducts:[],selectAllCoursesVisible:!0,showAllCoursesList:!1,noProductCoursesSelected:!1,availableProducts:[],availableCourses:[]}},computed:{isSelectedProductACourse:function(){var e=this,t=this.availableProducts.find((function(t){return t.id===e.selectedProductId}));return null!==t&&("course"===t.type||"bundle"===t.type)}},methods:{getCoursesBundles:function(){var e=this,t=this.availableProducts.find((function(t){return t.id===e.selectedProductId}));return t&&""!==t.type?(this.$set(this.payload,"bundles",[]),this.$set(this.payload,"courses",[]),"customList"===t.type?(this.$set(this.payload,"courses",this.selectedProducts.filter((function(e){return"course"===e.type})).map((function(e){return e.titleId}))),this.$set(this.payload,"bundles",this.selectedProducts.filter((function(e){return"bundle"===e.type})).map((function(e){return e.titleId})))):"allCourses"===t.type?this.$set(this.payload,"courses",["all"]):"course"===t.type?this.$set(this.payload,"courses",[t.titleId]):"bundle"===t.type&&this.$set(this.payload,"bundles",[t.titleId]),!0):(showMessage("alert","Mass enrollment","No products selected for enroll",[{name:"OK"}]),!1)},selectAllCourses:function(e){this.selectAllCoursesVisible=!e,e?this.$set(this,"selectedProducts",this.availableCourses):this.$set(this,"selectedProducts",[])},selectProduct:function(){var e=this,t=this.availableProducts.find((function(t){return t.id===e.selectedProductId}));t&&(this.showAllCoursesList="customList"===t.type)},loadCourses:function(){var e=this,t=window.authorController.getCourses(),s=[],n=[{id:"",title:"Select a course",products:[],type:"",image:""},{id:"allCourses",title:"All courses",products:[],type:"allCourses",image:""}];Object.values(t).forEach((function(t){"private"===t.access||"free"===t.status&&!e.includeFreeCourses||s.push({id:t.id,title:t.title,titleId:t.titleId,type:"course",image:t.courseImage.url})}));var a=s.sort(o);n.push.apply(n,(0,r.Z)(a));var i=window.authorController.getBundles();if(i){var l=[];Object.values(i).forEach((function(e){return l.push({id:e.id,titleId:e.titleId,title:"Bundle : "+e.title,products:e.products,type:"bundle"})})),n.push.apply(n,(0,r.Z)(l.sort(o)))}n.push({id:"customList",title:"Custom List...",products:[],type:"customList"}),this.$set(this,"availableCourses",a),this.$set(this,"availableProducts",n)}}};const a=(0,s(51900).Z)(n,undefined,undefined,!1,null,null,null).exports},14351:(e,t,s)=>{s.d(t,{Z:()=>n});s(82526),s(41817);var r=s(92817);const o={name:"AuthorSideformSection",components:{AuthoringTip:s(7217).Z,AuthorButton:r.Z},props:{title:{type:String,default:""},description:{type:String,default:""},buttonLabel:{type:String,required:!1},buttonAction:{type:Function,required:!1},extraClasses:{type:String,required:!1},tipContent:{type:String,default:""},borderedContent:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{AUTHOR_BUTTON_TYPE:r.t}}};const n=(0,s(51900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"section-card-row-small",class:e.extraClasses,staticStyle:{"table-layout":"fixed"}},[t("div",{staticClass:"section-card-part-small with-line-effect"},[e._t("title",(function(){return[e.title?t("h6",{staticClass:"inner-title-small"},[e._v(e._s(e.title))]):e._e()]})),e._v(" "),e._t("description",(function(){return[e.description?t("span",{staticClass:"inner-subtitle-small",domProps:{innerHTML:e._s(e.description)}}):e._e()]})),e._v(" "),e._t("tip"),e._v(" "),e.buttonLabel?t("author-button",{staticClass:"mt-15",attrs:{type:e.AUTHOR_BUTTON_TYPE.SOFT,label:e.buttonLabel},on:{click:e.buttonAction}}):e._e(),e._v(" "),e.tipContent?t("authoring-tip",{staticClass:"mt-15"},[t("span",{domProps:{innerHTML:e._s(e.tipContent)}})]):e._e()],2),e._v(" "),t("div",{staticClass:"section-card-part-small",class:{"with-bordered-content":e.borderedContent,disabled:e.disabled}},[e.borderedContent?t("div",{staticClass:"bordered-content"},[e._t("default")],2):e._t("default")],2)])}),[],!1,null,null,null).exports},7217:(e,t,s)=>{s.d(t,{B:()=>r,Z:()=>n});var r={NOTIFICATION:"notification",WARNING:"warning",APPROVAL:"approval",ACCURACY:"accuracy",EXTRA_INFO:"extra-info",EXTRA_INFO_DARK:"extra-info-dark",INFO:"info",TIP:"tip",UPGRADE:"upgrade",LAUNCH:"launch"};const o={name:"AuthoringTip",props:{type:{type:String,default:"info"},showIcon:{type:Boolean,default:!0},title:{type:String,default:""},content:{type:String,default:""}},data:function(){return{imagePath:window.imagePath}},computed:{authoringTipClasses:function(){return{notification:"notification"===this.type,warning:"warning"===this.type,approval:"approval"===this.type,accuracy:"accuracy"===this.type,"extra-info":"extra-info"===this.type,"extra-info-dark":"extra-info-dark"===this.type,tip:"tip"===this.type,info:"info"===this.type,upgrade:"upgrade"===this.type,launch:"launch"===this.type,withoutIcon:!this.showIcon}},imageSrc:function(){switch(this.type){case"notification":return"".concat(this.imagePath,"/author/images/icons/small/alert-triangle-red.svg");case"warning":return"".concat(this.imagePath,"/author/images/svg/warning-icon.svg");case"approval":return"".concat(this.imagePath,"/author/images/thumbs-up.png");case"extra-info":case"extra-info-dark":return"".concat(this.imagePath,"/author/images/icons/small/extra-info.svg");case"tip":return"".concat(this.imagePath,"/author/images/icons/small/info.svg");case"info":return"".concat(this.imagePath,"/author/images/icons/small/bulb-yellow.svg");default:return"".concat(this.imagePath,"/author/images/tip-icon.png")}}}};const n=(0,s(51900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"authoring-tip",class:e.authoringTipClasses},[e.showIcon?t("img",{staticClass:"authoring-tip-icon",attrs:{alt:"Tip",src:e.imageSrc}}):e._e(),e._v(" "),t("div",{staticClass:"w-full flex flex-d-col a-i-fs"},[e.title?t("span",{staticClass:"authoring-tip-title"},[e._v("\n            "+e._s(e.title)+"\n        ")]):e._e(),e._v(" "),t("div",{staticClass:"authoring-tip-txt w-full"},[e._t("default",(function(){return[t("span",{domProps:{innerHTML:e._s(e.content)}})]}))],2)])])}),[],!1,null,"1ec724b6",null).exports},81778:(e,t,s)=>{s.d(t,{Z:()=>o});s(82526),s(41817);const r={name:"SideformNullPlaceholder",components:{NullPlaceholder:s(55881).Z},props:{title:{type:String,default:"No matches found"},description:{type:String,default:""}}};const o=(0,s(51900).Z)(r,(function(){var e=this;return(0,e._self._c)("NullPlaceholder",{attrs:{title:e.title,img:"/author/images/placeholders/no-entries.svg","small-img":""}},[e._t("default",(function(){return[e._v("\n       "+e._s(e.description)+"\n    ")]}))],2)}),[],!1,null,null,null).exports},25612:(e,t,s)=>{s.d(t,{Z:()=>C});var r=s(93433),o=(s(92222),s(69826),s(41539),s(21249),s(69600),s(82772),s(89554),s(54747),s(34553),s(57658),s(47941),s(91058),s(26699),s(32023),s(40561),s(92741)),n=s(81778),a=s(12233),i=s(44035),l=s(11180),c=s(4532),u=s(19110),d=s(922),p=s(5453),h=s(62823);s(9653);const m={name:"UpdateProgressFooter",props:{totalUnitsSelected:{type:Number,default:0},selectedAnyUnit:{type:Boolean,default:!1},enableProgressButtons:{type:Boolean,default:!1},needsToUpgrade:{type:Boolean,default:!1}},methods:{displayResetProgressModal:function(){this.$emit("resetProgressModal")},displayMarkCompleteModal:function(){this.$emit("markCompleteModal")},closeUpdateProgress:function(){this.$emit("closeUpdateProgress")}}};var f=s(51900);const v=(0,f.Z)(m,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex-wrap-below-840 j-c-c with-bottom-shadow radius-5 b-1px-lightGray"},[e.needsToUpgrade?t("span",{staticClass:"lbl-normal mr-10 responsive-hide-629"},[e._v("Upgrade your plan to select")]):[t("div",{staticClass:"p-0-40 au-bg flex fg-1-below-840 a-i-c j-c-c radius-5"},[e.selectedAnyUnit?t("div",{staticClass:"lbl-white flex a-i-c"},[t("span",{staticClass:"lbl-extra-large2 weight-500 mr-10 pos-rel",staticStyle:{bottom:"2px"}},[e._v(e._s(e.totalUnitsSelected))]),e._v(" "),t("span",{staticClass:"lbl-normal weight-500"},[e._v("activities selected")])]):t("span",{staticClass:"lbl-white lbl-normal weight-500"},[e._v("(select learning activities)")])])],e._v(" "),t("div",{staticClass:"au-white-bg flex flex-wrap a-i-fs j-c-c p-0-40 fg-1 radius-5"},[t("div",{staticClass:"talign-c enroll m-10 cursor-pointer",class:{disabled:!e.selectedAnyUnit||!e.enableProgressButtons||e.needsToUpgrade},on:{click:function(t){return e.displayMarkCompleteModal()}}},[t("img",{staticClass:"au-icon",attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/checkbox.svg")}}),e._v(" "),t("span",{staticClass:"block lbl-normal weight-500 grey2"},[e._v("Mark complete")])]),e._v(" "),t("div",{staticClass:"talign-c unenroll m-10 cursor-pointer",class:{disabled:!e.selectedAnyUnit||!e.enableProgressButtons||e.needsToUpgrade},on:{click:function(t){return e.displayResetProgressModal()}}},[t("img",{staticClass:"au-icon",attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/rotate-clockwise.svg")}}),e._v(" "),t("span",{staticClass:"block lbl-normal weight-500 grey2"},[e._v("Reset Progress")])]),e._v(" "),t("div",{staticClass:"w-20 h-20 cursor-pointer m-10",on:{click:function(t){return e.closeUpdateProgress()}}},[t("img",{staticClass:"w-full au-icon",attrs:{src:e.$lw.img("/author/images/icons/small/x.svg")}})])])],2)}),[],!1,null,null,null).exports,g={name:"UserCardProgress",components:{UpgradeBanner:a.Z,SideformNullPlaceholder:n.Z,UnitImage:c.Z,switchButton:d.Z,MarkAsCompleteModal:p.Z,ResetProgressModal:h.Z,UpdateProgressFooter:v},mixins:[i.Z,l.Z,u.Z],props:{user:{type:Object,default:function(){return null}},courseId:{type:String,default:""},enableUpdateResetProgressButtons:{type:Boolean,default:!1},displayUpdateProgressToggle:{type:Boolean,default:!0}},data:function(){return{userCourses:null,coursesData:[],chaptersExpanded:{},allExpanded:!1,courseContents:[],loading:!1,userHasPermissionOnCourse:!0,updateProgressToggle:this.displayUpdateProgressToggle,enableProgressButtons:!1,displayProgressButtons:!1}},computed:{hasActivityViewPermission:function(){return this.$lwGates.hasActivityViewPermission()}},watch:{enableUpdateResetProgressButtons:{immediate:!0,handler:function(e,t){null!==e&&(this.enableProgressButtons=e),this.displayProgressButtons=null!==e,!0===this.enableProgressButtons&&(this.updateResetUsersSelection.checkedUsers=[this.user.id],this.updateResetUsersSelection.numUsers=1)}}},mounted:function(){var e,t;this.courseContents=null!==(e=null===(t=window.top.authorController)||void 0===t?void 0:t.getCourseContents())&&void 0!==e?e:null},created:function(){var e=this;null!==this.user&&(this.userCourses=[].concat((0,r.Z)(this.user.enrolledCourses),(0,r.Z)(this.user.expiredCourses))),this.fetchAllCoursesData().then((function(){if(""!==e.courseId){var t=e.coursesData.find((function(t){return t.hasOwnProperty("analyticsUserCourseData")&&t.analyticsUserCourseData.courseId===e.courseId}));void 0!==t&&e.toggleCourseExpanded(t)}}))},methods:{fetchAllCoursesData:function(){var e=this;this.$emit("showLoading",!0);var t=this.userCourses.map((function(e){return e.id}));return this.coursesData.length=0,o.Z.post("".concat(server,"author/analytics/userProgress"),{userId:this.user.id,courses:t,withDetails:!0}).then((function(s){if(e.$emit("showLoading",!1),s.data.errors&&s.data.errors.length>0)return s.data.errors.map((function(e){return e.message})).join(",").indexOf("Permission denied")>=0?void(e.userHasPermissionOnCourse=!1):showMessage("alert","Load data","Error loading data. ".concat(s.data.errors.map((function(e){return e.message})).join(", ")),[{name:"OK"}]);e.userHasPermissionOnCourse=!0;var r=[];t.forEach((function(t){var o=s.data.analyticsResponse.data,n=o.hasOwnProperty(e.user.id)&&o[e.user.id].hasOwnProperty(t)?s.data.analyticsResponse.data[e.user.id][t]:void 0;if(void 0!==n){var a=e.userCourses.find((function(e){return e.id===t})).title;if(n.courseName=null!=a?a:"N/A",n.courseCompleted=!1,n.courseManuallyCompleted=!1,n.expanded=!1,n.courseId=t,s.data.coursesInfo&&s.data.coursesInfo.length>0){var i=s.data.coursesInfo.find((function(e){return e.courseId===t}));i&&(n.courseCompleted=i.completed,n.courseManuallyCompleted=i.manuallyCompleted)}n.chapterTotals=e.calculateTotalsPerChapter(n.userProgress),n.courseTotals=e.calculateTotalsPerCourse(n.userProgress),n.courseTotals.completed=n.courseCompleted,n.courseTotals.manuallyCompleted=n.courseManuallyCompleted,n.expired=e.user.expiredCourses.findIndex((function(e){return e.id===t}))>-1,r.push(n)}})),e.$set(e,"coursesData",r)})).catch((function(t){return e.$emit("showLoading",!1),showMessage("alert","User progress error",t.message,[{name:"OK"}])}))},calculateTotalsPerChapter:function(e){var t={};return e?(Object.keys(e).forEach((function(s){var r=0,o=0,n=0,a=!0,i=0,l=0;Object.keys(e[s]).forEach((function(t){i++;var c=e[s][t];c.selected=!1,n+=c.timeSpentInUnit?c.timeSpentInUnit:0,c.hasOwnProperty("unitScoreRaw")&&""!==c.unitScoreRaw&&(r+=parseInt(c.unitScoreRaw),o++),!1===c.isUnitCompleted&&(a=!1,l++)})),t[s]={timeSpent:0===n?null:n,avgScore:0===o?null:Math.round(r/o),expanded:!1,selected:!1},t[s].completed=a?"Completed":l===i?"":"No"})),t):t},calculateTotalsPerCourse:function(e){var t={timeSpent:null,score:null,selected:!1};if(!e)return t;var s,r=0,o=0,n=0;return Object.keys(e).forEach((function(t){var s=0;Object.keys(e[t]).forEach((function(r){var a=e[t][r];s+=a.timeSpentInUnit?a.timeSpentInUnit:0,a.hasOwnProperty("unitScoreRaw")&&""!==a.unitScoreRaw&&(o+=parseInt(a.unitScoreRaw),n++)})),r+=s})),s=0===n?null:Math.round(o/n),t={timeSpent:r,score:s,selected:!1}},getChapterName:function(e){return e?e[Object.keys(e)[0]].chapterName:""},getChapterTotals:function(e,t,s){if(!t)return"";if(!e.chapterTotals.hasOwnProperty(t))return"";var r=e.chapterTotals[t].hasOwnProperty(s)?e.chapterTotals[t][s]:"";return"avgScore"===s?r?"".concat(r,"%"):"":r},toggleCourseExpanded:function(e){e.expanded=!e.expanded,Object.keys(e.chapterTotals).forEach((function(t){return e.chapterTotals[t].expanded=e.expanded}))},toggleChapterExpanded:function(e,t){t&&e.chapterTotals.hasOwnProperty(t)&&(e.chapterTotals[t].expanded=!e.chapterTotals[t].expanded)},expandCollapseAll:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.coursesData.forEach((function(s){s.expanded=t,Object.keys(s.chapterTotals).forEach((function(e){return s.chapterTotals[e].expanded=s.allExpanded})),e.allExpanded=t}))},downloadActivityReport:function(e,t){window.open("".concat(this.apiUrl,"/user/").concat(this.user.id,"/course/").concat(e.analyticsUserCourseData.courseId,"/download/activity?").concat(this.oAuthInfo,"&sort=").concat(t))},downloadScoreReport:function(e){window.open("".concat(this.apiUrl,"/user/").concat(this.user.id,"/course/").concat(e.analyticsUserCourseData.courseId,"/download/scores?").concat(this.oAuthInfo))},getUnitIcon:function(e,t){var s,r,o,n,a,i,l,c=null==t||null===(s=t.analyticsUserCourseData)||void 0===s?void 0:s.courseTitleId,u=e.chapterId,d=e.unitId,p=null===(r=this.courseContents)||void 0===r||null===(o=r[c])||void 0===o||null===(n=o.sections)||void 0===n||null===(a=n[u])||void 0===a||null===(i=a.units)||void 0===i?void 0:i[d];return null!==(l=null==p?void 0:p.icon)&&void 0!==l?l:e.unitType},selectUnselectCourse:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e.courseTotals.selected=null!==s?s:!e.courseTotals.selected,void 0===e.userProgress){var r=e.courseId;e.courseTotals.selected?this.$set(this.checkedCoursesAndUnits,r,["all"]):this.$delete(this.checkedCoursesAndUnits,r)}else Object.keys(e.chapterTotals).forEach((function(s){t.selectUnselectChapter(e,s,e.courseTotals.selected)}))},selectUnselectChapter:function(e,t){var s=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.chapterTotals[t].selected=null!==r?r:!e.chapterTotals[t].selected,Object.keys(e.userProgress[t]).forEach((function(r){s.selectUnselectUnit(e.courseId,e.userProgress[t][r],e.chapterTotals[t].selected)}))},selectUnselectUnit:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!this.isLegacyUnit(t.unitType)){t.selected=null!==s?s:!t.selected;var r=t.unitId;if(t.selected)this.checkedCoursesAndUnits.hasOwnProperty(e)?this.checkedCoursesAndUnits[e].includes(r)||this.checkedCoursesAndUnits[e].push(r):this.$set(this.checkedCoursesAndUnits,e,[r]);else if(this.checkedCoursesAndUnits.hasOwnProperty(e)){var o=this.checkedCoursesAndUnits[e].indexOf(r);o>-1&&this.checkedCoursesAndUnits[e].splice(o,1),0===this.checkedCoursesAndUnits[e].length&&this.$delete(this.checkedCoursesAndUnits,e)}}},checkIfCourseHasNoUnitsAndIsSelected:function(e){return!this.checkIfCourseHasUnits(e)&&e.courseTotals.selected},checkIfCourseHasUnits:function(e){return void 0!==e.userProgress},checkIfAllCourseUnitsAreSelected:function(e){var t,s=this,r=!1;return Object.keys(null!==(t=e.userProgress)&&void 0!==t?t:{}).forEach((function(t){r||(r=!s.checkIfAllSectionUnitsAreSelected(e,t))})),void 0!==e.userProgress&&!r},checkIfCourseHasAtLeastOneUnitSelected:function(e){var t,s=this.checkIfAllCourseUnitsAreSelected(e),r=!1;return Object.keys(null!==(t=e.userProgress)&&void 0!==t?t:{}).forEach((function(t){r||Object.keys(e.userProgress[t]).forEach((function(s){r||!0===e.userProgress[t][s].selected&&(r=!0)}))})),!s&&r},checkIfAllSectionUnitsAreSelected:function(e,t){var s=!1;return Object.keys(e.userProgress[t]).forEach((function(r){s||!1===e.userProgress[t][r].selected&&(s=!0)})),!s},checkIfSectionHasAtLeastOneUnitSelected:function(e,t){var s=this.checkIfAllSectionUnitsAreSelected(e,t),r=!1;return Object.keys(e.userProgress[t]).forEach((function(s){r||!0===e.userProgress[t][s].selected&&(r=!0)})),!s&&r},enableDisableUpdateProgressToggle:function(e){var t=this;this.enableProgressButtons=e,this.displayProgressButtons=e,this.enableProgressButtons?(this.updateResetUsersSelection.checkedUsers=[this.user.id],this.updateResetUsersSelection.numUsers=1):(this.updateResetUsersSelection.checkedUsers=[],this.updateResetUsersSelection.numUsers=0,this.emptyCheckedCoursesAndUnits(),this.coursesData.forEach((function(e){t.selectUnselectCourse(e,!1)})))},goToUpgradePage:function(){this.$emit("close"),window.authorController.redirectToBillingAndTrack("Update user progress","Users")},getCourseData:function(e){return this.coursesData.find((function(t){return t.courseId===e}))},getCourseTotalUnits:function(e){var t,s=this,r=0;return Object.keys(null!==(t=e.userProgress)&&void 0!==t?t:{}).forEach((function(t){r+=s.getSectionTotalUnits(e,t)})),r},getSectionTotalUnits:function(e,t){var s=0;return Object.keys(e.userProgress[t]).forEach((function(r){!0===e.userProgress[t][r].selected&&s++})),s}}};const C=(0,f.Z)(g,(function(){var e=this,t=e._self._c;return e.userCourses&&e.userCourses.length>0?t("div",{staticClass:"user-stats-progress"},[(!0===e.displayUpdateProgressToggle&&e.displayProgressButtons||e.updateProgressToggle&&!e.displayProgressButtons)&&e.needsToUpgrade?t("UpgradeBanner",{attrs:{description:"Upgrade your plan to mark courses as complete or reset progress!",rounded:""},on:{upgrade:function(t){return e.redirectToBillingAndTrack("Mass Update Progress sidebar","Users")}}}):e._e(),e._v(" "),e.userHasPermissionOnCourse?t("div",{staticClass:"p-12"},[e.coursesData.length>0?t("ul",[t("li",{staticClass:"head-row"},[t("div",[e._v("Course\n                    "),t("div",{staticClass:"ml-5 inline-block responsive-hide-629"},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.expandCollapseAll(!e.allExpanded)}}},[e._v(e._s(e.allExpanded?"- Collapse all":"+ Expand all"))])])]),e._v(" "),t("div",{staticClass:"flex j-c-c responsive-hide-629"},[e._v("Time spent")]),e._v(" "),t("div",{staticClass:"flex j-c-c"},[e._v("Score")]),e._v(" "),t("div",{staticClass:"flex j-c-c"},[e._v("Compl.")]),e._v(" "),e.enableProgressButtons&&!e.needsToUpgrade?t("div",{staticClass:"flex j-c-c"}):e._e()])]):e._e(),e._v(" "),e._l(e.coursesData,(function(s){return t("ul",{key:s.courseName,staticClass:"panel with-accordion"},[t("li",{class:{expanded:s.expanded}},[t("ul",{staticClass:"full-width"},[t("li",{staticClass:"chapter-title",on:{click:function(t){return e.toggleCourseExpanded(s)}}},[t("div",[t("img",{staticClass:"arrow",attrs:{src:e.imagePath+"/author/images/angle-down_grey.svg"}}),e._v(" "),t("span",[e._v(e._s(s.courseName))]),e._v(" "),s.expired?t("span",{staticClass:"authoring-tag notice"},[e._v("unenrolled/expired")]):e._e()]),e._v(" "),t("div",{staticClass:"opacity-0_8 text-sm flex j-c-c responsive-hide-629 user-role-icon-wrapper with-bubble"},[e._v("\n                            "+e._s(e._f("secondsToHHMM")(s.courseTotals.timeSpent))+"\n                            "),t("span",{staticClass:"specific-editing-lbl to-top"},[e._v(e._s(e._f("secondsToHHMMSS")(s.courseTotals.timeSpent)))])]),e._v(" "),!0===s.courseTotals.completed?t("div",{staticClass:"opacity-0_8 text-sm flex j-c-c"},[e._v(e._s(s.courseTotals.score)+"\n                        ")]):t("div",{staticClass:"opacity-0_8 text-sm flex j-c-c responsive-hide-629"},[e._v("-")]),e._v(" "),s.courseTotals.completed?t("div",{staticClass:"opacity-0_8 text-sm small block ta-center"},[e._v("Yes\n                            "),s.courseTotals.manuallyCompleted?[t("span",{staticClass:"text-xs block opacity-0_6",staticStyle:{"line-height":"100%"}},[e._v("Manually")])]:e._e()],2):t("div",{staticClass:"opacity-0_8 text-sm flex j-c-c"},[e._v("No")]),e._v(" "),s.hasOwnProperty("analyticsUserCourseData")&&e.hasActivityViewPermission&&!e.enableProgressButtons?t("div",{staticClass:"table-more-btn vis-vis v-middle"},[t("div",{staticClass:"table-more-btn-icon"}),e._v(" "),t("div",{staticClass:"table-more-menu export-report fixed-width-medium flex-wrap"},[t("div",{staticClass:"p-5"},[t("div",{staticClass:"form-lbl upper weight-500"},[e._v("Export Report")]),e._v(" "),t("ul",{staticClass:"lst-none"},[t("li",{staticClass:"table-more-menu-item",on:{click:function(t){return t.preventDefault(),e.downloadActivityReport(s,"date")}}},[t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Time Spent (by date)")])]),e._v(" "),t("li",{staticClass:"table-more-menu-item",on:{click:function(t){return t.preventDefault(),e.downloadActivityReport(s,"activity")}}},[t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Time Spent (by activity)")])]),e._v(" "),t("li",{staticClass:"table-more-menu-item",on:{click:function(t){return t.preventDefault(),e.downloadScoreReport(s)}}},[t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Score")])])])])])]):e._e(),e._v(" "),t("div",{staticClass:"btn-on-hover-bg"}),e._v(" "),e.displayProgressButtons&&!e.needsToUpgrade?t("div",{staticClass:"form-lbl flex j-c-c",on:{click:function(t){return t.stopPropagation(),e.selectUnselectCourse(s)}}},[t("input",{staticClass:"lw-accordion2-item-checkbox checkmark-checkbox",class:[e.checkIfCourseHasAtLeastOneUnitSelected(s)&&e.checkIfCourseHasUnits(s)?"indeterminate":""],attrs:{type:"checkbox"},domProps:{checked:e.checkIfCourseHasAtLeastOneUnitSelected(s)||e.checkIfAllCourseUnitsAreSelected(s)||e.checkIfCourseHasNoUnitsAndIsSelected(s)}}),e._v(" "),t("label")]):e._e()])])]),e._v(" "),s.userProgress||!0!==s.expanded?!0===s.expanded?e._l(s.userProgress,(function(r,o){return t("li",{key:o,class:{expanded:e.getChapterTotals(s,o,"expanded")}},[t("ul",{staticClass:"full-width nested"},[t("li",{staticClass:"chapter-title",on:{click:function(t){return e.toggleChapterExpanded(s,o)}}},[t("div",{staticClass:"pl-20"},[t("img",{staticClass:"arrow",attrs:{src:e.imagePath+"/author/images/angle-down_grey.svg"}}),e._v(" "),t("span",[e._v(e._s(e.getChapterName(r)))])]),e._v(" "),t("div",{staticClass:"form-lbl flex j-c-c responsive-hide-629 user-role-icon-wrapper with-bubble"},[e._v("\n                            "+e._s(e._f("secondsToHHMM")(e.getChapterTotals(s,o,"timeSpent")))+"\n                            "),t("span",{staticClass:"specific-editing-lbl to-top"},[e._v(e._s(e._f("secondsToHHMMSS")(e.getChapterTotals(s,o,"timeSpent"))))])]),e._v(" "),t("div",{staticClass:"form-lbl flex j-c-c"},[e._v(e._s(e.getChapterTotals(s,o,"avgScore"))+"\n                        ")]),e._v(" "),t("div",{staticClass:"form-lbl flex j-c-c"},[e._v(e._s(e.getChapterTotals(s,o,"completed"))+"\n                        ")]),e._v(" "),e.displayProgressButtons&&!e.needsToUpgrade?t("div",{staticClass:"form-lbl flex j-c-c",on:{click:function(t){return t.stopPropagation(),e.selectUnselectChapter(s,o)}}},[t("input",{staticClass:"lw-accordion2-item-checkbox checkmark-checkbox",class:[e.checkIfSectionHasAtLeastOneUnitSelected(s,o)?"indeterminate":""],attrs:{type:"checkbox"},domProps:{checked:e.checkIfSectionHasAtLeastOneUnitSelected(s,o)||e.checkIfAllSectionUnitsAreSelected(s,o)}}),e._v(" "),t("label")]):e._e()]),e._v(" "),e._l(r,(function(r,o){return t("li",{key:o,staticClass:"learning-unit-row"},[t("div",[t("UnitImage",{attrs:{"unit-type":e.getUnitIcon(r,s)}}),e._v(" "),t("span",{staticClass:"learning-unit-name bold"},[e._v(e._s(r.unitName))])],1),e._v(" "),t("div",{staticClass:"user-role-icon-wrapper with-bubble"},[e._v("\n                            "+e._s(e._f("secondsToHHMM")(r.timeSpentInUnit))+"\n                            "),t("span",{staticClass:"specific-editing-lbl to-top"},[e._v(e._s(e._f("secondsToHHMMSS")(r.timeSpentInUnit)))])]),e._v(" "),t("div",[e._v(e._s(r.unitScoreRaw?r.unitScoreRaw+"%":r.unitScoreRaw))]),e._v(" "),r.isUnitCompleted?t("div",{staticClass:"form-lbl small block ta-center"},[e._v("\n                            Yes\n                            "),r.isUnitManuallyCompleted?[t("span",{staticClass:"block text-xs opacity-0_6",staticStyle:{"line-height":"100%"}},[e._v("Manually")])]:e._e()],2):r.isUnitCompleted||e.displayProgressButtons?!r.isUnitCompleted&&e.displayProgressButtons?t("div",{staticClass:"form-lbl flex j-c-c small"},[e._v("No\n                        ")]):e._e():t("div",{staticClass:"form-lbl flex j-c-c small"}),e._v(" "),e.displayProgressButtons&&!e.needsToUpgrade?t("div",{staticClass:"with-bubble specific-editing-lbl-wrapper",on:{click:function(t){return t.stopPropagation(),e.selectUnselectUnit(s.courseId,r)}}},[t("input",{staticClass:"lw-accordion2-item-checkbox checkmark-checkbox",class:{disabled:e.isLegacyUnit(r.unitType)},attrs:{type:"checkbox",id:r.unitName},domProps:{checked:!0===r.selected}}),e._v(" "),t("label",{class:{disabled:e.isLegacyUnit(r.unitType)}}),e._v(" "),e.isLegacyUnit(r.unitType)?t("span",{staticClass:"specific-editing-lbl to-left wrap w-200 talign-l"},[e._v("\n                                You need to migrate this legacy learning activity to the new one in order to use the\n                                “Update progress” functionality.\n                            ")]):e._e()]):e._e()])}))],2)])})):e._e():t("li",[e._m(0,!0)])],2)})),e._v(" "),e.needsToUpgrade?e._e():t("div",{staticClass:"pt-10 pos-sticky bottom-12"},[e.updateProgressToggle&&!e.displayProgressButtons?t("div",{staticClass:"flex flex-d-row w-full j-c-c"},[!e.enableProgressButtons&&e.$lwGates.hasUsersUpdateProgressPermission()?t("div",{staticClass:"btn edit-properties-btn with-front-icon edit",on:{click:function(t){return e.enableDisableUpdateProgressToggle(!e.enableProgressButtons)}}},[t("span",{staticClass:"edit-properties-btn-lbl"},[e._v("Update progress")])]):e._e()]):e._e(),e._v(" "),e.displayProgressButtons?t("div",[e.displayUpdateProgressToggle?t("UpdateProgressFooter",{attrs:{totalUnitsSelected:e.totalUnitsSelected,selectedAnyUnit:e.selectedAnyUnit,enableProgressButtons:e.enableProgressButtons,needsToUpgrade:e.needsToUpgrade},on:{resetProgressModal:function(t){return e.displayHideResetProgressModal(!0,"Update Progress user card")},markCompleteModal:function(t){return e.displayHideMarkAsCompleteModal(!0,"Update Progress user card")},closeUpdateProgress:function(t){return e.enableDisableUpdateProgressToggle(!1)}}}):e._e(),e._v(" "),e.displayUpdateProgressToggle?e._e():t("div",{staticClass:"flex flex-wrap gap-4"},[t("button",{staticClass:"lw-btn nowrap",class:{disabled:!e.selectedAnyUnit||!e.enableProgressButtons||e.needsToUpgrade},staticStyle:{padding:"0 10px"},on:{click:function(t){return e.displayHideMarkAsCompleteModal(!0,"Mass Update Progress sidebar")}}},[e._v("\n                        Mark complete\n                    ")]),e._v(" "),t("button",{staticClass:"lw-btn",class:{disabled:!e.selectedAnyUnit||!e.enableProgressButtons||e.needsToUpgrade},staticStyle:{padding:"0 10px"},on:{click:function(t){return e.displayHideResetProgressModal(!0,"Mass Update Progress sidebar")}}},[e._v("\n                        Reset progress\n                    ")]),e._v(" "),t("button",{staticClass:"lw-faded-btn",staticStyle:{padding:"0 10px"},attrs:{type:"button"},on:{click:function(t){return e.$emit("close")}}},[e._v("\n                        Cancel\n                    ")])]),e._v(" "),t("div",{staticClass:"talign-r"},[e.needsToUpgrade&&!e.displayProgressButtons?t("span",{staticClass:"upgrade-btn btn centered",on:{click:function(t){return e.goToUpgradePage()}}},[e._v("Upgrade now!")]):e._e(),e._v(" "),e.needsToUpgrade||e.displayUpdateProgressToggle?e._e():[e.totalUnitsSelected>0?t("span",{staticClass:"lbl-normal"},[e._v(e._s(e.totalUnitsSelected)+" activities")]):e._e()]],2)],1):e._e()]),e._v(" "),e.showMarkAsCompleteModal?t("MarkAsCompleteModal",{attrs:{"total-users":e.updateResetUsersSelection.numUsers,"total-units":e.totalUnitsSelected},on:{close:function(t){return e.displayHideMarkAsCompleteModal(!1)},markAsComplete:function(t){e.displayUpdateProgressToggle?e.userCardMarkAsComplete(t):e.massMarkAsComplete(t)}}}):e._e(),e._v(" "),e.showResetProgressModal?t("ResetProgressModal",{attrs:{"total-users":e.updateResetUsersSelection.numUsers,"total-units":e.totalUnitsSelected},on:{close:function(t){return e.displayHideResetProgressModal(!1)},resetProgress:function(t){e.displayUpdateProgressToggle?e.userCardResetProgress():e.massResetProgress()}}}):e._e()],2):t("div",{staticClass:"js-user-stats-list-nocourses no-content-msg-with-icon"},[t("img",{staticClass:"no-content-msg-icon",attrs:{src:e.imagePath+"/author/images/nav-bar-permissions.png"}}),e._v(" "),t("span",{staticClass:"no-content-msg-txt"},[e._v("You do not have permissions on this course!")])])],1):t("SideformNullPlaceholder",{attrs:{title:"User is not enrolled in any courses"}},[e._v("\n    Once a user is logged into a course, you will find their progress in all courses on this tab.\n")])}),[function(){var e=this._self._c;return e("ul",{staticClass:"full-width nested"},[e("li",{staticClass:"chapter-title"},[this._v("\n                        No contents available for this course\n                    ")])])}],!1,null,null,null).exports},84715:(e,t,s)=>{s.d(t,{Z:()=>h});s(21249),s(57327),s(41539),s(68309),s(69826),s(88674),s(17727),s(69600);var r=s(97920),o=s(14351),n=s(66089),a=s(12233),i=s(34566),l=s(44035),c=s(11180),u=s(16579),d=s(60741);const p={name:"AddToGroup",components:{AuthorSideform:i.Z,UpgradeBanner:a.Z,NoUserGroupInSchoolPlaceholder:n.Z,AuthorSideformSection:o.Z},mixins:[l.Z,c.Z,u.Z],props:{user:{type:Object,required:!0}},data:function(){return{selectedUserGroupId:"",sendingRequest:!1}},computed:{username:function(){return this.user.username},selectedUserGroupMembership:function(){var e=this;return this.userGroupsWithoutMembership.find((function(t){return t.user_group.id===e.selectedUserGroupId}))}},created:function(){this.loadUserGroupMemberships(this.user.id)},methods:{close:function(){this.$root.$emit("closeManageUserSidebar")},addToUserGroup:function(){var e=this;window.broadcastEvent({action:"save"},!0),this.sendingRequest=!0;r.Z.addUserToUserGroup(this.selectedUserGroupId,this.user.id,{overrideCourses:!1}).then((function(t){if(t.data.errors&&t.data.errors.length>0){var s=t.data.errors.map((function(e){return e.message})).join(", ");return showMessage("alert","Error adding user to user group.",s,[{name:"OK"}])}(0,d.il)(),e.$root.$emit("closeManageUserSidebar")})).catch((function(e){displayError()})).finally((function(){e.sendingRequest=!1,window.broadcastEvent({action:"saveFinished"},!0)}))}}};const h=(0,s(51900).Z)(p,(function(){var e=this,t=e._self._c;return t("AuthorSideform",{attrs:{title:"Add to user group"},on:{close:function(t){return e.$root.$emit("closeManageUserSidebar")}},scopedSlots:e._u([e.needsToUpgrade?{key:"upgrade",fn:function(){return[t("UpgradeBanner",{attrs:{description:"Save time with mass actions. Easily perform tasks on multiple users at once by selecting them through the table."},on:{upgrade:e.upgradeHandler}})]},proxy:!0}:null],null,!0)},[e._v(" "),t("AuthorSideformSection",{attrs:{title:"Selected user",description:"The user who will be added to the user group."}},[t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-text-input form-big-text-input disabled"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{id:"selectUser",name:"selectUser",disabled:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})])])]),e._v(" "),t("AuthorSideformSection",{attrs:{title:"Select user group",description:"Select the user group to which you want to add this user."}},[e.userGroupsExistOnSchool?[e.userGroupsWithoutMembership.length>0?t("div",{staticClass:"form-row"},[t("label",{staticClass:"form-select-lbl select-lbl"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedUserGroupId,expression:"selectedUserGroupId"}],staticClass:"form-text-input form-big-text-input",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedUserGroupId=t.target.multiple?s:s[0]}}},[t("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("Select a group")]),e._v(" "),e._l(e.userGroupsWithoutMembership,(function(s){return t("option",{key:s.user_group.id,domProps:{value:s.user_group.id}},[e._v("\n                            "+e._s(s.user_group.name)+"\n                        ")])}))],2)])]):t("span",{staticClass:"error-message no-content-msg"},[e._v("User is member of all user groups.")])]:t("NoUserGroupInSchoolPlaceholder")],2),e._v(" "),e.userGroupsWithoutMembership.length>0?t("AuthorSideformSection",[t("div",{staticClass:"btn-wrapper"},[t("button",{staticClass:"btn btn-l",class:{disabled:""===e.selectedUserGroupId||e.sendingRequest},on:{click:function(t){return t.preventDefault(),e.addToUserGroup.apply(null,arguments)}}},[e._v("\n                Add to group\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-l btn-secondary",on:{click:e.close}},[e._v("\n                Cancel\n            ")])])]):e._e()],1)}),[],!1,null,null,null).exports},14684:(e,t,s)=>{s.d(t,{Z:()=>m});s(21249),s(57327),s(41539),s(68309),s(69826),s(88674),s(17727),s(69600);var r=s(97920),o=s(14351),n=s(66089),a=s(12233),i=s(34566),l=s(94976),c=s(44035),u=s(11180),d=s(16579),p=s(60741);const h={name:"AddToSeat",components:{AuthorCheckboxSetting:l.Z,AuthorSideform:i.Z,UpgradeBanner:a.Z,NoUserGroupInSchoolPlaceholder:n.Z,AuthorSideformSection:o.Z},mixins:[c.Z,u.Z,d.Z],props:{user:{type:Object,required:!0}},data:function(){return{selectedUserGroupId:"",addToSeat:!1,sendingRequest:!1}},computed:{username:function(){return this.user.username},selectedUserGroupMembership:function(){var e=this;return this.userGroupsWithoutMembership.find((function(t){return t.user_group.id===e.selectedUserGroupId}))}},created:function(){this.loadSeatOfferingMemberships(this.user.id)},methods:{close:function(){this.$root.$emit("closeManageUserSidebar")},addToSeatOffering:function(){var e=this;window.broadcastEvent({action:"save"},!0),this.sendingRequest=!0;var t={activate:this.addToSeat};r.Z.addUserToUserGroup(this.selectedUserGroupId,this.user.id,t).then((function(t){if(t.data.errors&&t.data.errors.length>0){var s=t.data.errors.map((function(e){return e.message})).join(", ");return showMessage("alert","Error adding user to seat offering.",s,[{name:"OK"}])}(0,p.il)(),e.$root.$emit("closeManageUserSidebar")})).catch((function(e){displayError()})).finally((function(){e.sendingRequest=!1,window.broadcastEvent({action:"saveFinished"},!0)}))}}};const m=(0,s(51900).Z)(h,(function(){var e=this,t=e._self._c;return t("AuthorSideform",{attrs:{title:"Add to seat offering"},on:{close:function(t){return e.$root.$emit("closeManageUserSidebar")}},scopedSlots:e._u([e.needsToUpgrade?{key:"upgrade",fn:function(){return[t("UpgradeBanner",{attrs:{description:"Save time with mass actions. Easily perform tasks on multiple users at once by selecting them through the table."},on:{upgrade:e.upgradeHandler}})]},proxy:!0}:null],null,!0)},[e._v(" "),t("AuthorSideformSection",{attrs:{title:"Selected user",description:"The user who will be added to the seat offering."}},[t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-text-input form-big-text-input disabled"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{id:"selectUser",name:"selectUser",disabled:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})])])]),e._v(" "),t("AuthorSideformSection",{attrs:{title:"Select seat offering",description:"Select the seat offering to which you want to add this user."}},[e.seatOfferingsExistOnSchool?[e.userGroupsWithoutMembership.length>0?t("div",{staticClass:"form-row"},[t("label",{staticClass:"form-select-lbl select-lbl"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedUserGroupId,expression:"selectedUserGroupId"}],staticClass:"form-text-input form-big-text-input",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedUserGroupId=t.target.multiple?s:s[0]}}},[t("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("Select a seat offering")]),e._v(" "),e._l(e.userGroupsWithoutMembership,(function(s){return t("option",{key:s.user_group.id,domProps:{value:s.user_group.id}},[e._v("\n                            "+e._s(s.user_group.name)+"\n                        ")])}))],2)])]):t("span",{staticClass:"error-message no-content-msg"},[e._v("User is member of all seat offerings.")])]:t("NoUserGroupInSchoolPlaceholder",{attrs:{"is-seat":!0}})],2),e._v(" "),t("AuthorSideformSection",{attrs:{title:"Occupy a seat",description:"Select whether the user will occupy a seat."}},[t("AuthorCheckboxSetting",{attrs:{disabled:0===e.userGroupsWithoutMembership.length,label:"Add user to seat"},model:{value:e.addToSeat,callback:function(t){e.addToSeat=t},expression:"addToSeat"}})],1),e._v(" "),e.userGroupsWithoutMembership.length>0?t("AuthorSideformSection",[t("div",{staticClass:"btn-wrapper"},[t("button",{staticClass:"btn btn-l",class:{disabled:""===e.selectedUserGroupId||e.sendingRequest},on:{click:function(t){return t.preventDefault(),e.addToSeatOffering.apply(null,arguments)}}},[e._v("\n                Add to seat\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-l btn-secondary",on:{click:e.close}},[e._v("\n                Cancel\n            ")])])]):e._e()],1)}),[],!1,null,null,null).exports},16905:(e,t,s)=>{s.d(t,{Z:()=>a});s(79753),s(92222),s(47042);var r=s(7217),o=s(33061);const n={name:"ImpersonateUserModal",components:{AuthoringTip:r.Z,Modal:o.Z},props:{user:{type:Object,default:function(){return{username:""}}},titleBold:{type:Boolean,required:!1},hasCheckbox:{type:Boolean,default:!1},contentCssClasses:{type:String,default:"w-450 h-300"}},data:function(){return{AUTHOR_TIP_TYPE:r.B,confirmationChecked:!1,displayConfirmationError:!1,impersonateBtnDisabled:!1}},computed:{imagePath:function(){var e;return(null===(e=this.$lw)||void 0===e?void 0:e.imagePath)||window.imagePath},title:function(){return"Log in as ".concat(this.user.username)},confirmationText:function(){return"I confirm that ".concat(this.user.username," is aware and consents to this action")}},methods:{close:function(){this.$emit("close")},impersonateUser:function(){!this.hasCheckbox||this.hasCheckbox&&this.confirmationChecked?(this.$emit("impersonate-user"),this.impersonateBtnDisabled=!0):this.displayConfirmationError=!0}}};const a=(0,s(51900).Z)(n,(function(){var e=this,t=e._self._c;return t("modal",{attrs:{title:e.title,"content-classes":e.contentCssClasses,titleBold:e.titleBold},on:{close:e.close}},[t("div",{staticClass:"fg-1 ov-y-auto ov-x-hidden"},[e._t("description"),e._v(" "),t("div",{staticClass:"p-15"},[t("AuthoringTip",{attrs:{type:e.AUTHOR_TIP_TYPE.NOTIFICATION,title:"Logging in as a specific user means that:"}},[e._t("warnings")],2)],1),e._v(" "),t("label",{staticClass:"flex a-i-c mb-5 p-0-15",class:{"cursor-pointer":e.hasCheckbox}},[e.hasCheckbox?[t("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmationChecked,expression:"confirmationChecked"}],staticClass:"lw-checkbox-input",attrs:{type:"checkbox",name:"impersonateUserModal"},domProps:{checked:Array.isArray(e.confirmationChecked)?e._i(e.confirmationChecked,null)>-1:e.confirmationChecked},on:{change:function(t){var s=e.confirmationChecked,r=t.target,o=!!r.checked;if(Array.isArray(s)){var n=e._i(s,null);r.checked?n<0&&(e.confirmationChecked=s.concat([null])):n>-1&&(e.confirmationChecked=s.slice(0,n).concat(s.slice(n+1)))}else e.confirmationChecked=o}}}),e._v(" "),t("span",{staticClass:"lw-checkbox-box small mr-10"})]:e._e(),e._v(" "),e.confirmationText?t("p",{staticClass:"lbl-small italic lbl-dark-gray",class:{normal:e.hasCheckbox}},[e._v(e._s(e.confirmationText)+"\n            ")]):e._e()],2),e._v(" "),e.hasCheckbox&&!e.confirmationChecked&&e.displayConfirmationError?t("div",{staticClass:"p-0-15"},[t("span",{staticClass:"lbl-very-small lbl-red"},[e._v("Please acknowledge that you understand this action.")])]):e._e()],2),e._v(" "),t("div",{staticClass:"lw-bottom-bar btn-wrapper a-i-c j-c-fe fsh-0 flex-wrap"},[t("button",{staticClass:"btn btn-l",attrs:{disabled:e.impersonateBtnDisabled},on:{click:function(t){return t.stopPropagation(),e.impersonateUser.apply(null,arguments)}}},[e._v("Log in as this user")]),e._v(" "),t("button",{staticClass:"btn btn-l btn-secondary",on:{click:e.close}},[e._v("Cancel")])])])}),[],!1,null,"2d6a2880",null).exports},69829:(e,t,s)=>{s.d(t,{Z:()=>f});s(21249),s(57327),s(41539),s(68309);var r=s(15861),o=s(64687),n=s.n(o),a=(s(69826),s(69600),s(97920)),i=s(34566),l=s(12233),c=s(14351),u=s(44035),d=s(11180),p=s(16579),h=s(60741);const m={name:"RemoveFromGroup",components:{AuthorSideformSection:c.Z,UpgradeBanner:l.Z,AuthorSideform:i.Z},mixins:[u.Z,d.Z,p.Z],props:{user:{type:Object,required:!0}},data:function(){return{selectedUserGroupId:""}},computed:{username:function(){return this.user.username},selectedUserGroupMembership:function(){var e=this;return this.userGroupsWithMembership.find((function(t){return t.user_group.id===e.selectedUserGroupId}))}},created:function(){var e=this;this.loadUserGroupMemberships(this.user.id).then((function(){1===e.userGroupsWithMembership.length&&(e.selectedUserGroupId=e.userGroupsWithMembership[0].user_group.id)}))},methods:{close:function(){this.$root.$emit("closeManageUserSidebar")},confirmAction:function(){var e=this;return(0,r.Z)(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.Z.getUserMatchesRules(e.selectedUserGroupId,e.user.id).then((function(t){var s,r;if(null!==(s=null===(r=t.data)||void 0===r?void 0:r.matches)&&void 0!==s&&s){showMessage("alert","User cannot be removed from the user group","The user meets the criteria for adding users to the group. Please update the rules to enable user removal.",[{name:"OK"}])}else{showMessage("alert","Remove member from the user group","Removing the member from the user group means that they will be unenrolled from all the group courses.",[{name:"Remove",func:e.removeFromUserGroup,class:"solid"},{name:"Cancel"}])}}));case 1:case"end":return t.stop()}}),t)})))()},removeFromUserGroup:function(){var e=this;a.Z.removeUserFromUserGroup(this.selectedUserGroupId,this.user.id,{seatRemoval:!0}).then((function(t){if(t.data.errors&&t.data.errors.length>0){var s=t.data.errors.map((function(e){return e.message})).join(", ");return showMessage("alert","User cannot be removed from the user group.",s,[{name:"OK"}])}(0,h.il)(),e.$root.$emit("closeManageUserSidebar")})).catch((function(e){displayError()}))}}};const f=(0,s(51900).Z)(m,(function(){var e=this,t=e._self._c;return t("AuthorSideform",{attrs:{title:"Remove from user group"},on:{close:function(t){return e.$root.$emit("closeManageUserSidebar")}},scopedSlots:e._u([{key:"upgrade",fn:function(){return[t("UpgradeBanner",{attrs:{description:"Save time with mass actions. Easily perform tasks on multiple users at once by selecting them through the table."},on:{upgrade:e.upgradeHandler}})]},proxy:!0}])},[e._v(" "),t("AuthorSideformSection",{attrs:{title:"Selected user",description:"The user who will be removed from the user group."}},[t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-text-input form-big-text-input disabled"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{id:"selectUser",name:"selectUser",disabled:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})])])]),e._v(" "),t("AuthorSideformSection",{attrs:{title:"Select group",subtitle:"Select the user group from which you want to remove this user."}},[e.userGroupsWithMembership.length>0?t("div",{staticClass:"form-row"},[t("label",{staticClass:"form-select-lbl select-lbl"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedUserGroupId,expression:"selectedUserGroupId"}],staticClass:"form-text-input form-big-text-input",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedUserGroupId=t.target.multiple?s:s[0]}}},[1!==e.userGroupsWithMembership.length?t("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("Select a group")]):e._e(),e._v(" "),e._l(e.userGroupsWithMembership,(function(s){return t("option",{key:s.user_group.id,domProps:{value:s.user_group.id}},[e._v("\n                        "+e._s(s.user_group.name)+"\n                    ")])}))],2)])]):t("span",{staticClass:"error-message no-content-msg"},[e._v("User is not a member of any group.")])]),e._v(" "),t("AuthorSideformSection",[t("div",{staticClass:"btn-wrapper"},[t("button",{staticClass:"btn btn-l",class:{disabled:""===e.selectedUserGroupId},on:{click:function(t){return t.preventDefault(),e.confirmAction.apply(null,arguments)}}},[e._v("\n                Remove from group\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-l btn-secondary",on:{click:e.close}},[e._v("\n                Cancel\n            ")])])])],1)}),[],!1,null,null,null).exports},98591:(e,t,s)=>{s.d(t,{Z:()=>p});s(21249),s(57327),s(41539),s(68309),s(69826),s(69600);var r=s(97920),o=s(14351),n=s(34566),a=s(12233),i=s(44035),l=s(11180),c=s(16579),u=s(60741);const d={name:"RemoveFromSeat",components:{UpgradeBanner:a.Z,AuthorSideform:n.Z,AuthorSideformSection:o.Z},mixins:[i.Z,l.Z,c.Z],props:{user:{type:Object,required:!0}},data:function(){return{selectedUserGroupId:"",deactivateSeat:!1}},computed:{username:function(){return this.user.username},selectedUserGroupMembership:function(){var e=this;return this.userGroupsWithMembership.find((function(t){return t.user_group.id===e.selectedUserGroupId}))}},watch:{selectedUserGroupId:function(e){this.deactivateSeat=!1}},created:function(){var e=this;this.loadSeatOfferingMemberships(this.user.id).then((function(){1===e.userGroupsWithMembership.length&&(e.selectedUserGroupId=e.userGroupsWithMembership[0].user_group.id)}))},methods:{close:function(){this.$root.$emit("closeManageUserSidebar")},confirmAction:function(){var e=this;r.Z.getUserMatchesRules(this.selectedUserGroupId,this.user.id).then((function(t){var s,r;if(null!==(s=null===(r=t.data)||void 0===r?void 0:r.matches)&&void 0!==s&&s){showMessage("alert","User cannot be removed from the seat offering","The user meets the criteria for adding users to the seat offering. Please update the rules to enable user removal.",[{name:"OK"}])}else{showMessage("alert","Remove member from the seat offering","Removing the member from the seat offering means that they will be unenrolled from all the seat courses.",[{name:"Remove",func:e.removeFromSeatOffering,class:"solid"},{name:"Cancel"}])}}))},removeFromSeatOffering:function(){var e=this,t={seatRemoval:!this.deactivateSeat};r.Z.removeUserFromUserGroup(this.selectedUserGroupId,this.user.id,t).then((function(t){if(t.data.errors&&t.data.errors.length>0){var s=t.data.errors.map((function(e){return e.message})).join(", ");return showMessage("alert","User cannot be removed from the user group.",s,[{name:"OK"}])}(0,u.il)(),e.$root.$emit("closeManageUserSidebar")})).catch((function(e){displayError()}))}}};const p=(0,s(51900).Z)(d,(function(){var e,t,s=this,r=s._self._c;return r("AuthorSideform",{attrs:{title:"Remove from seat offering"},on:{close:s.close},scopedSlots:s._u([s.needsToUpgrade?{key:"upgrade",fn:function(){return[r("UpgradeBanner",{attrs:{description:"Save time with mass actions. Easily perform tasks on multiple users at once by selecting them through the table."},on:{upgrade:s.upgradeHandler}})]},proxy:!0}:null],null,!0)},[s._v(" "),r("AuthorSideformSection",{attrs:{title:"Selected user",description:"The user who will be removed from the seat offering."}},[r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-text-input form-big-text-input disabled"},[r("input",{directives:[{name:"model",rawName:"v-model",value:s.username,expression:"username"}],attrs:{id:"selectUser",name:"selectUser",disabled:""},domProps:{value:s.username},on:{input:function(e){e.target.composing||(s.username=e.target.value)}}})])])]),s._v(" "),r("AuthorSideformSection",{attrs:{title:"Select seat",description:"Select the seat offering from which you want to remove this user."}},[s.userGroupsWithMembership.length>0?r("div",{staticClass:"form-row"},[r("label",{staticClass:"form-select-lbl select-lbl"},[r("select",{directives:[{name:"model",rawName:"v-model",value:s.selectedUserGroupId,expression:"selectedUserGroupId"}],staticClass:"form-text-input form-big-text-input",on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));s.selectedUserGroupId=e.target.multiple?t:t[0]}}},[1!==s.userGroupsWithMembership.length?r("option",{attrs:{value:"",disabled:"",selected:""}},[s._v("Select a seat")]):s._e(),s._v(" "),s._l(s.userGroupsWithMembership,(function(e){return r("option",{key:e.user_group.id,domProps:{value:e.user_group.id}},[s._v("\n                        "+s._s(e.user_group.name)+"\n                    ")])}))],2)])]):r("span",{staticClass:"error-message no-content-msg"},[s._v("User is not a member of any seat offering.")])]),s._v(" "),r("AuthorSideformSection",{attrs:{title:"Remove from",description:"Select whether to completely remove the user from the seat offering or only from the currently occupied seat."}},[r("div",{staticClass:"form-row access-row"},[r("div",{staticClass:"v-middle"},[r("input",{directives:[{name:"model",rawName:"v-model",value:s.deactivateSeat,expression:"deactivateSeat"}],staticClass:"radio-button",attrs:{type:"radio",id:"remove-from-group"},domProps:{value:!1,checked:s._q(s.deactivateSeat,!1)},on:{change:function(e){s.deactivateSeat=!1}}}),s._v(" "),r("label",{staticClass:"v-middle",attrs:{for:"remove-from-group"}})]),s._v(" "),r("div",{staticClass:"settings-lbl v-middle"},[s._v("Seat offering")]),s._v(" "),r("div",{staticClass:"radio-button-cont"},[r("p",{staticClass:"settings-descr"},[s._v("\n                    The user will no longer be a member of the seat offering.\n                ")])])]),s._v(" "),r("div",{staticClass:"form-row access-row",class:{disabled:!(null!==(e=s.selectedUserGroupMembership)&&void 0!==e&&e.is_active)}},[r("div",{staticClass:"v-middle"},[r("input",{directives:[{name:"model",rawName:"v-model",value:s.deactivateSeat,expression:"deactivateSeat"}],staticClass:"radio-button",class:{disabled:!(null!==(t=s.selectedUserGroupMembership)&&void 0!==t&&t.is_active)},attrs:{type:"radio",id:"deactivate-seat"},domProps:{value:!0,checked:s._q(s.deactivateSeat,!0)},on:{change:function(e){s.deactivateSeat=!0}}}),s._v(" "),r("label",{staticClass:"v-middle",attrs:{for:"deactivate-seat"}})]),s._v(" "),r("div",{staticClass:"settings-lbl v-middle"},[s._v("Seat")]),s._v(" "),r("div",{staticClass:"radio-button-cont"},[r("div",{staticClass:"form-row"},[r("p",{staticClass:"settings-descr"},[s._v("\n                        The user will be removed from the occupied seat but will continue to be a member of the seat offering.\n                    ")])])])])]),s._v(" "),r("AuthorSideformSection",[r("div",{staticClass:"btn-wrapper"},[r("button",{staticClass:"btn btn-l",class:{disabled:""===s.selectedUserGroupId},on:{click:function(e){return e.preventDefault(),s.confirmAction.apply(null,arguments)}}},[s._v("\n                Remove from seat\n            ")]),s._v(" "),r("button",{staticClass:"btn btn-l btn-secondary",on:{click:s.close}},[s._v("\n                Cancel\n            ")])])])],1)}),[],!1,null,null,null).exports},76549:(e,t,s)=>{s.d(t,{Z:()=>a});s(41539),s(88674),s(17727),s(69600),s(21249),s(92222);var r=s(92741),o=s(60741);const n={name:"UpdateUserRole",props:{user:{default:null,type:Object}},methods:{updateUserRole:function(e,t){var s=this;r.Z.post(server+"author/user/"+e+"/role-"+t).then((function(e){if(e.data.errors&&e.data.errors.length>0)return showMessage("alert","Error updating user role",e.data.errors.map((function(e){return e.message})).join(", "),[{name:"OK"}]);(0,o.il)()})).catch((function(e){showMessage("alert","Error updating user role",e.message,[{name:"OK"}])})).finally((function(){s.$root.$emit("closeManageUserSidebar")}))}},created:function(){var e="user"===this.user.role?"admin":"user",t="";this.user.isInstructorIn&&null!==this.user.isInstructorIn&&this.user.isInstructorIn.length>=0&&(e="admin",t="With this action, the user will lose all linked courses and courses commission."),showMessage("alert","User Role","".concat(t," Do you really want to change role to  ").concat(e,"?"),[{name:"Change",func:this.updateUserRole,args:[this.user.id,e]},{name:"Cancel",func:o.Fz,args:[this]}])}};const a=(0,s(51900).Z)(n,(function(){return(0,this._self._c)("div",{staticStyle:{display:"block"}})}),[],!1,null,null,null).exports},4532:(e,t,s)=>{s.d(t,{Z:()=>n});var r=s(93949);const o={name:"UnitImage",props:{unitType:{type:String,required:!0}},computed:{imageUrl:function(){return(0,r.Gi)(this.unitType)}}};const n=(0,s(51900).Z)(o,(function(){var e=this;return(0,e._self._c)("img",{attrs:{src:e.imageUrl,alt:"image for "+e.unitType}})}),[],!1,null,"0a4cb7c5",null).exports}}]);