"use strict";(self.webpackChunkcodeneuron_templates=self.webpackChunkcodeneuron_templates||[]).push([[24924],{11180:(e,t,s)=>{s.d(t,{Z:()=>n});s(66992),s(41539),s(78783),s(33948),s(41637),s(74916),s(64765),s(89554),s(54747),s(92222),s(96647),s(83710),s(39714),s(69826),s(83112),s(69600),s(21249),s(47042);var r=s(92741),a=s(67541),i=s(84564);const n={methods:{redirectTo:function(e){return window.authorController.redirectTo(e)},redirectToBillingAndTrack:function(e,t){return window.authorController.redirectToBillingAndTrack(e,t)},deleteQueryParamsAndAddQueryParamsToUrl:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=new URLSearchParams(window.top.location.search);e.forEach((function(e){return r.delete(e)}));var a={};t.forEach((function(e){r.set(e.key,e.value),a[e.key]=e.value}));var i="".concat(window.top.location.pathname,"?").concat(r.toString());this.redirectTo(i),window.top.document.title=s},getUrlParam:function(e){var t=new URLSearchParams(window.top.location.search),s="";return t.has(e)&&(s=t.get(e)),s},hasPermission:function(e){return void 0!==window.LWClient[e]&&window.LWClient[e]},sortingSymbolForField:function(e,t){return e.hasOwnProperty("field")&&e.field===t?e.hasOwnProperty("direction")?"asc"===e.direction?"▲":"▼":"▲":""},decideAdminIcon:function(e){if(e===a.I.lwAdmin)return"".concat(this.imagePath,"/author/images/learnworlds-icon.png");var t=this.authorController.getUserRoles().find((function(t){return t.key===e}));return t.customRole||t.predefinedRole,"".concat(this.imagePath,"/author/images/icons/small/user-hexagon.svg")},secondsToHHMM:function(e){if(isNaN(e)||!e)return"";var t=Math.floor(e/86400);e%=86400;var s=Math.floor(e/3600),r=(e%=3600)>60?Math.floor(e/60):1;return r=String(r).padStart(2,"0"),s=String(s).padStart(2,"0"),"".concat((t>0?"".concat(t,"d "):"")+s,":").concat(r,"h")},formatDateTime:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";if(e)return LWTranslate.formatTimestampLocalized(e,t)},getUserDetails:function(e){return r.Z.get("".concat(this.serverUrl,"author/user/").concat(e)).then((function(e){return e.data.errors&&e.data.errors.length>0?showMessage("alert","Error fetching user details",e.data.errors.map((function(e){return e.message})).join(", "),[{name:"OK"}]):e.data.user})).catch((function(e){displayError(e)}))}},computed:{authorController:function(){return window.authorController},imagePath:function(){return window.imagePath},assetsPath:function(){return window.assetsPath},apiUrl:function(){return window.api},serverUrl:function(){return window.server},oAuthInfo:function(){return window.oauthInfo},exportLimits:function(){return window.offlineExportLimits},learnWorldsPackage:function(){return window.LWPackage},hasAccessToBulkActions:function(){return this.hasPermission(i._.BULK_ACTIONS)},isLoggedUserAdmin:function(){return this.$lwGates.isParentRoleLwAdmin()||this.$lwGates.isParentRoleAdmin()},serverImage:function(){return window.serverImg.slice(0,-1)},billing:function(){return window.BILLING},systemUserRoles:function(){return a.I},hasPermissionToViewCourses:function(){return this.$lwGates.hasCourseViewPermission()||this.$lwGates.hasCourseSettingsPermission()||this.$lwGates.hasCourseContentPermission()||this.$lwGates.hasCoursePageManagePermission()||this.$lwGates.hasCourseSettingsAdvancedPermission()||this.$lwGates.hasCoursePublishPermission()},adminsCommission:function(){return window.admins_commission},userGroupsExistOnSchool:function(){var e,t;return(null!==(e=null===(t=window.top)||void 0===t?void 0:t.adminDataStore.userGroupsOnlyGroups)&&void 0!==e?e:[]).length>0},seatOfferingsExistOnSchool:function(){var e,t;return(null!==(e=null===(t=window.top)||void 0===t?void 0:t.adminDataStore.userGroupsOnlySeats)&&void 0!==e?e:[]).length>0}},filters:{formatDate:function(e){if(e)return LWTranslate.formatTimestampLocalized(e,window.dateFormat.short)},formatTime:function(e){if(e)return LWTranslate.formatTimestampLocalized(e,"HH:mm:ss")},formatDateHour:function(e){if(e)return LWTranslate.formatTimestampLocalized(e,window.dateFormat.shortWithTime)},secondsToHHMM:function(e){if(isNaN(e)||!e)return"";var t=Math.floor(e/86400);e%=86400;var s=Math.floor(e/3600),r=(e%=3600)>=60?Math.floor(e/60):1;return r=String(r).padStart(2,"0"),s=String(s).padStart(2,"0"),"".concat((t>0?"".concat(t,"d "):"")+s,":").concat(r,"h")},secondsToHHMMSS:function(e){if(isNaN(e)||!e)return"";var t=Math.floor(e/86400);e%=86400;var s=Math.floor(e/3600),r=(e%=3600)>=60?Math.floor(e/60):0,a=e%=60;return r=String(r).padStart(2,"0"),s=String(s).padStart(2,"0"),a=String(a).padStart(2,"0"),"".concat((t>0?"".concat(t,"d "):"")+s,":").concat(r,":").concat(a,"s")}}}},64768:(e,t,s)=>{s.d(t,{h:()=>g});var r=s(15861),a=s(64687),i=s.n(a),n=(s(74916),s(77601),s(70538)),o=s(96486),l=s(88276),c=s(29225),u=(0,n.reactive)({has_unmask_enabled:!1,has_confirm_enabled:!1,minimum_characters:6,maximum_characters:50,check_uppercase:!1,check_lowercase:!1,check_digit:!1,check_special_chars:!1}),d=(0,n.ref)(""),m=(0,n.ref)(""),h=(0,n.ref)(""),p=(0,n.ref)(!0);function g(){var e=function(e){var t,s,r,a,i,n,o,l;u.has_unmask_enabled=null!==(t=e.has_unmask_enabled)&&void 0!==t&&t,u.has_confirm_enabled=null!==(s=e.has_confirm_enabled)&&void 0!==s&&s,u.minimum_characters=null!==(r=e.minimum_characters)&&void 0!==r?r:6,u.maximum_characters=null!==(a=e.maximum_characters)&&void 0!==a?a:50,u.check_uppercase=null!==(i=e.check_uppercase)&&void 0!==i&&i,u.check_lowercase=null!==(n=e.check_lowercase)&&void 0!==n&&n,u.check_digit=null!==(o=e.check_digit)&&void 0!==o&&o,u.check_special_chars=null!==(l=e.check_special_chars)&&void 0!==l&&l},t=(0,n.computed)((function(){return!!u.check_uppercase||(!!u.check_lowercase||(!!u.check_digit||!!u.check_special_chars))})),s=function(e){return e.length>=u.minimum_characters&&e.length<=u.maximum_characters},a=function(e){return e!==e.toUpperCase()},g=function(e){return e!==e.toLowerCase()},f=function(e){return/[0-9]/.test(e)},v=function(e){return/[-._!"`'#%&,:;<>=@{}~$()*+/\\?[\]^|]/g.test(e)},w=(0,n.computed)((function(){var t=(0,o.get)(window,"SITE_PASSWORD_SETTINGS");if(t)return e(t),t;console.warn("Password settings were not loaded")})),_=function(){var e=(0,r.Z)(i().mark((function e(){var t,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.B)(l.Z.getSettings("site"));case 2:if((t=e.sent).data){e.next=5;break}return e.abrupt("return",t);case 5:return s=(0,o.get)(t.data,"settings.site_password_settings"),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var t=(0,r.Z)(i().mark((function t(){var s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=w.value){t.next=5;break}return t.next=4,_();case 4:s=t.sent;case 5:return e(s),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{settings:u,setPassword:function(e){d.value=null!=e?e:""},password:d,passwordConfirm:h,isMasked:p,isAdvancedRulesEnabled:t,setPasswordMeterSettings:e,getPasswordWindowSettings:w,getPasswordSettings:C,setCurrentPassword:function(e){m().value=null!=e?e:""},currentPassword:m,isLengthInRange:(0,n.computed)((function(){return s(d.value)})),hasMinimumCharacters:(0,n.computed)((function(){return!(d.value.length<u.minimum_characters)})),hasMaximumCharacters:(0,n.computed)((function(){return!(d.value.length>u.maximum_characters)})),hasLowerCase:(0,n.computed)((function(){return a(d.value)})),hasUpperCase:(0,n.computed)((function(){return g(d.value)})),hasDigit:(0,n.computed)((function(){return f(d.value)})),hasSpecialCharacter:(0,n.computed)((function(){return v(d.value)})),isValidPassword:(0,n.computed)((function(){return!(""===(e=d.value)||!s(e)||u.check_lowercase&&!a(e)||u.check_uppercase&&!g(e)||u.check_digit&&!f(e)||u.check_special_chars&&!v(e));var e}))}}},92123:(e,t,s)=>{s.d(t,{O:()=>l});var r,a=s(29439),i=s(4942),n=(s(69720),s(66992),s(41539),s(78783),s(33948),s(41637),s(96647),s(83710),s(39714),s(82995)),o=(r={},(0,i.Z)(r,n.tf,"user_groups"),(0,i.Z)(r,n.ab,"multiple_seats"),r),l=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="/author/".concat(o[e]),r=Object.entries(t),i=new URLSearchParams,n=0,l=r;n<l.length;n++){var c=(0,a.Z)(l[n],2),u=c[0],d=c[1];i.append(u,d)}var m=r.length>0?"?".concat(i.toString()):"";return s+m}},96952:(e,t,s)=>{s.d(t,{Z:()=>a});s(57327),s(41539),s(89554),s(54747),s(68309),s(2707),s(57658),s(69826),s(91058);var r=s(67541);const a={methods:{isRoleAdmin:function(e){return this.getRoleLevel(e)===this.$lwGates.state.allUserRoles.admin},isRoleInstructor:function(e){return this.getRoleLevel(e)===this.$lwGates.state.allUserRoles.instructor},isRoleSegment:function(e){return this.getRoleLevel(e)===this.$lwGates.state.allUserRoles.segment},isRoleSeatManager:function(e){return this.getRoleLevel(e)===this.$lwGates.state.allUserRoles.seatManager},isRoleUser:function(e){return this.getRoleLevel(e)===this.$lwGates.state.allUserRoles.user},getRoleLevel:function(e){return e.parentId},getAdministrativeSectionLabel:function(){return"Administrative"},getAdministrativeImage:function(){return"/author/images/icons/small/user-hexagon.svg"},getAdministrativeDescription:function(){return"The administrative level roles grant full access to all or some areas of the platform."},getAdministrativeRoles:function(e){var t=this,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e=e.filter((function(e){return t.isRoleAdmin(e)})),s&&e.forEach((function(e){e.parentId===r.I.admin&&e.name===r.I.admin&&e.permissions.forEach((function(s,r){s.key===t.$lwGates.state.allPermissions.dashboard&&(e.permissions[r].value=!1)}))})),e},getInstructionalSectionLabel:function(){return"Instructional"},getInstructionalImage:function(){return"/author/images/icons/small/graduation.svg"},getInstructionalDescription:function(){return"The instructional level roles, grant access to specific areas of the platform, but limit the displayed data only to those related to the selected courses."},getInstructionalRoles:function(e){var t=this;return e.filter((function(e){return t.isRoleInstructor(e)}))},getReportingSectionLabel:function(){return"Reporting"},getReportingImage:function(){return"/author/images/icons/small/report-analytics.svg"},getReportingDescription:function(){return"The reporting level roles, grant access to specific areas of the platform, but limit the displayed data only to those related to the selected segments and courses."},getReportingRoles:function(e){var t=this,s=e.filter((function(e){return t.isRoleSegment(e)}));return"trial"===window.LWPackage&&s.forEach((function(e){return e.disabledRole=!0})),s},getSeatManagerSectionLabel:function(){return"Management"},getSeatManagerImage:function(){return"/author/images/icons/small/users-group.svg"},getSeatManagerDescription:function(){return"The management level roles, grant access to specific areas of the platform but limit the displayed data only to those related to the selected user groups, seat offerings or spaces."},getSeatManagerRoles:function(e){var t=this,s=e.filter((function(e){return t.isRoleSeatManager(e)}));return"trial"===window.LWPackage&&s.forEach((function(e){return e.disabledRole=!0})),s},getUserSectionLabel:function(){return"User"},getUserImage:function(){return""},getUserDescription:function(){return"The user level role."},getUserRoles:function(e){var t=this;return e.filter((function(e){return t.isRoleUser(e)}))},rolesSortFunc:function(e,t){return e.name>t.name?1:-1},getFilteredUserRolesWithSections:function(e,t){var s=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=this.authorController.getUserRoles(),i=[{label:this.getUserSectionLabel(),image:this.imagePath+this.getUserImage(),description:this.getUserDescription(),roles:a.filter((function(e){return e.parentRole===s.$lwGates.state.allUserRoles.user})).sort(this.rolesSortFunc)}],n=[{label:this.getAdministrativeSectionLabel(),image:this.imagePath+this.getAdministrativeImage(),description:this.getAdministrativeDescription(),roles:a.filter((function(e){return e.parentRole===s.$lwGates.state.allUserRoles.admin})).sort(this.rolesSortFunc)},{label:this.getInstructionalSectionLabel(),image:this.imagePath+this.getInstructionalImage(),description:this.getInstructionalDescription(),roles:a.filter((function(e){return e.parentRole===s.$lwGates.state.allUserRoles.instructor})).sort(this.rolesSortFunc)},{label:this.getSeatManagerSectionLabel(),image:this.imagePath+this.getSeatManagerImage(),description:this.getSeatManagerDescription(),roles:a.filter((function(e){return e.parentRole===s.$lwGates.state.allUserRoles.seatManager})).sort(this.rolesSortFunc)},{label:this.getReportingSectionLabel(),image:this.imagePath+this.getReportingImage(),description:this.getReportingDescription(),roles:a.filter((function(e){return e.parentRole===s.$lwGates.state.allUserRoles.segment})).sort(this.rolesSortFunc)}];r&&i.push.apply(i,n);var o=null;o="user"!==e&&t?i.filter((function(t){switch(e){case"admin":return t.label===s.getAdministrativeSectionLabel();case"instructor":return t.label===s.getInstructionalSectionLabel();case"segment":return t.label===s.getReportingSectionLabel();case"seatManager":return t.label===s.getSeatManagerSectionLabel();default:return[]}})):i,this.hasPermission("user_roles_custom_roles_create_edit")||o.forEach((function(e){e.label!==s.getUserSectionLabel()&&(e.roles=e.roles.filter((function(e){return!1===e.customRole})))}));var l=!1;return o.forEach((function(e){l||(l=void 0!==e.roles.find((function(e){return!0===e.isSelectableByPackage})))})),{userRoles:o,hasAnyRoleSelectable:l}},userRoleIsInvalid:function(e){var t={roleRequired:!1,instructorError:!1,segmentSegment:!1,invalidPercentage:!1};if(""===e.activeRole.key&&(t.roleRequired=!0),e.activeRole.parentRole===r.I.instructor)try{this.roleData.isInstructorIn.forEach((function(e){(parseInt(e.percentage,10)<0||parseInt(e.percentage,10)>100)&&(t.invalidPercentage=!0)}))}catch(e){t.instructorError=!0}return e.activeRole.parentRole!==r.I.segment||this.roleData.segmentSettings.segmentId||(t.segmentSegment=!0),t}}}},62111:(e,t,s)=>{s.d(t,{Z:()=>r});const r={importEnrollUsers:{key:"importEnrollUsers",title:"Import and enroll users"},importUsers:{key:"importUsers",title:"Import users"},importTags:{key:"importTags",title:"Tag users"},massEnroll:{key:"massEnroll",title:"Enroll users"},massUnEnroll:{key:"massUnEnroll",title:"Unenroll users"},massDelete:{key:"massDelete",title:"Delete users"},massSuspend:{key:"massSuspend",title:"Suspend users"},importEnrollSeatsUsers:{key:"importEnrollSeatsUsers",title:"Add & Enroll users"},importSeatsUsers:{key:"importSeatsUsers",title:"Add users"}}},44035:(e,t,s)=>{s.d(t,{Z:()=>i});var r=s(93433),a=(s(92222),s(79753),s(69600),s(21249),s(47042),s(89554),s(41539),s(54747),s(26833),s(57658),s(2707),s(62111));const i={methods:{redirectToUserProfile:function(e){window.authorController.redirectTo("/profile?id=".concat(e))},redirectToUserInbox:function(e,t){window.authorController.redirectTo("/inbox?userid=".concat(e,"&username=").concat(t))},getRemainCoursesList:function(e){return Array.isArray(e)?e.length<=this.coursesToShow?"":e.slice(this.coursesToShow).map((function(e){return e.title})).join(", "):""}},computed:{coursesToShow:function(){return 5},tagsToShow:function(){return 3},courses:function(){var e=window.authorController.getCourses(),t=[],s=window.authorController.getCourseContents();return Object.values(s).forEach((function(s){var r,a,i;return t.push({id:s.id,title:s.title,titleId:s.titleId,price:s.price,status:s.status,image:null!==(r=null===(a=e[s.id])||void 0===a||null===(i=a.courseImage)||void 0===i?void 0:i.uncompressedUrl)&&void 0!==r?r:"/",type:"course"})})),t.sort((function(e,t){return e.title.localeCompare(t.title)}))},products:function(){var e=this.courses;if(!this.$lwGates.isParentRoleAdmin()&&!this.$lwGates.isParentRoleLwAdmin())return e;var t=[];Object.values(window.authorController.getBundles()).forEach((function(e){t.push({id:e.id,title:e.title,titleId:e.titleId,price:e.price,type:"bundle"})})),t=t.sort((function(e,t){return e.title.localeCompare(t.title)}));var s=[];return Object.values(window.authorController.getSubscriptions()).forEach((function(e){s.push({id:e.id,title:e.title,titleId:e.titleId,price:e.price,type:"subscription"})})),s=s.sort((function(e,t){return e.title.localeCompare(t.title)})),[].concat((0,r.Z)(e),(0,r.Z)(t),(0,r.Z)(s))},coursesAllowed:function(){var e=[],t=window.authorController.getAllowedCourses(),s=window.authorController.getCourses();return Object.values(t).forEach((function(t){var r,a,i,n;"private"!==t.access&&e.push({id:t.id,title:t.title,titleId:t.titleId,price:null!==(r=t.discountPrice)&&void 0!==r?r:t.price,status:t.status,image:null!==(a=null===(i=s[t.id])||void 0===i||null===(n=i.courseImage)||void 0===n?void 0:n.uncompressedUrl)&&void 0!==a?a:"/"})})),e.sort((function(e,t){return e.title.localeCompare(t.title)}))},isInstructor:function(){return this.$lwGates.isParentRoleInstructor()},isAuthor:function(){return this.$lwGates.isParentRoleAdmin()},isLwAuthor:function(){return this.$lwGates.isParentRoleLwAdmin()},isSeatManager:function(){return this.$lwGates.isParentRoleSeatManager()},signupFields:function(){return void 0!==window.USER_SIGNUP_FIELDS&&window.USER_SIGNUP_FIELDS.length>0?window.USER_SIGNUP_FIELDS:null},userCustomFields:function(){return void 0!==window.USER_CUSTOM_FIELDS&&window.USER_CUSTOM_FIELDS.length>0?window.USER_CUSTOM_FIELDS:null},learnWorldsPackage:function(){return window.LWPackage},serverImage:function(){return window.serverImg.slice(0,-1)},billing:function(){return window.BILLING},subscriptionMode:function(){return window.subscriptionMode},dpSettings:function(){return window.DP_SETTINGS},bulkActionTypes:function(){return a.Z}}}},35309:(e,t,s)=>{s.d(t,{X:()=>v});var r=s(15861),a=(s(74916),s(15306),s(92222),s(32564),s(64687)),i=s.n(a),n=s(68485),o=s(70538),l=s(1354),c=s(29225),u=s(9669),d=s.n(u),m=s(93500),h=(s(66992),s(41539),s(78783),s(33948),s(60285),s(41637),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new URL(window.location.href).searchParams.get(e)}),p=s(64041),g=(0,o.reactive)({}),f=(0,o.ref)("");function v(){var e=g,t=f,s=(0,o.computed)((function(){return!!window.me})),a=(0,l.b)("email_verification").t,u=function(t){e.value=t},v=function(e){t.value=e},w=(0,o.ref)(""),_=function(e){w.value=e},C=(0,o.ref)(""),b=function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.B)(d().get("".concat(window.clientURL,"/email-verification/resend"))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=(0,o.computed)((function(){return a("error_cooldown").replace("{X}",C.value)})),S=function(e){return a("sent_to").replace("{{user.email_to_verify}}",e)},P=function(e){var s;e=null!==(s=e)&&void 0!==s?s:t.value,(0,p.c)(n.zG.SUCCESS,a("verify_your_email"),"".concat(S(e)," ").concat(a("account_activation")),[{name:"OK"}])},T=function(){(0,p.c)(n.zG.ERROR,a("verify_your_email"),"".concat(S(t.value)," ").concat(a("account_activation")),[{name:a("resend"),func:function(){return k()}}],[],{timeout:!1},!0)},U=function(){return!!h("site_template_id")},k=function(){var t=(0,r.Z)(i().mark((function t(){var s,r,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!U()){t.next=3;break}return P("{{user.email_to_verify}}"),t.abrupt("return");case 3:return t.next=5,b();case 5:if(s=t.sent,(r=s.data.challenge)||!s.isErrorCodeExists("email_verification_error_cooldown")){t.next=12;break}return o=s.data.data,C.value=o.cooldown_in_minutes,(0,p.c)(n.zG.WARNING,"",y.value,[],[],{},!0),"pending_verification"===e.value.status&&"change-user-email"===e.value.challenge.purpose&&T(),t.abrupt("return");case 12:if(r){t.next=15;break}return(0,p.c)(n.zG.ERROR,a("verify_your_email"),a("oops_problem"),[{name:"OK"}]),t.abrupt("return");case 15:P();case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(){var e;h("show_email_verification_expired")&&function(){if(!t.value)return(0,p.c)(n.zG.ERROR,"",a("error_expired"),[],[],{timeout:!1},!0);(0,p.c)(n.zG.ERROR,a("error_expired"),a("expired_resend"),[{name:"Resend email",func:function(){return k()}}],[],{timeout:!1},!0)}(),h("show_email_verification_pending")&&T(),h("show_email_verification_success")&&(e=s.value?[{name:"OK"}]:[{name:a("login_login_btn","common"),func:function(){return window.location.replace("/?msg=not-logged-in")}}],(0,p.c)(n.zG.INFORM,a("is_verified"),a("thank_you_for_verifying"),e,[],{timeout:!1},!0))},I=function(e){var t=(0,(0,m.Z)().getSetting)("site_email_verification_settings","site");return e?t[e]:t},R=function(){return"disabled"!==I("mode")},E=function(){return"skipped_verification"===e.value.status},A=function(){var e=(0,r.Z)(i().mark((function e(){var t,s,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.B)(d().post("".concat(window.server,"/email-verification/ticker")));case 2:if(t=e.sent,s=t.data,r=s.status,a=s.interval_in_milliseconds){e.next=6;break}return e.abrupt("return");case 6:if("verified"!==r){e.next=9;break}return window.location.reload(),e.abrupt("return");case 9:setTimeout((function(){A()}),a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{t:a,email:t,ticker:A,setEmail:v,isEnabled:R,handleResend:k,setContactEmail:_,isTemplatePreviewPage:U,initEmailVerification:function(){var t,r,a;if(s.value){var i=window.EMAIL_VERIFICATION_STATE;if((i||null!==(t=window.me.email_config)&&void 0!==t&&t.verification)&&(u(null!=i?i:null===(r=window.me.email_config)||void 0===r?void 0:r.verification),null!==(a=e.value.challenge)&&void 0!==a&&a.email_value)){var n=e.value.challenge.email_value;v(n);var o,l,c=window.SCHOOL_CONTACT_EMAIL;_(c),x(),o=e.value.status,l=e.value.challenge.purpose,"pending_verification"===o&&"change-user-email"===l&&T()}}else x()},translationCooldownTime:y,showResendSuccessNotification:P,setEmailVerificationStateForUser:function(t){var s=t.email_config.verification;if(u(s),!E()){var r=e.value.challenge.email_value;v(r)}},getEmailVerificationSettingsFromStore:I,isUserNewEmailAddressPendingVerification:function(){if(!R())return!1;if(E())return!1;var t=e.value,s=t.status,r=t.challenge.action;return"pending_verification"===s&&"update-user-email"===r},newEmailAddressPendingVerificationHintText:function(){return"A new email address: ".concat(t.value," has been requested for this user and it is pending verification. ")}}}},88276:(e,t,s)=>{s.d(t,{Z:()=>r});const r={repository:s(46536).ZP,getSettings:function(e){return this.repository.get("settings/".concat(e))},setSettings:function(e,t){return this.repository.post("settings/".concat(e),t)},getColorscheme:function(){return this.repository.get("/settings/colorscheme")},disableFeatureOnboarding:function(e){return this.repository.post("/settings/feature-onboarding/".concat(e,"/disable"))},enableFeatureOnboarding:function(e){return this.repository.post("/settings/feature-onboarding/".concat(e,"/enable"))}}},56249:(e,t,s)=>{s.d(t,{Z:()=>h});s(47941),s(82526),s(57327),s(41539),s(38880),s(57658),s(89554),s(54747),s(49337),s(33321),s(69070);var r=s(4942),a=(s(92222),s(93949)),i=s(46536);function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){(0,r.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var l={fetchCollections:function(){return i.ZP.get("/author/community/collections")},createCollection:function(e){return i.ZP.post("/author/community/collections",e)},updateCollection:function(e,t){return i.ZP.put("/author/community/collections/".concat(e),t)},deleteCollection:function(e){return i.ZP.delete("/author/community/collections/".concat(e))},fetchAuthoringAggregatedCollections:function(){return i.ZP.get("/author/community/collectionManagement")},saveCollectionsManagement:function(e){return i.ZP.put("/author/community/collectionManagement",e)},fetchAuthoringCollectionsWithChannels:function(){return i.ZP.get("/author/community/collectionsWithChannels")},fetchCollectionsWithChannels:function(){return i.ZP.get("/community/collectionsWithChannels")}},c={getCommunityChannel:function(e){return i.ZP.get("/community/group/".concat(e))},getCommunityChannels:function(e){return i.ZP.get("/author/community/groups",{params:e})},createCommunityChannel:function(e){return i.ZP.post("/author/community/groups",e)},deleteCommunityChannel:function(e,t){return i.ZP.delete("/author/community/group/".concat(e),{params:t})},updateCommunityChannel:function(e,t){return i.ZP.put("/author/community/group/".concat(e),t)},getNewPostsCounters:function(e){return i.ZP.get("/community/new_posts",{params:e})}},u={fetchPosts:function(e){var t,s=(0,a.ut)(e),r=null!==(t=s.count)&&void 0!==t?t:12;s.count&&delete s.count;var n=(0,a.RX)(o(o({},s),{},{N:r})),l=n?"?":"";return i.ZP.get("posts".concat(l).concat(n))},addPost:function(e){return i.ZP.post("posts",e)},deletePost:function(e){return i.ZP.delete("post/".concat(e))},editPost:function(e,t){return i.ZP.post("/post/".concat(e),t)},setPostPinValue:function(e,t){return i.ZP.post("/post/".concat(e,"/pin"),t)},editComment:function(e,t,s){return i.ZP.post("/post/".concat(e,"/comment/").concat(t),s)},addComment:function(e,t){return i.ZP.post("post/".concat(e,"/comment"),t)},deleteComment:function(e,t){return i.ZP.delete("/post/".concat(e,"/comment/").concat(t))},fetchPostById:function(e){return i.ZP.get("post/".concat(e))}},d={pollVote:function(e,t){return i.ZP.post("post/".concat(e,"/vote/").concat(t))},addPostLike:function(e){return i.ZP.post("post/".concat(e,"/likes"))},removePostLike:function(e){return i.ZP.delete("post/".concat(e,"/likes"))},addPostUpvote:function(e){return i.ZP.post("post/".concat(e,"/best_of"))},removePostUpvote:function(e){return i.ZP.delete("post/".concat(e,"/best_of"))},addCommentLike:function(e,t){return i.ZP.post("post/".concat(e,"/comment/").concat(t,"/likes"))},removeCommentLike:function(e,t){return i.ZP.delete("post/".concat(e,"/comment/").concat(t,"/likes"))},addCommentUpvote:function(e,t){return i.ZP.post("post/".concat(e,"/comment/").concat(t,"/best_of"))},removeCommentUpvote:function(e,t){return i.ZP.delete("post/".concat(e,"/comment/").concat(t,"/best_of"))}},m={fetchOnlineUsers:function(e){return i.ZP.get("community/online_users",{params:e})},getChannelMembers:function(e){return i.ZP.get("users",{params:e})},inviteMemberToGroup:function(e,t){return i.ZP.post("group/".concat(e,"/invite/").concat(t))},removeMember:function(e,t){return i.ZP.delete("group/".concat(t,"/members/").concat(e))},leaveChannel:function(e){return i.ZP.delete("/group/".concat(e,"/members"))},reportMember:function(e){return i.ZP.post("/user/abuse/".concat(e))},makeUserModeratorIn:function(e,t){return i.ZP.post("/author/user/".concat(e,"/mod/").concat(t))},removeUserFromModeratorIn:function(e,t){return i.ZP.delete("/author/user/".concat(e,"/mod/").concat(t))}};const h=o(o(o(o(o(o({fetchUserCourses:function(){return i.ZP.get("/community/userCourses")},getLinkPreview:function(e){return i.ZP.get("/url/info?url=".concat(e))}},{getSettings:function(){return i.ZP.get("settings/community")},saveSettings:function(e){return i.ZP.post("settings/community",e)},getPagesOptionsListForCommunitySettings:function(){return i.ZP.get("settings/site")}}),l),c),u),m),d)},13952:(e,t,s)=>{s.d(t,{Z:()=>o});var r=s(15861),a=s(64687),i=s.n(a),n=(s(21249),s(68309),s(92222),s(46536));const o={getTags:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return n.ZP.get("/author/tags/all").then((function(t){return e?t.data.tags.map((function(e){return e.name})):t.data.tags}))},getNewTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!0===t){var s="/author/tags".concat(e);return n.ZP.get(s)}return n.ZP.get("/author/tags/all")},getTag:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"author/tag/",r=s+e;return t&&(r="".concat(r,"?verbosity=").concat(t)),n.ZP.get(r)},createTag:function(e){return n.ZP.post("/author/tags",{tags:e})},updateTag:function(e){return n.ZP.put("/author/tag/".concat(e.id),e)},deleteTag:function(e){return(0,r.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.ZP.delete("/author/tag/".concat(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},deleteAllTags:function(e){return(0,r.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.ZP.post("/author/tags/delete",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},mergeTags:function(e){return n.ZP.post("/author/tags/merge",e)}}},23002:(e,t,s)=>{s.d(t,{Z:()=>o});var r=s(15861),a=s(64687),i=s.n(a),n=s(46536);const o={getAllRoles:function(){return n.ZP.get("/user-roles/all-roles")},getSystemRoles:function(){return n.ZP.get("/user-roles/system-roles")},getSystemRole:function(e){return n.ZP.get("/user-roles/system-roles/".concat(e))},getCustomRoles:function(){return n.ZP.get("/user-roles/custom-roles")},createCustomRole:function(e){return n.ZP.post("/user-roles/custom-role",e)},getCustomRole:function(e){return n.ZP.get("/user-roles/custom-roles/".concat(e))},deleteCustomRole:function(e){return n.ZP.delete("/user-roles/custom-roles/".concat(e))},resetPredefinedRole:function(e){return n.ZP.post("/user-roles/predefined-roles/".concat(e,"/reset"))},updateCustomRole:function(e,t){return n.ZP.put("/user-roles/custom-roles/".concat(e),t)},getSystemAndCustomRolesInformation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.ZP.get("/user-roles/custom-system-roles/information".concat(e))},getManagerialRolesAccess:function(){return(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.ZP.get("/user-roles/managers/access"));case 1:case"end":return e.stop()}}),e)})))()},getSegments:function(){return n.ZP.get("/author/analytics/bookmark")}}},46418:(e,t,s)=>{s.d(t,{Z:()=>a});var r=s(93949);const a={props:{id:{required:!1,default:function(){return(0,r.D1)("author_setting")}},value:{required:!1},disabled:{type:Boolean,default:!1}},computed:{valueForInput:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}}},39076:(e,t,s)=>{s.d(t,{Z:()=>r});const r={computed:{hasAccessToBilling:function(){return(this.$lwGates.isParentRoleAdmin()||this.$lwGates.isParentRoleLwAdmin())&&this.$lwGates.hasSettingsSchoolManagePermission()},contactOwnerLabel:function(){return"Contact the school owner or admin to upgrade and access more exciting features."}},methods:{showUpgradeToast:function(){this.$lw.showMessage("warning","Upgrade","This feature is not available on your current subscription plan.\nContact the school owner or an admin to upgrade to a higher plan so you can enjoy more awesome features.",[{name:"OK"}])}}}},58395:(e,t,s)=>{s.d(t,{OI:()=>i,Z0:()=>n,ZN:()=>l,av:()=>o,bW:()=>c});s(69600),s(21249),s(74916),s(15306),s(82526),s(41817);var r=s(60492),a=s(93949),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.map((function(e){return e.type===r.Lc.TEXT?t?e.properties.html:(0,a.ju)(e.properties.html):e.type===r.Lc.MATH_TEXT?(0,a.ju)(e.properties.html).replace(/([$]{1,2})(.?)*?\1/g,"[math]"):e.type===r.Lc.SCREEN?"(".concat(e.properties.media.type,")"):r.ig[e.type]?"(".concat(r.ig[e.type],")"):""})).join(", ")},n=function(e){var t,s,r,a=null!==(t=null!==(s=null===(r=e.blockData.description)||void 0===r?void 0:r.widgets)&&void 0!==s?s:e.blockData.widgets)&&void 0!==t?t:[];return i(a)},o=function(e){return e?"lw-align-".concat(e):""},l=function(e,t){return{id:(0,a.D1)("txt_"),type:r.Lc.TEXT,widgetContext:t,properties:{html:e,customStyle:!1,type:"h3",size:"large"}}},c=function(e,t,s,i){return{id:(0,a.D1)("txt_"),type:r.Lc.IMAGE,widgetContext:i,properties:{alignment:"left",imageData:{link:e},alt:t,width:s}}}},93500:(e,t,s)=>{s.d(t,{Z:()=>m});s(82526),s(57327),s(41539),s(38880),s(57658),s(89554),s(54747),s(49337),s(33321),s(69070);var r=s(15861),a=s(4942),i=s(64687),n=s.n(i),o=(s(47941),s(29225)),l=s(88276),c=s(70538);function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){(0,a.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var m=function(){var e=(0,c.ref)(d({},window.top.schoolSettingsStore)),t=function(e){return!e||0===Object.keys(e).length&&e.constructor===Object},s=function(t){e.value=t,window.top.schoolSettingsStore=t},a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.value?t?e.value[t]:e.value:null},i=function(t,r){e.value[t]=r,s(e.value)},u=function(){var e=(0,r.Z)(n().mark((function e(s){var r,c,u,d=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]&&d[1],t(a(s))||r){e.next=4;break}return console.log("Store already set"),e.abrupt("return");case 4:return e.next=6,(0,o.B)(l.Z.getSettings(s));case 6:c=e.sent,u=c.data.settings,i(s,u);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{store:e,setStore:s,setStoreCategory:i,updateStoreCategory:function(t,r){e.value[t]=d(d({},e.value[t]),r),s(e.value)},getStore:a,getSetting:function(e,t){var s;return null!==(s=a()[t][e])&&void 0!==s?s:null},loadSettingsToStore:u}}},67323:(e,t,s)=>{s.d(t,{Z:()=>r});const r={install:function(e,t){e.prototype.i18n=window.LWTranslate}}},45101:(e,t,s)=>{s.d(t,{Z:()=>P});var r=s(15861),a=s(64687),i=s.n(a),n=s(70538);s(74916),s(15306),s(57327),s(41539);const o=(0,n.defineComponent)({props:["isChecked"]});var l=s(51900);const c=(0,l.Z)(o,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("i",{staticClass:"password-meter-rules-element--icon v-middle"},[e.isChecked?t("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("g",{attrs:{"clip-path":"url(#clip0_4104_52608)"}},[t("path",{attrs:{d:"M4.16663 9.9987L8.33329 14.1654L16.6666 5.83203",stroke:"#029C91","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})]),e._v(" "),t("defs",[t("clipPath",{attrs:{id:"clip0_4104_52608"}},[t("rect",{attrs:{width:"20",height:"20",fill:"white"}})])])]):e._e(),e._v(" "),e.isChecked?e._e():t("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("g",{attrs:{"clip-path":"url(#clip0_4104_52622)"}},[t("path",{attrs:{d:"M10 8C10.3919 7.99998 10.7751 8.11508 11.1021 8.331C11.4291 8.54692 11.6855 8.85416 11.8394 9.21454C11.9933 9.57493 12.038 9.97259 11.9678 10.3581C11.8976 10.7437 11.7157 11.1001 11.4447 11.3831C11.1737 11.6662 10.8255 11.8634 10.4434 11.9503C10.0613 12.0371 9.66207 12.0098 9.29533 11.8717C8.9286 11.7336 8.61051 11.4908 8.38058 11.1735C8.15065 10.8562 8.01901 10.4783 8.002 10.0868L8 10L8.002 9.9132C8.02437 9.3983 8.24464 8.91191 8.61689 8.55546C8.98914 8.19902 9.48461 8.00003 10 8Z",fill:"#828282"}})]),e._v(" "),t("defs",[t("clipPath",{attrs:{id:"clip0_4104_52622"}},[t("rect",{attrs:{width:"20",height:"20",fill:"white"}})])])])])}),[],!1,null,null,null).exports;s(9653);const u={name:"PasswordStrength",props:{linesToColor:{type:Number,default:1},colorClass:{type:String,default:"line-red"}},methods:{getColorForLine:function(e){return e<=this.linesToColor?this.colorClass:""}}};const d=(0,l.Z)(u,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"lw-wizard-nav pos-rel flex gap-4"},e._l(4,(function(s){return t("div",{key:"school-wizard-step-".concat(s),staticClass:"password-strength-div fg-1 fsh-1"},[t("span",{staticClass:"lw-pass-strength-line block",class:e.getColorForLine(s)})])})),0)])}),[],!1,null,"1189bb0c",null).exports;var m=s(64768);s(92222);function h(e){var t=window.LWTranslate;return{i18n:t,t:function(s){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return t.get("".concat(r,".").concat(s))}}}const p=(0,n.defineComponent)({components:{PasswordStrength:d,PasswordMeterRulesListLargeIcon:c},setup:function(){var e=h("api").t,t=(0,m.h)(),s=t.settings,r=t.password,a=t.isLengthInRange,i=t.hasLowerCase,o=t.hasUpperCase,l=t.hasDigit,c=t.hasSpecialCharacter,u=t.isAdvancedRulesEnabled,d=(0,n.computed)((function(){return e("password_rule_length_range").replace("{X}",s.minimum_characters).replace("{Y}",s.maximum_characters)})),p=(0,n.computed)((function(){var e=[a.value,i.value,o.value,l.value,c.value].filter(Boolean).length;return Math.round(4*e/5)})),g=((0,n.computed)((function(){var e,t=["line-red","line-yellow","line-light-green","line-green"];return null!==(e=t[p.value-1])&&void 0!==e?e:t[0]})),(0,n.computed)((function(){return[{text:d.value,isChecked:a.value},{text:e("password_rule_uppercase"),isChecked:o.value},{text:e("password_rule_lowercase"),isChecked:i.value},{text:e("password_rule_number"),isChecked:l.value},{text:e("password_rule_special"),isChecked:c.value}]})));return{t:e,labelColorClass:function(e){return e?"teal-60":"grey3"},settings:s,password:r,isLengthInRange:a,hasLowerCase:i,hasUpperCase:o,hasDigit:l,hasSpecialCharacter:c,isAdvancedRulesEnabled:u,translationLengthInRangeRule:d,passwordRulesConfig:g,numberOfLinesToColor:p}}});const g=(0,l.Z)(p,(function(){var e=this,t=e._self._c;e._self._setupProxy;return e.isAdvancedRulesEnabled?t("div",[e.numberOfLinesToColor>0?t("div",{staticClass:"password-meter-rules-content mt-10"},[t("ul",{staticClass:"password-meter-rules-elements-container"},e._l(e.passwordRulesConfig,(function(s){return t("li",{key:s.text,staticClass:"password-meter-rules-element"},[t("span",{staticClass:"password-meter-rules-element--icon-container"},[t("password-meter-rules-list-large-icon",{attrs:{"is-checked":s.isChecked}})],1),e._v(" "),t("span",{staticClass:"lbl-small",class:e.labelColorClass(s.isChecked)},[e._v("\n                    "+e._s(s.text)+"\n                 ")])])})),0)]):e._e()]):e._e()}),[],!1,null,null,null).exports;s(91058),s(69600),s(2707);const f={name:"PasswordMeterAuto-generate",props:{settings:{type:Object,required:!0}},methods:{autoGeneratePassword:function(){var e,t,s=parseInt(null!==(e=this.settings.minimum_characters)&&void 0!==e?e:8,10),r=parseInt(null!==(t=this.settings.maximum_characters)&&void 0!==t?t:50,10),a=this.generatePassword(Math.floor(Math.random()*(r-s+1))+s);this.$emit("password-generated",a)},generatePassword:function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",s="abcdefghijklmnopqrstuvwxyz",r="0123456789",a="&*%^$_-@#.?!",i=t.charAt(Math.floor(Math.random()*t.length))+s.charAt(Math.floor(Math.random()*s.length))+r.charAt(Math.floor(Math.random()*r.length))+a.charAt(Math.floor(Math.random()*a.length)),n=t+s+r+a,o=4;o<e;o++){var l=Math.floor(Math.random()*n.length);i+=n.charAt(l)}return i=i.split("").sort((function(){return Math.random()-.5})).join("")}}};const v=(0,l.Z)(f,(function(){var e=this;return(0,e._self._c)("span",{staticClass:"lw-link visibility-toggle-control",on:{click:e.autoGeneratePassword}},[e._v("Auto-generate")])}),[],!1,null,"256afb42",null).exports;var w=s(75091);const _=(0,n.defineComponent)({components:{PasswordMeterRulesListIcon:w.Z},setup:function(){var e=h("api").t,t=(0,m.h)(),s=t.settings,r=t.password,a=t.isLengthInRange,i=t.hasLowerCase,o=t.hasUpperCase,l=t.hasDigit,c=t.hasSpecialCharacter,u=t.isAdvancedRulesEnabled,d=(0,n.computed)((function(){return e("password_rule_length_range").replace("{X}",s.minimum_characters).replace("{Y}",s.maximum_characters)}));return{t:e,getSuccessClassWhen:function(e){return e?"--text-green":""},settings:s,password:r,isLengthInRange:a,hasLowerCase:i,hasUpperCase:o,hasDigit:l,hasSpecialCharacter:c,isAdvancedRulesEnabled:u,translationLengthInRangeRule:d}}});const C=(0,l.Z)(_,(function(){var e=this,t=e._self._c;e._self._setupProxy;return e.isAdvancedRulesEnabled?t("div",{staticClass:"password-meter-rules-container"},[t("div",{staticClass:"password-meter-rules-content"},[t("div",{staticClass:"password-meter-rules-content--title"},[e._v("\n            "+e._s(e.t("password_rule_must_have_title"))+"\n        ")]),e._v(" "),t("ul",{staticClass:"password-meter-rules-elements-container"},[t("li",{staticClass:"password-meter-rules-element"},[t("span",{staticClass:"password-meter-rules-element--icon-container"},[t("password-meter-rules-list-icon",{attrs:{"is-checked":e.isLengthInRange}})],1),e._v(" "),t("span",{staticClass:"password-meter-rules-element--text",class:e.getSuccessClassWhen(e.isLengthInRange)},[e._v("\n                    "+e._s(e.translationLengthInRangeRule)+"\n                 ")])]),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:e.settings.check_uppercase,expression:"settings.check_uppercase"}],staticClass:"password-meter-rules-element"},[t("span",{staticClass:"password-meter-rules-element--icon-container"},[t("password-meter-rules-list-icon",{attrs:{"is-checked":e.hasUpperCase}})],1),e._v(" "),t("span",{staticClass:"password-meter-rules-element--text",class:e.getSuccessClassWhen(e.hasUpperCase)},[e._v("\n                  "+e._s(e.t("password_rule_uppercase"))+"\n                ")])]),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:e.settings.check_lowercase,expression:"settings.check_lowercase"}],staticClass:"password-meter-rules-element"},[t("span",{staticClass:"password-meter-rules-element--icon-container"},[t("password-meter-rules-list-icon",{attrs:{"is-checked":e.hasLowerCase}})],1),e._v(" "),t("span",{staticClass:"password-meter-rules-element--text",class:e.getSuccessClassWhen(e.hasLowerCase)},[e._v("\n                   "+e._s(e.t("password_rule_lowercase"))+"\n                ")])]),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:e.settings.check_digit,expression:"settings.check_digit"}],staticClass:"password-meter-rules-element"},[t("span",{staticClass:"password-meter-rules-element--icon-container"},[t("password-meter-rules-list-icon",{attrs:{"is-checked":e.hasDigit}})],1),e._v(" "),t("span",{staticClass:"password-meter-rules-element--text",class:e.getSuccessClassWhen(e.hasDigit)},[e._v("\n                    "+e._s(e.t("password_rule_number"))+"\n                 ")])]),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:e.settings.check_special_chars,expression:"settings.check_special_chars"}],staticClass:"password-meter-rules-element"},[t("span",{staticClass:"password-meter-rules-element--icon-container"},[t("password-meter-rules-list-icon",{attrs:{"is-checked":e.hasSpecialCharacter}})],1),e._v(" "),t("span",{staticClass:"password-meter-rules-element--text",class:e.getSuccessClassWhen(e.hasSpecialCharacter)},[e._v("\n                   "+e._s(e.t("password_rule_special"))+"\n                ")])])])])]):e._e()}),[],!1,null,null,null).exports;const b=(0,n.defineComponent)({setup:function(){return{isMasked:(0,m.h)().isMasked}}});const y=(0,l.Z)(b,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("span",{staticClass:"visibility-toggle-control",on:{click:function(t){e.isMasked=!e.isMasked}}},[e.isMasked?t("i",{staticClass:"eye-crossed-icon"},[t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512.000000 512.000000",preserveAspectRatio:"xMidYMid meet"}},[t("g",{attrs:{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",stroke:"none"}},[t("path",{attrs:{d:"M4420 4629 c-14 -5 -185 -170 -381 -365 l-356 -356 -98 43 c-355 151 -713 219 -1090 206 -197 -7 -327 -25 -509 -71 -655 -166 -1280 -645 -1727 -1325 -90 -136 -106 -175 -95 -235 8 -42 176 -296 293 -441 166 -208 402 -437 614 -597 l109 -83 -344 -345 c-373 -373 -368 -367 -351 -457 9 -48 70 -108 119 -117 89 -17 81 -23 486 379 l375 373 65 -34 c395 -204 919 -287 1369 -219 657 101 1271 484 1769 1105 114 142 280 393 288 436 10 56 -2 92 -77 224 -217 380 -477 674 -822 929 l-88 65 330 330 c286 287 330 336 336 369 14 76 -20 148 -86 182 -32 17 -92 19 -129 4z m-1645 -799 c195 -18 410 -67 578 -132 42 -16 77 -32 77 -36 0 -4 -70 -77 -156 -163 l-157 -157 -46 28 c-79 49 -193 99 -276 121 -106 29 -344 32 -447 6 -186 -46 -348 -138 -474 -269 -125 -129 -206 -276 -251 -456 -26 -103 -23 -341 6 -447 22 -83 72 -197 121 -276 l28 -46 -182 -182 -182 -182 -81 58 c-191 137 -423 350 -578 533 -79 93 -245 317 -245 330 0 4 40 63 89 130 383 526 860 895 1361 1054 265 84 531 112 815 86z m1054 -380 c278 -190 558 -490 730 -781 l61 -102 -47 -66 c-417 -590 -903 -970 -1451 -1137 -196 -59 -329 -78 -557 -78 -218 0 -312 12 -511 64 -99 25 -326 108 -342 125 -3 3 61 73 142 154 l149 149 46 -28 c79 -49 193 -99 276 -121 106 -29 344 -32 447 -6 367 92 633 358 725 725 26 103 23 341 -5 447 -21 76 -88 226 -130 290 l-20 30 196 198 c108 108 198 197 200 197 2 0 43 -27 91 -60z m-1074 -285 c44 -14 90 -34 103 -43 22 -17 21 -18 -411 -450 l-434 -434 -16 26 c-33 50 -68 178 -74 265 -7 113 14 211 68 321 81 163 249 295 429 335 96 22 235 14 335 -20z m410 -410 c17 -49 29 -112 32 -165 22 -371 -296 -689 -668 -667 -87 6 -215 41 -265 74 l-26 16 434 434 c432 432 433 433 450 411 9 -13 29 -59 43 -103z"}})])])]):e._e(),e._v(" "),e.isMasked?e._e():t("i",{staticClass:"eye-open-icon"},[t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512.000000 512.000000",preserveAspectRatio:"xMidYMid meet"}},[t("g",{attrs:{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",stroke:"none"}},[t("path",{attrs:{d:"M2425 4280 c-772 -55 -1540 -560 -2308 -1516 -159 -198 -159 -211 10 -420 317 -394 642 -717 959 -955 536 -402 1085 -588 1622 -548 781 58 1528 550 2291 1509 100 127 121 162 121 210 0 49 -22 86 -142 236 -663 830 -1333 1313 -2008 1448 -109 22 -366 49 -425 44 -11 0 -65 -4 -120 -8z m410 -337 c586 -89 1202 -513 1815 -1251 91 -109 101 -126 92 -145 -14 -31 -179 -225 -333 -393 -486 -530 -1027 -875 -1522 -969 -718 -137 -1465 204 -2205 1005 -133 143 -312 356 -312 370 0 26 324 393 492 555 301 294 559 484 858 634 382 191 734 252 1115 194z"}}),e._v(" "),t("path",{attrs:{d:"M2387 3545 c-204 -39 -388 -135 -532 -280 -391 -390 -391 -1020 0 -1410 125 -125 299 -224 471 -267 119 -30 331 -32 449 -4 240 55 473 211 604 405 63 92 127 234 153 337 32 127 32 341 0 468 -26 103 -90 245 -152 337 -130 190 -352 342 -585 400 -107 27 -304 34 -408 14z m378 -339 c107 -34 194 -87 274 -167 79 -79 132 -166 168 -274 23 -69 27 -96 27 -205 0 -109 -4 -136 -27 -205 -36 -108 -89 -195 -168 -274 -79 -79 -166 -132 -274 -168 -69 -23 -96 -27 -205 -27 -109 0 -136 4 -205 27 -108 36 -195 89 -274 168 -284 284 -261 747 50 1006 69 57 195 118 284 137 101 23 247 15 350 -18z"}})])])])])}),[],!1,null,null,null).exports,S=(0,n.defineComponent)({components:{InlinePasswordMeterRules:g,PasswordMeterRules:C,PasswordMeterMask:y,PasswordMeterAutoGenerate:v},props:{passwordSettings:{type:Object,required:!1}},setup:function(e){var t=(0,m.h)(),s=t.settings,a=t.password,o=t.isMasked,l=t.passwordConfirm,c=t.isValidPassword,u=t.getPasswordSettings,d=t.currentPassword,p=h("api").t,g=(0,n.ref)(!1),f=(0,n.ref)(!1),v=function(e){g.value=e},w=function(e){f.value=e},_=(0,n.computed)((function(){return o.value?"password":"text"}));(0,n.onMounted)((0,r.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.passwordSettings||!window.me){t.next=5;break}return t.next=3,u().then((function(){return w(!0)}));case 3:t.next=6;break;case 5:w(!0);case 6:case"end":return t.stop()}}),t)}))));return{t:p,onFocusShowGuard:function(){a.value.length>=1&&v(!0)},inputHandler:function(){var e=c.value;v(!e)},settings:s,password:a,isMasked:o,maskType:_,showTooltip:g,passwordConfirm:l,isLoaded:f,currentPassword:d}}});const P=(0,l.Z)(S,undefined,undefined,!1,null,null,null).exports},75091:(e,t,s)=>{s.d(t,{Z:()=>a});const r=(0,s(70538).defineComponent)({props:["isChecked"]});const a=(0,s(51900).Z)(r,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("i",{staticClass:"password-meter-rules-element--icon"},[e.isChecked?t("svg",{staticClass:"--icon-success",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",fill:"none"}},[t("circle",{attrs:{cx:"5",cy:"5",r:"4.7",fill:"#219653",stroke:"#219653","stroke-width":"0.6"}}),e._v(" "),t("path",{attrs:{d:"M6.90328 2.85235L4.2046 5.81125C4.15502 5.8656 4.06946 5.8656 4.01988 5.81124L3.09671 4.79901C2.86971 4.55011 2.47794 4.55 2.2508 4.79878C2.05122 5.01738 2.05116 5.35207 2.25066 5.57075L3.61357 7.06466C3.88127 7.3581 4.34323 7.35808 4.61091 7.06463L7.74937 3.6241C7.94886 3.40541 7.94878 3.07073 7.7492 2.85213C7.52206 2.60335 7.13029 2.60345 6.90328 2.85235Z",fill:"white",stroke:"white","stroke-width":"0.15"}})]):e._e(),e._v(" "),e.isChecked?e._e():t("svg",{staticClass:"--icon-neutral",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",fill:"none"}},[t("circle",{attrs:{cx:"5",cy:"5",r:"5",fill:"#767676"}})])])}),[],!1,null,null,null).exports},71468:(e,t,s)=>{s.d(t,{Z:()=>a});const r={name:"AuthoringTooltip",props:{width:{type:String,default:""}},computed:{styles:function(){return this.width?{width:this.width}:{}}}};const a=(0,s(51900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"au-tc-more-icon-info to-top-right ml-5 v-middle"},[t("div",{staticClass:"au-tc-more",style:e.styles},[t("span",[e._t("default")],2)])])}),[],!1,null,null,null).exports},73072:(e,t,s)=>{s.d(t,{w:()=>r,Z:()=>i});var r={DARK:"dark",LIGHT:"light"};const a={name:"ExtraInfo",props:{type:{type:String,default:r.LIGHT}},data:function(){var e,t;return{imagePath:null!==(e=null===(t=this.$lw)||void 0===t?void 0:t.imagePath)&&void 0!==e?e:window.imagePath}},computed:{extraInfoFrameClasses:function(){return{dark:this.type===r.DARK,light:this.type===r.LIGHT}}}};const i=(0,s(51900).Z)(a,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"extra-info-frame-wrapper",class:e.extraInfoFrameClasses},[t("div",{staticClass:"extra-info-frame-title"},[t("img",{staticClass:"extra-info-frame-icon v-middle",attrs:{alt:"Extra information",src:"".concat(e.imagePath,"/author/images/icons/small/extra-info.svg")}}),e._v(" "),t("div",{staticClass:"flex flex-d-col a-i-fs w-full"},[e.hasSlot("extra-info-frame-title")?t("div",{staticClass:"title mb-6"},[e._t("extra-info-frame-title")],2):e._e(),e._v(" "),t("p",{staticClass:"settings-descr v-middle w-full"},[e._t("default")],2)])]),e._v(" "),e.$slots["extra-info-frame-descr"]?[t("p",{staticClass:"extra-info-frame-descr pl-10"},[e._t("extra-info-frame-descr")],2),e._v(" "),e._t("extra-info-frame-content")]:e._e()],2)}),[],!1,null,"140b7d15",null).exports},12233:(e,t,s)=>{s.d(t,{V:()=>l,Z:()=>u});var r=s(4942),a=(s(82526),s(41817),s(92817)),i=s(93949),n=s(92151),o=s(39076),l={ROW:"row",COLUMN:"column"};const c={name:"UpgradeBanner",components:{UpgradeBannerBubble:n.Z,AuthorButton:a.Z},mixins:[o.Z],props:{description:{type:String,required:!1,default:""},direction:{type:String,default:l.ROW},rounded:{type:Boolean,default:!1}},data:function(){return{AUTHOR_BUTTON_TYPE:a.t}},computed:{featureDescription:function(){return this.hasAccessToBilling?this.description:this.contactOwnerLabel},buttonClasses:function(){var e;return(0,i.EQ)(this.direction,(e={},(0,r.Z)(e,l.ROW,"ml-auto"),(0,r.Z)(e,l.COLUMN,""),(0,r.Z)(e,"default",""),e))},classes:function(){var e;return[(0,i.EQ)(this.direction,(e={},(0,r.Z)(e,l.ROW,"a-i-c"),(0,r.Z)(e,l.COLUMN,"flex-d-col a-i-fs"),(0,r.Z)(e,"default",""),e)),{"radius-8":this.rounded}]}},methods:{handleUpgrade:function(){this.hasAccessToBilling&&this.$emit("upgrade")}}};const u=(0,s(51900).Z)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex-wrap-below-840 a-i-c upgrade-banner gap-20",class:e.classes},[t("div",{staticClass:"flex flex-wrap-below-840 a-i-c fsh-1"},[t("UpgradeBannerBubble",{staticClass:"fsh-0"}),e._v(" "),t("div",{staticClass:"au-font fsh-1 pt-10 pb-10"},[t("div",{staticClass:"text-l weight-500 mb-5 grey1"},[e._v("You discovered a higher plan feature!")]),e._v(" "),t("div",{staticClass:"text-m grey2"},[e._t("default",(function(){return[e._v(e._s(e.featureDescription))]}))],2)])],1),e._v(" "),t("div",{staticClass:"flex a-i-c fsh-0"},[e.hasAccessToBilling?t("AuthorButton",{staticClass:"fsh-0",class:e.buttonClasses,attrs:{type:e.AUTHOR_BUTTON_TYPE.UPGRADE},on:{click:e.handleUpgrade}}):e._e()],1)])}),[],!1,null,"c3611df6",null).exports},92151:(e,t,s)=>{s.d(t,{$:()=>i,Z:()=>o});var r=s(4942),a=(s(26699),s(32023),s(26833),s(93949)),i={UPGRADE:"upgrade",GROWTH:"growth"};const n={name:"UpgradeBannerBubble",props:{type:{type:String,default:i.UPGRADE,validator:function(e){return Object.values(i).includes(e)}}},computed:{imgSrc:function(){var e;return(0,a.EQ)(this.type,(e={},(0,r.Z)(e,i.UPGRADE,"/author/images/icons/large/tabler-icon-lock-share.svg"),(0,r.Z)(e,i.GROWTH,"/author/images/icons/large/lock-growth.svg"),e))},classes:function(){var e;return(0,a.EQ)(this.type,(e={},(0,r.Z)(e,i.UPGRADE,""),(0,r.Z)(e,i.GROWTH,"green-bubble"),e))}}};const o=(0,s(51900).Z)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"upgrade-banner-bubble mr-10",class:e.classes},[t("lw-img",{attrs:{src:e.imgSrc}})],1)}),[],!1,null,"111711f0",null).exports},48775:(e,t,s)=>{s.d(t,{Z:()=>o});var r=s(93433),a=(s(66992),s(41539),s(70189),s(78783),s(33948),s(92222),s(26699),s(32023),s(57658),s(68485)),i=s(60917);const n={name:"MultiSelectPropertyTags",components:{ManageTagsFooterTemplate:s(61841).Z,AuthoringMultiselect:i.Z},props:{allTags:{type:Array,default:function(){return[]}},selectedTags:{type:Array,default:function(){return[]}},label:{type:String,default:"Tags"},placeholder:{type:String,default:"Select a tag or type to add new"},isInteractive:{type:Boolean,default:!0},allowAddNewTags:{type:Boolean,default:!0},displayManageTagsOption:{type:Boolean,default:!0},theme:{type:String,default:a.Ws.LINE}},data:function(){return{newTagsAdded:[]}},computed:{uniqueTags:function(){return(0,r.Z)(new Set(this.allTags.concat(this.newTagsAdded)))}},methods:{addNewTag:function(e){this.selectedTags.includes(e)||this.newTagsAdded.includes(e)||(this.newTagsAdded.push(e),this.updateTags([].concat((0,r.Z)(this.selectedTags),[e])))},updateTags:function(e){this.$emit("tagsChanged",e)}}};const o=(0,s(51900).Z)(n,(function(){var e=this,t=e._self._c;return t("div",[e.label?t("div",{staticClass:"form-lbl"},[e._v(e._s(e.label))]):e._e(),e._v(" "),t("AuthoringMultiselect",{attrs:{options:e.uniqueTags,value:e.selectedTags,"can-create-new":e.allowAddNewTags,placeholder:e.placeholder,"is-interactive":e.isInteractive},on:{input:e.updateTags,"new-option":e.addNewTag},scopedSlots:e._u([{key:"dropdownFooter",fn:function(){return[e.$lwGates.hasUsersTagsManagePermission()&&e.displayManageTagsOption?t("ManageTagsFooterTemplate"):e._e()]},proxy:!0}])})],1)}),[],!1,null,null,null).exports},66187:(e,t,s)=>{s.d(t,{Z:()=>U});s(74916),s(15306),s(79753),s(92222),s(47042);var r=s(93433),a=s(15861),i=s(64687),n=s.n(i),o=(s(69826),s(41539),s(68309),s(89554),s(54747),s(26699),s(57658),s(24603),s(28450),s(88386),s(39714),s(77601),s(21249),s(69600),s(32023),s(283),s(93500)),l=s(41162),c=s(36610),u=s(12233),d=s(7217),m=s(34566),h=s(44035);s(57327);const p={name:"UserRegistrationField",props:{registrationField:{type:Object,default:function(){return{placeholder:"",key:"",name:"",type:"text",options:[],error:"",value:null}}}},mounted:function(){var e=this,t=e.registrationField.key;"date"===e.registrationField.type&&($("#"+t).on("mousedown",(function(e){e.preventDefault()})).pickadate({container:"body",format:"yyyy-mm-dd",selectMonths:!0,selectYears:200,onClose:function(){$(".picker__holder").trigger("blur")},onSet:function(s){e.registrationField.value=$("#"+t).val(),e.$emit("registrationFieldChanged")}}),null!==e.registrationField.value&&(this.$el.querySelector("#"+t).value=e.registrationField.value))}};var g=s(51900);const f=(0,g.Z)(p,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"form-lbl"},[e._v(e._s(e.registrationField.name))]),e._v(" "),"text"===e.registrationField.type||"number"===e.registrationField.type?t("input",{directives:[{name:"model",rawName:"v-model",value:e.registrationField.value,expression:"registrationField.value"}],staticClass:"form-text-input form-big-text-input",class:{disabled:e.registrationField.disabled},attrs:{placeholder:e.registrationField.placeholder,type:"text",disabled:e.registrationField.disabled,id:e.registrationField.key},domProps:{value:e.registrationField.value},on:{change:function(t){return e.$emit("registrationFieldChanged")},input:function(t){t.target.composing||e.$set(e.registrationField,"value",t.target.value)}}}):e._e(),e._v(" "),"date"===e.registrationField.type?t("input",{staticClass:"form-text-input form-big-text-input date-input",attrs:{type:"text",placeholder:e.registrationField.placeholder,id:e.registrationField.key}}):e._e(),e._v(" "),"dropdown"===e.registrationField.type?[t("label",{staticClass:"form-select-lbl select-lbl"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registrationField.value,expression:"registrationField.value"}],staticClass:"form-text-input form-big-text-input",attrs:{id:e.registrationField.key},on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registrationField,"value",t.target.multiple?s:s[0])},function(t){return e.$emit("registrationFieldChanged")}]}},e._l(e.registrationField.options,(function(s){return t("option",{domProps:{value:s.value}},[e._v(e._s(s.name))])})),0)])]:e._e(),e._v(" "),"radio"===e.registrationField.type?[t("div",{staticClass:"radios-wrapper"},e._l(e.registrationField.options,(function(s){return t("div",{staticClass:"radio-wrapper bottomMargin"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registrationField.value,expression:"registrationField.value"}],staticClass:"radio-button",attrs:{type:"radio",id:s.name},domProps:{value:s.value,checked:e._q(e.registrationField.value,s.value)},on:{change:function(t){return e.$set(e.registrationField,"value",s.value)}}}),e._v(" "),t("label",{staticClass:"v-middle",attrs:{for:s.name}}),e._v(" "),t("div",{staticClass:"settings-lbl v-middle"},[e._v(e._s(s.name))])])})),0)]:e._e(),e._v(" "),"checkbox"===e.registrationField.type?[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registrationField.value,expression:"registrationField.value"}],staticClass:"checkmark-checkbox",attrs:{id:e.registrationField.key,type:"checkbox"},domProps:{checked:Array.isArray(e.registrationField.value)?e._i(e.registrationField.value,null)>-1:e.registrationField.value},on:{change:[function(t){var s=e.registrationField.value,r=t.target,a=!!r.checked;if(Array.isArray(s)){var i=e._i(s,null);r.checked?i<0&&e.$set(e.registrationField,"value",s.concat([null])):i>-1&&e.$set(e.registrationField,"value",s.slice(0,i).concat(s.slice(i+1)))}else e.$set(e.registrationField,"value",a)},function(t){return e.$emit("registrationFieldChanged")}]}}),e._v(" "),t("label",{staticClass:"v-middle",attrs:{for:e.registrationField.key}}),e._v(" "),t("span",{staticClass:"settings-lbl v-middle",staticStyle:{"max-width":"340px"},domProps:{innerHTML:e._s(e.registrationField.checkboxLabel)}})]:e._e(),e._v(" "),t("div",{staticClass:"line-effect"}),e._v(" "),e.registrationField.error?t("span",{staticClass:"error-message"},[e._v(e._s(e.registrationField.error))]):e._e()],2)}),[],!1,null,"cff914b4",null).exports;var v=s(92741),w=s(72554),_=s(11180),C=s(3318),b=s(67541),y=s(96952),S=s(35309),P=s(82995);const T={name:"AddNewUserSidebar",components:{AuthorSideform:m.Z,AuthoringTip:d.Z,UpgradeBanner:u.Z,AuthorUpgradeButton:c.Z,UserTags:w.Z,UserRegistrationField:f,AddUpdateUserRolesSection:C.Z},mixins:[h.Z,_.Z,y.Z],props:{actionType:{type:String,default:""},roleLevel:{type:String,default:""},roleId:{type:String,default:""},user:{type:Object,default:function(){return null}},seatGroup:{type:Object,default:function(){return null}}},data:function(){return{AUTHOR_TIP_TYPE:d.B,userToEdit:this.user,registrationFields:[],optinCheck:!1,optin:!1,importTags:[],validateSignupFields:!1,isEmailVerificationRequested:!1,addInProgress:!1,modelIsDirty:!1,filteredUserRoles:[],renderedRoleId:this.roleId,roleData:{},roleDataErrors:{roleRequired:!1,instructorError:!1,segmentSegment:!1,invalidPercentage:!1},isAnyRoleSelectable:!0,isEnabledEmailVerification:!1,isUserNewEmailAddressPendingVerification:!1,newEmailAddressPendingVerificationHintText:"",emailValidationRegexp:'/^(([^<>()\\[\\]\\\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/'}},computed:{showRequestEmailVerificationCheckBox:function(){var e=null!==this.userToEdit;if(!this.isEnabledEmailVerification)return!1;if(e){var t=this.registrationFields.find((function(e){return"email"===e.name}));return this.userToEdit.email!==t.value}return!0},titleText:function(){var e=null===this.userToEdit?"Add":"Update",t=this.roleLevel;return this.roleLevel===userRoles.segment&&(t="reporter"),this.roleLevel===userRoles.seatManager&&(t=this.roleId===b.E.userGroupManager?"user group manager":this.roleId===b.E.communitySpaceManager?"community space manager":this.roleId===b.E.seatManager?"seat manager":"manager"),"".concat(e," ").concat(t)},showRolesSection:function(){return!this.userToEdit||this.userToEdit.userRole!==userRoles.lwAdmin},showSeatsUpgradeDiv:function(){return this.seatMode&&!this.hasPermission("user_groups")&&null===this.userToEdit},showUpgradeDiv:function(){var e=this;if(""!==this.roleId){var t=!1;return this.filteredUserRoles.forEach((function(s){var r=s.roles.find((function(t){return t.key===e.roleId}));r&&(t=r.isSelectableByPackage)})),!1===t}return!1===this.isAnyRoleSelectable},activeRoleName:function(){var e,t,s;return null!==(e=null===(t=this.roleData)||void 0===t||null===(s=t.activeRole)||void 0===s?void 0:s.name)&&void 0!==e?e:""},seatMode:function(){return null!=this.seatGroup},displayRegisterUserButton:function(){return null===this.userToEdit&&(!this.seatMode||!this.showSeatsUpgradeDiv&&this.seatMode)},displayUpdateUserButton:function(){return null!==this.userToEdit}},mounted:function(){var e=this;return(0,a.Z)(n().mark((function t(){var s,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=(0,o.Z)(),r=s.loadSettingsToStore,t.next=3,r("site");case 3:e.loadEmailVerificationState();case 4:case"end":return t.stop()}}),t)})))()},created:function(){var e=this;null===this.userToEdit&&this.roleLevel!==this.$lwGates.state.allUserRoles.user&&(this.roleLevel!==this.$lwGates.state.allUserRoles.segment?this.$lw.track("Open create user form",{parentRole:this.roleLevel}):this.$lw.track("Open create user form",{parentRole:"reporter"})),null!==this.userToEdit&&(this.importTags=this.userToEdit.tags,""===this.roleId&&(this.renderedRoleId=this.userToEdit.userRole));var t=this.getFilteredUserRolesWithSections(this.roleLevel,null===this.userToEdit,!this.seatMode),s=t.userRoles,r=t.hasAnyRoleSelectable;if(this.filteredUserRoles=s,this.isAnyRoleSelectable=r,null===this.importTags&&(this.importTags=[]),null!==this.signupFields){var a=["terms","password","password_confirm"];this.signupFields.forEach((function(t){if("optin"===t.name)return null!==e.userToEdit&&(e.optinCheck=e.userToEdit.optin),void(e.optin=!0);if(!a.includes(t.name)){var s=e.createRegField(t);s.isCustomField=t.hasOwnProperty("key"),e.registrationFields.push(s)}}))}},methods:{loadEmailVerificationState:function(){var e=(0,S.X)(),t=e.isEnabled,s=e.setEmailVerificationStateForUser,r=e.isUserNewEmailAddressPendingVerification,a=e.newEmailAddressPendingVerificationHintText;this.isEnabledEmailVerification=t(),this.userToEdit&&(s(this.userToEdit),this.isUserNewEmailAddressPendingVerification=r(),this.newEmailAddressPendingVerificationHintText=a())},changeRoleData:function(e){this.$set(this,"roleData",e)},registrationFieldClass:function(e){return{"with-line-effect":!0}},updateTags:function(e){this.$set(this,"importTags",e)},hasValidationErrors:function(){var e=!1,t=null;if(this.registrationFields.forEach((function(s){if(s.error="",s.required&&("checkbox"===s.type&&!1===s.value||null===s.value||""===s.value))return s.error=""!==s.validationMessage?s.validationMessage:"Field is required",null===t&&(t=s.key),void(e=!0);if(!s.isCustomField&&null!==s.validationCheck&&null!==s.value||s.isCustomField&&s.required&&null!==s.validationCheck&&null!==s.value){var r=s.validationCheck.slice(1,-1);new RegExp(r).test(s.value)||(s.error=s.validationMessage,null===t&&(t=s.key),e=!0)}})),null!==t)try{this.$refs[t][0].$el.scrollIntoView(!0),this.$refs.addUser.scrollTop-=80}catch(e){}return e},createRegField:function(e){var t={error:"",value:null,key:e.key?e.key:e.name,active:e.active,required:e.required,name:e.name,type:e.type,placeholder:e.placeholder,validationMessage:"",validationCheck:null,disabled:!1};switch("email"!==e.name&&"username"!==e.name&&e.translationKey&&""!==e.translationKey&&(t.name=this.i18n.get(e.translationKey)),e.type){case"email":t.type="text",t.validationMessage="Value is not a correct email",t.validationCheck=this.emailValidationRegexp;break;case"url":case"tel":t.type="text";break;case"checkbox":t.checkboxLabel=e.checkbox_label;break;case"text":e.hasOwnProperty("enable_validation")&&e.enable_validation&&e.hasOwnProperty("validation_regex")&&""!==e.validation_regex&&(t.validationCheck=e.validation_regex),e.hasOwnProperty("validation_fail_message")&&""!==e.validation_fail_message&&(t.validationMessage=e.validation_fail_message);break;case"dropdown":case"radio":e.hasOwnProperty("options")&&(t.options=e.options)}return null!==this.userToEdit?e.hasOwnProperty("customField")&&!0===e.customField&&null!==this.userToEdit.custom_fields?t.value=this.userToEdit.custom_fields[e.key]&&null!==this.userToEdit.custom_fields[e.key]?this.userToEdit.custom_fields[e.key]:"":"url"===t.key?this.userToEdit.url?t.value=this.userToEdit.url:t.value=this.userToEdit.website:"email"===t.key?(t.value=void 0!==this.userToEdit.email?this.userToEdit.email:this.userToEdit.emailaddress,"learnworlds_account"===this.userToEdit.account&&this.userToEdit.id!==me.id&&"info@learnworlds.com"!==me.email&&(t.disabled=!0)):t.value=this.userToEdit[t.key]:e.hasOwnProperty("user_value")&&(t.value=e.user_value),"dropdown"===e.type&&""===(t.value||"")&&(t.options=[{name:e.placeholder,value:""}].concat((0,r.Z)(e.options)),t.value=""),t},saveAndCloseUserForm:function(){null===this.userToEdit?this.registerUser():this.updateUser()},closeUserForm:function(e){return!this.modelIsDirty||e?(this.$emit("close"),void("1"===this.getUrlParam("add")&&this.deleteQueryParamsAndAddQueryParamsToUrl(["add"],[]))):showMessage("alert","Discard changes?","Are you sure you want to close the sideform? Any changes you made will be lost.",[{name:"Discard",func:this.closeUserForm,args:[!0],class:"solid"},{name:"Cancel"}])},validateUsernamePassword:function(){var e=this.registrationFields.find((function(e){return"username"===e.key}));if(!e||null===e.value||""===e.value)return e.error="field cannot be empty",!1;var t=this.registrationFields.find((function(e){return"email"===e.key}));return t&&null!==t.value&&""!==t.value?!!new RegExp(this.emailValidationRegexp.slice(1,-1)).test(t.value)||(t.error="email is not valid",!1):(t.error="field cannot be empty",!1)},commonUserValidationsBeforeSave:function(){if(this.validateSignupFields&&this.hasValidationErrors())return!1;if(!this.validateUsernamePassword())return!1;var e=this.userRoleIsInvalid(this.roleData);return this.roleDataErrors.roleRequired=e.roleRequired,this.roleDataErrors.instructorError=e.instructorError,this.roleDataErrors.segmentSegment=e.segmentSegment,this.roleDataErrors.invalidPercentage=e.invalidPercentage,!1===(this.roleDataErrors.roleRequired||this.roleDataErrors.instructorError||this.roleDataErrors.segmentSegment||this.roleDataErrors.invalidPercentage)},commonDataForUser:function(){var e,t,s={};(s.custom_fields={},s.isEmailVerificationRequested=this.isEmailVerificationRequested,this.registrationFields.forEach((function(e){e.isCustomField?s.custom_fields[e.key]=e.value:(s[e.key]=e.value,"url"===e.key&&(s.website=e.value))})),this.optin&&(s.optin=this.optinCheck),s.tags=this.importTags,this.roleData.activeRole.key!==userRoles.lwAdmin)&&(s.userRole=this.roleData.activeRole.key,this.roleData.activeRole.parentRole===userRoles.segment&&(s.segmentSettings={segmentId:this.roleData.segmentSettings.segmentId,manage_courses:(null===(e=this.roleData.segmentSettings.manage_courses)||void 0===e?void 0:e.length)>0?this.roleData.segmentSettings.manage_courses.map((function(e){return e.id})):[]}));if((this.roleData.activeRole.parentRole===userRoles.instructor||this.adminsCommission&&(this.roleData.activeRole.parentRole===userRoles.admin||this.roleData.activeRole.parentRole===userRoles.lwAdmin||this.userToEdit&&this.userToEdit.userRole===userRoles.lwAdmin))&&(s.isInstructorIn=this.roleData.isInstructorIn),this.roleData.activeRole.parentRole===userRoles.seatManager){var a,i,n;if(s.userGroupSettings=null,s.isModeratorIn=null,(null===(a=this.roleData.seatSettings.manage_seats)||void 0===a?void 0:a.length)>0&&(s.userGroupSettings=this.roleData.seatSettings.manage_seats.map((function(e){return e.id}))),(null===(i=this.roleData.userGroupSettings.manage_user_groups)||void 0===i?void 0:i.length)>0){var o=null!==s.userGroupSettings?s.userGroupSettings:[];s.userGroupSettings=[].concat((0,r.Z)(o),(0,r.Z)(this.roleData.userGroupSettings.manage_user_groups.map((function(e){return e.id}))))}null!==(n=this.roleData.isModeratorIn)&&void 0!==n&&n.length&&(s.isModeratorIn=this.roleData.isModeratorIn.map((function(e){return{channelId:e}})))}this.roleData.activeRole.parentRole!==userRoles.user||null!==this.userToEdit&&!this.seatMode||(s.userCoursesToEnroll=(null===(t=this.roleData.userCoursesToEnroll)||void 0===t?void 0:t.courses.length)>0?this.roleData.userCoursesToEnroll:null);return this.userToEdit&&this.userToEdit.userRole===userRoles.lwAdmin&&(s.userRole=userRoles.lwAdmin),s},registerUser:function(){var e=this;return(0,a.Z)(n().mark((function t(){var s,r,a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.modelIsDirty=!1,!1!==e.commonUserValidationsBeforeSave()){t.next=4;break}return e.modelIsDirty=!0,t.abrupt("return");case 4:if(s=e.commonDataForUser(),!e.seatMode){t.next=18;break}return r=s.email,a=[],t.next=10,l.Z.searchUsersByEmail({email:r}).then((function(e){if(e.data.errors&&e.data.errors.length>0)throw e.data.errors.map((function(e){return e.message})).join(", ");a=e.data.users})).catch((function(e){return showMessage("alert","Something went wrong",e,[{name:"OK"}])}));case 10:if(0===a.length){t.next=18;break}if(1===a.length){t.next=13;break}return t.abrupt("return",showMessage("alert","Something went wrong","We should have found only 1 user",[{name:"OK"}]));case 13:if(a[0].email.toLowerCase()===r.toLowerCase()){t.next=15;break}return t.abrupt("return",showMessage("alert","Something went wrong","User with wrong email returned",[{name:"OK"}]));case 15:return e.userToEdit=a[0],e.updateUser(),t.abrupt("return");case 18:e.roleData.activeRole.customRole?window.WI.track("Create user",{role:"custom"}):e.roleData.activeRole.parentRole!==e.$lwGates.state.allUserRoles.segment?window.WI.track("Create user",{role:e.roleData.activeRole.parentRole}):window.WI.track("Create user",{role:"reporter"}),s.account={type:"learnworlds"},e.seatMode&&(s.groupId=e.seatGroup.id,e.roleData.addToSeat&&(s.addToSeat=e.roleData.addToSeat)),e.addInProgress=!0,window.broadcastEvent({action:"save"},!0),v.Z.post("".concat(server,"author/users"),s).then((function(t){if(window.broadcastEvent({action:"saveFinished"},!0),e.addInProgress=!1,t.data.errors&&t.data.errors.length>0)return t.data.errors[0].message.includes("more such users")||t.data.errors[0].message.includes("more seat manager")?showMessage("warning","User can not be saved",t.data.errors[0].message,[{name:"OK"}]):t.data.errors[0].message.includes("You have reached the limit of 1 user for the custom role that you have created")?showMessage("warning","Upgrade to LC",t.data.errors[0].message,[{name:"Upgrade subscription",func:e.redirectToBillingAndTrack,args:["1 user limit toast","Users"]},{name:"No, thanks"}]):t.data.errors[0].message.includes("You have reached the limit of")?showMessage("warning","Update user error",t.data.errors[0].message,[{name:"OK"}]):t.data.errors[0].message.includes("User has been created")?(showMessage("warning","User updated",t.data.errors[0].message,[{name:"OK"}]),e.$emit("close"),void e.$root.$emit("updateUserList")):t.data.errors[0].message.includes("The user exceeds the max number of users")?(showMessage("alert","Oops, a problem occurred","The user exceeds the max number of users and can not be added.",[{name:"OK"}]),e.$emit("close"),void e.$root.$emit("updateUserList")):t.data.errors[0].message.includes("There are no vacant seats.")?(showMessage("alert","Oops, a problem occurred","There is no vacant seat for the user.",[{name:"OK"}]),e.$emit("close"),void e.$root.$emit("updateUserList")):showMessage("alert","Create user error",t.data.errors.map((function(e){return e.message})).join(", "),[{name:"OK"}]);e.seatMode&&e.sendSeatGroupsAddMemberMixPanelEvent(),showMessage("success","Add new user","New user added successfully",[{name:"OK"}]),e.$emit("close"),e.$emit("updateUserList"),e.$root.$emit("updateUserList")})).catch((function(t){return e.addInProgress=!1,window.broadcastEvent({action:"saveFinished"},!0),showMessage("alert","Add new user error",t,[{name:"OK"}])}));case 24:case"end":return t.stop()}}),t)})))()},updateUser:function(){var e=this;if(this.modelIsDirty=!1,!1!==this.commonUserValidationsBeforeSave()){var t,s=this.commonDataForUser();if(this.seatMode)s.activate=null===(t=this.roleData)||void 0===t?void 0:t.addToSeat;this.roleData.activeRole.customRole&&window.WI.track("Edit user",{role:"custom"}),this.roleData.activeRole.predefinedRole&&this.roleData.activeRole.key!==b.E.instructor&&window.WI.track("Edit user",{role:"predefined"});var r=this.userToEdit.userRole,a="",i=this.authorController.getUserRoles().find((function(e){return e.key===r}));void 0!==i&&(a=i.parentRole);var n=s.userRole,o="",l=this.authorController.getUserRoles().find((function(e){return e.key===n}));void 0!==l&&(o=l.parentRole);var c="",u="With this action, the user will lose all the linked courses and the courses commission. Are you sure that you want to change the user role?";if(this.adminsCommission&&a===this.systemUserRoles.admin&&o!==this.systemUserRoles.instructor&&o!==this.systemUserRoles.admin&&!this.seatMode)c="Update admin";else if(this.adminsCommission&&a===this.systemUserRoles.instructor&&o!==this.systemUserRoles.admin&&o!==this.systemUserRoles.instructor&&!this.seatMode||!this.adminsCommission&&a===this.systemUserRoles.instructor&&o!==this.systemUserRoles.instructor&&!this.seatMode)c="Update instructor",u="This action removes instructor commissions and changes the user to ".concat(this.activeRoleName,". Are you sure you want to change the role of this user?");else if(a!==this.systemUserRoles.admin||o===this.systemUserRoles.admin||this.seatMode)if(a!==this.systemUserRoles.segment||o===this.systemUserRoles.segment||this.seatMode){if(a!==this.systemUserRoles.seatManager||o===this.systemUserRoles.seatManager||this.seatMode)return void this.performUpdateUserRequest(s);c="Update manager",u="The user you selected has a manager role. Update user's data?"}else{var d=this.userToEdit.segmentSettings.bookmarkName;c="Update reporter",u='With this action, the user will lose the link to segment "'.concat(d,'". Are you sure that you want to change the user role?')}else c="Update admin",u="This action removes admin privileges and changes the user to ".concat(this.activeRoleName,". Are you sure you want to change the role of this user?");return showMessage("alert",c,u,[{name:"Yes change it",func:function(){return e.performUpdateUserRequest(s)},args:[],class:"solid"},{name:"No, please don't"}])}this.modelIsDirty=!0},performUpdateUserRequest:function(e){var t=this;this.addInProgress=!0,window.broadcastEvent({action:"save"},!0);var s="".concat(this.serverUrl,"author/user/").concat(this.userToEdit.id);this.seatMode&&(s=null===this.user?"".concat(this.serverUrl,"author/user_groups/").concat(this.seatGroup.id,"/user/").concat(this.userToEdit.id):"".concat(this.serverUrl,"author/user_groups/").concat(this.seatGroup.id,"/edit-user/").concat(this.user.id)),v.Z.put(s,e).then((function(e){if(window.broadcastEvent({action:"saveFinished"},!0),t.addInProgress=!1,e.data.errors&&e.data.errors.length>0){if(e.data.errors[0].message.includes("more such users")||e.data.errors[0].message.includes("more manager"))return showMessage("warning","User can not be saved",e.data.errors[0].message,[{name:"OK"}]);if(e.data.errors[0].message.includes("You have reached the limit of 1 user for the custom role that you have created"))return showMessage("warning","Upgrade to LC",e.data.errors[0].message,[{name:"Upgrade subscription",func:t.redirectToBillingAndTrack,args:["1 user limit toast","Users"]},{name:"No, thanks"}]);if(e.data.errors[0].message.includes("The user exceeds the max number of users"))return showMessage("alert","Oops, a problem occurred","The user exceeds the max number of users and can not be added.",[{name:"OK"}]),t.$emit("close"),void t.$root.$emit("updateUserList");if(e.data.errors[0].message.includes("There are no vacant seats."))return showMessage("alert","Oops, a problem occurred","There is no vacant seat for the user.",[{name:"OK"}]),t.$emit("close"),void t.$root.$emit("updateUserList");if(!e.data.errors[0].message.includes("User has been created"))return showMessage("alert","Update user error",e.data.errors.map((function(e){return e.message})).join(", "),[{name:"OK"}]);showMessage("warning","User updated",e.data.errors[0].message,[{name:"OK"}]),t.$emit("close"),t.userUpdated()}t.seatMode&&null===t.user&&t.sendSeatGroupsAddMemberMixPanelEvent(),showMessage("success","Update user","User was updated successfully",[{name:"OK"}]),t.$emit("updateUserList"),t.$emit("close"),t.userUpdated()})).catch((function(e){return t.addInProgress=!1,window.broadcastEvent({action:"saveFinished"},!0),showMessage("alert","Update user error",e,[{name:"OK"}])}))},userUpdated:function(){window.top.eventBus?window.top.eventBus.$emit("updateUserList"):this.$root.$emit("updateUserList");var e=document.getElementById("contentHolder");(null===e&&(e=parent.document.getElementById("contentHolder")),null!==e)&&e.contentWindow.postMessage({action:"userUpdated"},window.top.document.location.href)},goToRegistrationNotifications:function(){var e=this;if(this.modelIsDirty)return showMessage("alert","Discard changes","Do you want to navigate to Registration notifications? All changes in the form will be discarded.",[{name:"Go to notifications",func:function(){return e.redirectTo("/author/settings_notifications?tab=registration")},args:[]},{name:"Cancel"}]);this.redirectTo("/author/settings_notifications?tab=registration")},sendSeatGroupsAddMemberMixPanelEvent:function(){this.seatGroup.type===P.tf?this.$lw.track("User group member management - Add member"):this.seatGroup.type===P.ab&&this.$lw.track("Seat management - Add member")}}};const U=(0,g.Z)(T,(function(){var e=this,t=e._self._c;return t("AuthorSideform",{attrs:{title:e.titleText},on:{close:function(t){return e.closeUserForm(!1)}}},[e.showUpgradeDiv?t("UpgradeBanner",{attrs:{description:"Access control made easy. Take charge of your LearnWorlds school with a team of professionals. Determine their access levels and administrative powers."},on:{upgrade:function(t){e.redirectToBillingAndTrack("Add new "+e.activeRoleName.replace("manager","")+" sidebar","Users")}}}):e._e(),e._v(" "),e.showSeatsUpgradeDiv?t("div",{staticClass:"section-card-row-small"},[t("div",{staticClass:"section-card-part-small"},[t("h6",{staticClass:"inner-title-small"}),e._v(" "),t("p",{staticClass:"inner-subtitle"})]),e._v(" "),t("div",{staticClass:"section-card-part-small"},[t("div",[t("author-upgrade-button",{staticStyle:{display:"block"},attrs:{asset:"Add new ".concat(e.activeRoleName.replace("manager","")," sidebar"),context:"Users"},on:{upgrade:function(t){return e.closeUserForm(!1)}}})],1)])]):e._e(),e._v(" "),t("div",{staticClass:"section-card-row-small"},[t("div",{staticClass:"section-card-part-small"},[t("h6",{staticClass:"inner-title-small"},[e._v("User details")]),e._v(" "),null===e.userToEdit?t("div",{staticClass:"inner-subtitle"},[t("span",[e._v("Provide user’s details.")]),e._v(" "),t("AuthoringTip",{staticClass:"mt-20",attrs:{type:e.AUTHOR_TIP_TYPE.EXTRA_INFO,title:"Invitation email"}},[t("p",[e._v("An invitation email will be sent, asking the user to set a password for accessing your school.")])])],1):t("p",{staticClass:"inner-subtitle"},[e._v("\n                Update user’s details.\n            ")])]),e._v(" "),t("div",{staticClass:"section-card-part-small"},e._l(e.registrationFields,(function(s){return t("div",{key:s.key,staticClass:"form-row"},[t("div",{class:e.registrationFieldClass(s.type)},[t("UserRegistrationField",{ref:s.key,refInFor:!0,attrs:{"registration-field":s},on:{registrationFieldChanged:function(t){e.modelIsDirty=!0}}})],1),e._v(" "),"email"===s.key&&e.isUserNewEmailAddressPendingVerification?t("div",{staticClass:"clrs-upload-lbl"},[e._v("\n                    "+e._s(e.newEmailAddressPendingVerificationHintText)+"\n                ")]):e._e()])})),0)]),e._v(" "),t("add-update-user-roles-section",{attrs:{user:e.userToEdit,"user-roles":e.filteredUserRoles,"role-id":e.renderedRoleId,"role-data-errors":e.roleDataErrors,seatGroup:e.seatGroup},on:{changeRoleData:e.changeRoleData}}),e._v(" "),e.seatMode?e._e():t("div",{staticClass:"section-card-row-small"},[t("div",{staticClass:"section-card-part-small"},[t("h6",{staticClass:"inner-title-small"},[e._v("User tags")]),e._v(" "),t("p",{staticClass:"inner-subtitle"},[e._v("\n                Add one or more tags to the user.\n            ")])]),e._v(" "),t("div",{staticClass:"section-card-part-small"},[t("div",{staticClass:"form-row with-line-effect"},[t("UserTags",{attrs:{user:e.userToEdit,"send-tags":!1},on:{updateTags:e.updateTags}})],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.optin,expression:"optin"}],staticClass:"form-row settings-checkbox-wrapper"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.optinCheck,expression:"optinCheck"}],staticClass:"checkmark-checkbox",attrs:{id:"addUseroptin",name:"optin",type:"checkbox"},domProps:{checked:Array.isArray(e.optinCheck)?e._i(e.optinCheck,null)>-1:e.optinCheck},on:{change:function(t){var s=e.optinCheck,r=t.target,a=!!r.checked;if(Array.isArray(s)){var i=e._i(s,null);r.checked?i<0&&(e.optinCheck=s.concat([null])):i>-1&&(e.optinCheck=s.slice(0,i).concat(s.slice(i+1)))}else e.optinCheck=a}}}),e._v(" "),t("label",{staticClass:"v-middle",attrs:{for:"addUseroptin"}}),e._v(" "),t("div",{staticClass:"settings-lbl v-middle",staticStyle:{"max-width":"340px"}},[e._v("The user has given consent to receive emails from this school")])])])]),e._v(" "),null!==e.userToEdit||e.seatMode?e._e():t("div",{staticClass:"section-card-row-small"},[t("div",{staticClass:"section-card-part-small"},[t("h6",{staticClass:"inner-title-small"},[e._v("Sign up validation rules")]),e._v(" "),t("p",{staticClass:"inner-subtitle"},[e._v("Ignore or not users’ registration constraints when creating new users")])]),e._v(" "),t("div",{staticClass:"section-card-part-small with-checkbox"},[t("div",{staticClass:"form-lbl"},[e._v("Validation rules")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.validateSignupFields,expression:"validateSignupFields"}],staticClass:"checkmark-checkbox",attrs:{id:"validateSignupFields",type:"checkbox"},domProps:{checked:Array.isArray(e.validateSignupFields)?e._i(e.validateSignupFields,null)>-1:e.validateSignupFields},on:{change:function(t){var s=e.validateSignupFields,r=t.target,a=!!r.checked;if(Array.isArray(s)){var i=e._i(s,null);r.checked?i<0&&(e.validateSignupFields=s.concat([null])):i>-1&&(e.validateSignupFields=s.slice(0,i).concat(s.slice(i+1)))}else e.validateSignupFields=a}}}),e._v(" "),t("label",{staticClass:"v-middle",attrs:{for:"validateSignupFields"}}),e._v(" "),t("div",{staticClass:"settings-lbl v-middle"},[e._v("Apply validation rules")])])]),e._v(" "),t("div",{staticClass:"section-card-row-small"},[t("div",{staticClass:"section-card-part-small"},[null!==e.userToEdit||e.seatMode?e._e():t("AuthoringTip",{attrs:{type:e.AUTHOR_TIP_TYPE.EXTRA_INFO}},[e._v("\n                Edit the invitation email in Settings -  "),t("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.goToRegistrationNotifications()}}},[e._v("Registration notifications")]),e._v(', in section "When a learner is imported by admin"\n            ')])],1),e._v(" "),t("div",{staticClass:"section-card-part-small"},[t("div",{staticClass:"btn-wrapper"},[e.displayRegisterUserButton?t("div",{staticClass:"btn btn-l",class:{disabled:e.addInProgress},on:{click:function(t){return e.registerUser()}}},[e._v(e._s(e.titleText))]):e._e(),e._v(" "),e.displayUpdateUserButton?t("div",{staticClass:"btn btn-l",class:{disabled:e.addInProgress},on:{click:function(t){return e.updateUser()}}},[e._v(e._s(e.titleText))]):e._e(),e._v(" "),t("button",{staticClass:"btn btn-l btn-secondary",attrs:{type:"button"},on:{click:function(t){return e.closeUserForm(!1)}}},[e._v("Cancel")])])])])],1)}),[],!1,null,null,null).exports},79965:(e,t,s)=>{s.d(t,{Z:()=>f});var r=s(4942),a=s(93433),i=(s(69826),s(41539),s(92222),s(47941),s(57327),s(26699),s(32023),s(21249),s(69600),s(2707),s(68485)),n=s(44035),o=s(60741),l=s(11180),c=s(70538),u=s(93500);const d=(0,c.defineComponent)({name:"ManageUserSecurityGroup",props:{user:{default:null,type:Object},resetTwoFactor:{type:Function},canResendActivation:{type:Boolean,required:!0},resendActivation:{type:Function,required:!0},shouldDisplayBoxLayout:{type:Boolean,default:!0}},setup:function(e){var t=(0,c.toRefs)(e).user,s=(0,u.Z)().getSetting,r=(0,c.computed)((function(){return"disabled"!==s("site_email_verification_settings","site").mode})),a=(0,c.computed)((function(){return"verified"!==t.value.email_config.verification.status})),i=(0,c.computed)((function(){return"disabled"!==s("site_two_factor_settings","site").status})),n=(0,c.computed)((function(){return t.value.user_two_factor_settings.is_enabled})),l=(0,c.computed)((function(){return r.value&&a.value}));return{openResendEmailVerificationModal:function(e){(0,o.jE)(null,{user_ids:[e]})},showResetOption:(0,c.computed)((function(){return i.value&&n.value})),showVerificationOption:l,isEmailVerificationFeatureEnabled:r,isEmailVerificationStatusNotVerified:a,isTwoFactorFeatureEnabled:i,isUserHasTwoFactorEnabled:n}}});var m=s(51900);const h=(0,m.Z)(d,(function(){var e=this,t=e._self._c;e._self._setupProxy;return e.canResendActivation||e.showVerificationOption||e.showResetOption?t("div",[e.shouldDisplayBoxLayout?t("div",{staticClass:"lbl-small grey3 weight-500 mb-12"},[e._v("Security")]):e._e(),e._v(" "),e.shouldDisplayBoxLayout?e._e():t("div",{staticClass:"separator-horizontal m-8-0"}),e._v(" "),t("ul",{staticClass:"lst-none gap-4"},[e.canResendActivation?t("li",{staticClass:"table-more-menu-item",class:{disabled:"deleted"===e.user.role},on:{click:function(t){return e.resendActivation({},e.user.id)}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/rotate-clockwise.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Resend Activation")])]):e._e(),e._v(" "),e.showVerificationOption?t("li",{staticClass:"table-more-menu-item",class:{disabled:"deleted"===e.user.role},on:{click:function(t){return e.openResendEmailVerificationModal(e.user.id)}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/rotate-clockwise.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Resend Verification")])]):e._e(),e._v(" "),e.showResetOption?t("li",{staticClass:"table-more-menu-item",class:{disabled:"deleted"===e.user.role},on:{click:e.resetTwoFactor}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/rotate-clockwise.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Reset 2FA")])]):e._e()])]):e._e()}),[],!1,null,null,null).exports;var p=s(82995);const g={name:"ManageUser",components:{ManageUserSecurityGroup:h},mixins:[n.Z,l.Z],props:{user:{default:function(){return null},type:Object},learnerValue:{default:"",type:String},advanceFiltersToggle:{default:!1,type:Boolean},seatGroup:{type:Object,default:function(){return null}}},data:function(){return{selectedSideBar:""}},computed:{canImpersonateUser:function(){return"deleted"!==this.user.role&&(!(this.$lwGates.isUserImpersonationEnabled()||this.$lwGates.isRoleImpersonationEnabled()||this.userIsLoggedOnUser)&&(!(!this.userIsSchoolOwner||"info@learnworlds.com"!==window.me.email)||!this.userIsSchoolOwner&&(!!this.loggedUserIsLwAdmin||(!this.loggedUserIsAdmin||!this.userIsAdmin)&&this.$lwGates.hasLogInAsUserPermission())))},canUpdateUser:function(){return!!this.$lwGates.hasUsersAdvancedPermission()&&("deleted"!==this.user.role&&("info@learnworlds.com"===window.me.email||(!!this.userIsLoggedOnUser||!!this.userCanBeEdited()&&!this.userIsSchoolOwner)))},canUpdateResetPassword:function(){return!!this.$lwGates.hasUsersBasicPermission()&&("deleted"!==this.user.role&&(!!this.userIsLoggedOnUser||!!this.userCanBeEdited()&&!this.userIsSchoolOwner))},canRemoveProduct:function(){return!("deleted"===this.user.role||!this.user.hasActiveProducts)&&(!!this.userIsLoggedOnUser||!this.userIsSchoolOwner)},isSendMessageActionDisabled:function(){return"deleted"===this.user.role||!this.userIsSignupEligible},isEnrollToProductActionDisabled:function(){return"deleted"===this.user.role||!this.userIsSignupEligible},userIsSchoolOwner:function(){return this.user.userRole===this.systemUserRoles.lwAdmin},userIsAdmin:function(){var e=this;if(this.user.userRole===this.systemUserRoles.lwAdmin)return this.systemUserRoles.lwAdmin;var t=this.authorController.getUserRoles().find((function(t){return t.key===e.user.userRole}));return void 0!==t&&t.parentRole===this.systemUserRoles.admin},userIsLoggedOnUser:function(){return this.user.id===window.me.id},userIsSignupEligible:function(){return!this.user.signupEligibilityStatus||this.user.signupEligibilityStatus===i.OD.PASSED},loggedUserIsLwAdmin:function(){return window.me.parentRole===this.systemUserRoles.lwAdmin},loggedUserIsAdmin:function(){return window.me.parentRole===this.systemUserRoles.admin},normalMode:function(){return null===this.seatGroup},seatMode:function(){return null!==this.seatGroup&&this.seatGroup.type===p.ab},groupMode:function(){return null!==this.seatGroup&&this.seatGroup.type===p.tf},canResendActivation:function(){return("never_logged_in"===this.learnerValue||null===this.user.lastlogin_timestamp)&&this.$lwGates.hasUsersBasicPermission()&&this.userCanBeEdited()&&!this.advanceFiltersToggle},canEditProfileColumn:function(){return this.canUpdateUser||this.canUpdateResetPassword||this.showResendEmailVerificationManageOption()||this.canResendActivation||this.$lwGates.hasUsersBasicPermission()||this.canImpersonateUser},canEditActionsColumn:function(){return this.$lwGates.hasUsersBasicPermission()&&this.normalMode||this.$lwGates.hasUsersBasicPermission()&&this.canRemoveProduct&&this.normalMode||this.$lwGates.hasUsersBasicPermission()&&this.seatMode||this.$lwGates.hasUsersBasicPermission()&&this.groupMode||this.$lwGates.hasUsersUpdateProgressPermission()&&this.canRemoveProduct},groupsAndSeatsLabel:function(){var e="";return this.normalMode?e="Groups/seats":this.groupMode?e="Group actions":this.seatMode&&(e="Seat offering actions"),e},canEditGroupsAndSeatsColumn:function(){return this.$lwGates.hasUsersAdvancedPermission()&&(this.$lwGates.isParentRoleLwAdmin()||this.$lwGates.isParentRoleAdmin())&&this.normalMode||this.$lwGates.hasUsersAdvancedPermission()&&(this.$lwGates.isParentRoleLwAdmin()||this.$lwGates.isParentRoleAdmin()||this.$lwGates.isParentRoleUserGroupManager()&&this.userCanBeEdited())&&this.groupMode||this.$lwGates.hasUsersAdvancedPermission()&&(this.$lwGates.isParentRoleLwAdmin()||this.$lwGates.isParentRoleAdmin()||this.$lwGates.isParentRoleUserGroupManager()&&this.userCanBeEdited())&&this.seatMode},canEditRemoveColumn:function(){return"deleted"===this.user.role&&this.$lwGates.hasUsersAdvancedPermission()&&this.userCanBeEdited()||"deleted"!==this.user.role&&!this.userIsSchoolOwner&&!this.userIsLoggedOnUser&&this.$lwGates.hasUsersAdvancedPermission()&&this.userCanBeEdited()||"deleted"!==this.user.role&&!this.userIsSchoolOwner&&!this.userIsLoggedOnUser&&this.$lwGates.hasUsersDeletePermission()&&this.userCanBeEdited()},shouldDisplayBoxLayout:function(){var e=0;return e+=this.canEditProfileColumn?6:0,e+=this.canEditActionsColumn?4:0,e+=this.canEditGroupsAndSeatsColumn?3:0,(e+=this.canEditRemoveColumn?4:0)>=10}},methods:{sendMessage:function(e,t){return this.redirectTo("/inbox?userid=".concat(e,"&username=").concat(t))},suspendAccount:function(e,t){(0,o.mc)(this,t,e)},resendActivation:function(e,t){(0,o.qy)(null,e,t)},showResendEmailVerificationManageOption:function(){return!!this.$lwGates.hasUsersBasicPermission()&&(!!this.userCanBeEdited()&&"verified"!==this.user.email_config.verification.status)},openResendEmailVerificationModal:function(e){(0,o.jE)(null,{user_ids:[e]})},anonymizeAccount:function(e){(0,o.XW)(this,e)},deleteAccount:function(e){(0,o.xU)(this,e)},resetTwoFactor:function(){(0,o.OL)(this,this.user)},resetPassword:function(e){(0,o.h8)(this,e)},openImpersonateUserModal:function(e){window.broadcastEvent({action:"showImpersonationModal",payload:{user:e}})},updateUserProgress:function(){var e=this.hasAccessToBulkActions;this.$lw.isLearnworldsSupport&&(e=!0),this.$lw.track("Update Progress click",{asset:"User Card"}),window.userCardForm(this.user.id,"","",e)},occupiesSeat:function(e){if(this.seatGroup){var t,s=Object.keys(null!==(t=this.seatGroup.users)&&void 0!==t?t:{}).find((function(t){return e.id===t}));return!!s&&!0===this.seatGroup.users[s].active}return!1},getUserCoursesOnSeat:function(e){var t=this;return e.courseslist.filter((function(e){return t.seatGroup.courses.includes(e.id)}))},isUserEnrolledInAllSeatCourses:function(e){var t=this.getUserCoursesOnSeat(e).map((function(e){return e.id})),s=(0,a.Z)(this.seatGroup.courses);return t.sort().join(",")===s.sort().join(",")},isUserEnrolledInZeroSeatCourses:function(e){return 0===this.getUserCoursesOnSeat(e).length},openSeatUserSidebar:function(e,t,s){this.$emit("openSeatUserSidebar",e,t,s)},removeUserFromGroup:function(e){this.$emit("removeUserFromGroup",e,!0)},removeUserFromSeatOffering:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.$emit("removeUserFromSeatOffering",e,t)},userCanBeEdited:function(){var e,t=this.$lwGates.getParentRole(),s=this.user.parentRole,a=(e={},(0,r.Z)(e,this.$lwGates.state.allUserRoles.lwAdmin,0),(0,r.Z)(e,this.$lwGates.state.allUserRoles.admin,1),(0,r.Z)(e,this.$lwGates.state.allUserRoles.seatManager,2),(0,r.Z)(e,this.$lwGates.state.allUserRoles.instructor,2),(0,r.Z)(e,this.$lwGates.state.allUserRoles.segment,2),(0,r.Z)(e,this.$lwGates.state.allUserRoles.user,3),e);if(!(t in a)||!(s in a))return!1;var i=a[t],n=a[s];return(i!==n||0!==i&&2!==i&&3!==i)&&i<=n}}};const f=(0,m.Z)(g,(function(){var e=this,t=e._self._c;return t("div",{class:e.shouldDisplayBoxLayout?"table-more-menu grid-3col grid-1col-below-629":"table-more-menu column-layout"},[e.canEditProfileColumn||e.canEditActionsColumn||e.canEditGroupsAndSeatsColumn||e.canEditRemoveColumn?e._e():t("div",{staticClass:"p-5"},[e._m(0)]),e._v(" "),e.canEditProfileColumn?t("div",{class:e.shouldDisplayBoxLayout?"grid-col":""},[t("div",{class:e.shouldDisplayBoxLayout?"mb-24":""},[e.shouldDisplayBoxLayout?t("div",{staticClass:"lbl-small grey3 weight-500 mb-8"},[e._v("Profile")]):e._e(),e._v(" "),t("ul",{staticClass:"lst-none gap-4"},[e.canUpdateUser?t("li",{staticClass:"table-more-menu-item",on:{click:function(t){return e.$root.$emit("updateUser",e.user)}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/pencil.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Edit User")])]):e._e(),e._v(" "),e.canUpdateResetPassword?t("li",{staticClass:"table-more-menu-item",on:{click:function(t){return e.$root.$emit("manageUserShowSidebar","UpdatePassword",e.user)}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/refresh.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Update Password")])]):e._e(),e._v(" "),e.canUpdateResetPassword?t("li",{staticClass:"table-more-menu-item",on:{click:function(t){return e.resetPassword(e.user.id)}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/rotate-clockwise.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Reset Password")])]):e._e(),e._v(" "),e.$lwGates.hasUsersBasicPermission()?t("li",{staticClass:"table-more-menu-item",class:{disabled:e.isSendMessageActionDisabled},on:{click:function(t){return e.sendMessage(e.user.id,e.user.username)}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/send.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Send Message")])]):e._e(),e._v(" "),e.canImpersonateUser?t("li",{staticClass:"table-more-menu-item",on:{click:function(t){return e.openImpersonateUserModal(e.user)}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/login.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Log in as this user")])]):e._e()])]),e._v(" "),t("ManageUserSecurityGroup",{attrs:{user:e.user,resetTwoFactor:e.resetTwoFactor,"can-resend-activation":e.canResendActivation,"resend-activation":e.resendActivation,shouldDisplayBoxLayout:e.shouldDisplayBoxLayout}})],1):e._e(),e._v(" "),e.canEditActionsColumn||e.canEditGroupsAndSeatsColumn?t("div",{class:e.shouldDisplayBoxLayout?"grid-col":""},[e.shouldDisplayBoxLayout?e._e():t("div",{staticClass:"separator-horizontal m-8-0"}),e._v(" "),t("div",{class:e.shouldDisplayBoxLayout?"mb-24":""},[e.shouldDisplayBoxLayout?t("div",{staticClass:"lbl-small grey3 weight-500 mb-12"},[e._v("Products")]):e._e(),e._v(" "),t("ul",{staticClass:"lst-none gap-4"},[e.$lwGates.hasUsersBasicPermission()&&e.normalMode?t("li",{staticClass:"table-more-menu-item",class:{disabled:e.isEnrollToProductActionDisabled},on:{click:function(t){return e.$root.$emit("manageUserShowSidebar","EnrollToProduct",e.user)}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/user-plus.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Enroll to Product")])]):e._e(),e._v(" "),e.$lwGates.hasUsersBasicPermission()&&e.canRemoveProduct&&e.normalMode?t("li",{staticClass:"table-more-menu-item",class:{disabled:!e.userIsSignupEligible},on:{click:function(t){return e.$root.$emit("manageUserShowSidebar","RemoveProduct",e.user)}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/x.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Un-enroll")])]):e._e(),e._v(" "),e.$lwGates.hasUsersBasicPermission()&&e.seatMode?t("li",{staticClass:"table-more-menu-item",class:{disabled:!e.occupiesSeat(e.user)},on:{click:function(t){return e.openSeatUserSidebar(e.user,"SeatUserCourseEnrollmentSidebar","enroll")}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/user-plus.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Enroll to courses")])]):e._e(),e._v(" "),e.$lwGates.hasUsersBasicPermission()&&e.seatMode?t("li",{staticClass:"table-more-menu-item",class:{disabled:!e.occupiesSeat(e.user)||e.occupiesSeat(e.user)&&e.isUserEnrolledInZeroSeatCourses(e.user)},on:{click:function(t){return e.openSeatUserSidebar(e.user,"SeatUserCourseRemovalSidebar","unenroll")}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/x.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Unenroll from courses")])]):e._e(),e._v(" "),e.$lwGates.hasUsersBasicPermission()&&e.groupMode?t("li",{staticClass:"table-more-menu-item",on:{click:function(t){return e.openSeatUserSidebar(e.user,"SeatUserCourseEnrollmentSidebar","enroll")}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/plus.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Enroll in courses")])]):e._e(),e._v(" "),e.$lwGates.hasUsersBasicPermission()&&e.groupMode?t("li",{staticClass:"table-more-menu-item",class:{disabled:e.isUserEnrolledInZeroSeatCourses(e.user)},on:{click:function(t){return e.openSeatUserSidebar(e.user,"SeatUserCourseRemovalSidebar","unenroll")}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/rotate-clockwise.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Unenroll from courses")])]):e._e(),e._v(" "),e.$lwGates.hasUsersUpdateProgressPermission()&&e.canRemoveProduct?t("li",{staticClass:"table-more-menu-item",on:{click:function(t){return e.updateUserProgress()}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/rotate-clockwise.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Update Progress")])]):e._e()])]),e._v(" "),e.$lwGates.hasUsersAdvancedPermission()&&(e.$lwGates.isParentRoleLwAdmin()||e.$lwGates.isParentRoleAdmin())&&e.normalMode?[e.shouldDisplayBoxLayout?e._e():t("div",{staticClass:"separator-horizontal m-8-0"}),e._v(" "),e.shouldDisplayBoxLayout?t("div",{staticClass:"lbl-small grey3 weight-500 mb-12"},[e._v("Groups / Seats")]):e._e(),e._v(" "),t("ul",{staticClass:"lst-none gap-4"},[t("li",{staticClass:"table-more-menu-item",class:{disabled:"deleted"===e.user.role},on:{click:function(t){return e.$root.$emit("manageUserShowSidebar","AddToGroup",e.user)}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/user-plus.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Add to group")])]),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:e.userGroupsExistOnSchool,expression:"userGroupsExistOnSchool"}],staticClass:"table-more-menu-item",class:{disabled:"deleted"===e.user.role},on:{click:function(t){return e.$root.$emit("manageUserShowSidebar","RemoveFromGroup",e.user)}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/user-minus.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Remove from group")])]),e._v(" "),t("li",{staticClass:"table-more-menu-item",class:{disabled:"deleted"===e.user.role},on:{click:function(t){return e.$root.$emit("manageUserShowSidebar","AddToSeat",e.user)}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/user-plus.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Add to seat")])]),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:e.seatOfferingsExistOnSchool,expression:"seatOfferingsExistOnSchool"}],staticClass:"table-more-menu-item",class:{disabled:"deleted"===e.user.role},on:{click:function(t){return e.$root.$emit("manageUserShowSidebar","RemoveFromSeat",e.user)}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/user-minus.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Remove from seat")])])])]:e._e(),e._v(" "),e.$lwGates.hasUsersAdvancedPermission()&&(e.$lwGates.isParentRoleLwAdmin()||e.$lwGates.isParentRoleAdmin()||e.$lwGates.isParentRoleUserGroupManager()&&e.userCanBeEdited())&&e.groupMode?t("li",{staticClass:"table-more-menu-item",on:{click:function(t){return e.removeUserFromGroup(e.user)}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/x.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Remove from group")])]):e._e(),e._v(" "),e.$lwGates.hasUsersAdvancedPermission()&&(e.$lwGates.isParentRoleLwAdmin()||e.$lwGates.isParentRoleAdmin()||e.$lwGates.isParentRoleUserGroupManager()&&e.userCanBeEdited())&&e.seatMode?t("li",{staticClass:"table-more-menu-item",on:{click:function(t){return e.removeUserFromSeatOffering(e.user)}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/x.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Remove from seat offering")])]):e._e(),e._v(" "),e.$lwGates.hasUsersAdvancedPermission()&&e.$lwGates.hasUsersBasicPermission()&&!e.occupiesSeat(e.user)&&e.seatMode?t("li",{staticClass:"table-more-menu-item",on:{click:function(t){return e.openSeatUserSidebar(e.user,"SeatUserCourseEnrollmentSidebar","add")}}},[t("LwImg",{attrs:{src:"/author/images/icons/small/plus.svg"}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Add to seat")])],1):e.$lwGates.hasUsersBasicPermission()&&e.seatMode?t("li",{staticClass:"table-more-menu-item",on:{click:function(t){return e.removeUserFromSeatOffering(e.user,!1)}}},[t("LwImg",{attrs:{src:"/author/images/icons/small/x.svg"}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Remove from seat")])],1):e._e()],2):e._e(),e._v(" "),!e.canEditRemoveColumn||e.userIsSchoolOwner||e.userIsLoggedOnUser?e._e():t("div",{class:e.shouldDisplayBoxLayout?"grid-col":""},[e.shouldDisplayBoxLayout?t("div",{staticClass:"lbl-small grey3 weight-500 mb-12"},[e._v("Remove")]):e._e(),e._v(" "),t("ul",{staticClass:"lst-none gap-4"},["deleted"===e.user.role&&e.$lwGates.hasUsersAdvancedPermission()&&e.userCanBeEdited()?t("li",{staticClass:"table-more-menu-item",on:{click:function(t){return e.suspendAccount(e.user,!1)}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/check.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Unsuspend User")])]):e._e(),e._v(" "),"deleted"!==e.user.role&&!e.userIsSchoolOwner&&!e.userIsLoggedOnUser&&e.$lwGates.hasUsersAdvancedPermission()&&e.userCanBeEdited()?t("li",{staticClass:"table-more-menu-item",on:{click:function(t){return e.suspendAccount(e.user,!0)}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/x.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Suspend User")])]):e._e(),e._v(" "),"deleted"!==e.user.role&&!e.userIsSchoolOwner&&!e.userIsLoggedOnUser&&e.$lwGates.hasUsersAdvancedPermission()&&e.userCanBeEdited()?t("li",{staticClass:"table-more-menu-item",on:{click:function(t){return e.anonymizeAccount(e.user)}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/user-cancel.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Anonymize User")])]):e._e(),e._v(" "),"deleted"!==e.user.role&&!e.userIsSchoolOwner&&!e.userIsLoggedOnUser&&e.$lwGates.hasUsersDeletePermission()&&e.userCanBeEdited()?t("li",{staticClass:"table-more-menu-item red-hover",on:{click:function(t){return e.deleteAccount(e.user)}}},[t("img",{attrs:{src:"".concat(e.$lw.imagePath,"/author/images/icons/small/trash.svg")}}),e._v(" "),t("span",{staticClass:"lbl-small weight-500 grey2"},[e._v("Delete User")])]):e._e()])])])}),[function(){var e=this._self._c;return e("div",[e("div",{staticClass:"form-lbl"},[this._v("No actions available")])])}],!1,null,null,null).exports},3318:(e,t,s)=>{s.d(t,{Z:()=>U});s(21249),s(57327),s(41539),s(68309);var r=s(15861),a=s(93433),i=s(64687),n=s.n(i),o=(s(69826),s(92222),s(26699),s(32023),s(2707),s(69600),s(89554),s(54747),s(56977),s(54678),s(57658),s(34553),s(40561),s(47907)),l=s.n(o),c=s(23002),u=s(97920),d=s(93949),m=s(56249),h=s(44035),p=s(11180),g=(s(79753),s(47042),s(283)),f=s.n(g),v=s(14351),w=s(82995);const _={name:"UserRoleEnrollCourses",components:{ExtraInfo:s(73072).Z,AuthorSideformSection:v.Z},mixins:[h.Z,p.Z],props:{seatGroup:{type:Object,default:function(){return null}}},data:function(){return{addNewCourse:!1,userCourseToEnroll:{titleId:"",price:0},userCoursesToEnroll:[],justificationMessage:"Added by admin",addUserToSeat:!1,showAllCoursesList:!1,allCoursesSelected:!1}},computed:{showOccupySeat:function(){var e,t;return this.userGroupMode&&!this.isGroup&&!1===(null!==(e=null===(t=this.seatGroup.settings)||void 0===t?void 0:t.automationAddToSeat)&&void 0!==e&&e)},showEnrollToCoursesForGroups:function(){var e,t,s,r;return!!this.userGroupMode&&(this.isGroup?!1===(null!==(s=null===(r=this.seatGroup.settings)||void 0===r?void 0:r.enrollUsersOnCoursesWhenTheyJoinGroup)&&void 0!==s&&s)&&this.canSelectCourses:this.addUserToSeat&&!1===(null!==(e=null===(t=this.seatGroup.settings)||void 0===t?void 0:t.enrollUsersOnCoursesWhenTheyJoinGroup)&&void 0!==e&&e))},showPlusBox:function(){return this.userCoursesToEnroll.length>0&&!1===this.addNewCourse},canSelectCourses:function(){var e=this.userCoursesAvailableToEnroll.filter((function(e){return""!==e.id})).length>0;if(this.isGroup){var t,s,r,a=null===(t=this.seatGroup)||void 0===t?void 0:t.courses,i=null===(s=this.seatGroup)||void 0===s||null===(r=s.settings)||void 0===r?void 0:r.enrollUsersOnCoursesWhenTheyJoinGroup;return e&&a.length>0&&!i}return e},userCoursesAvailableToEnroll:function(){var e={id:"",titleId:"",title:"Select a course"},t=[];if(this.userGroupMode){var s=this.seatGroup.courses,r=this.coursesAllowed.filter((function(e){return s.includes(e.id)}));return[e,{id:"",titleId:"_all_courses_",title:"All courses"}].concat((0,a.Z)(r),[{id:"",titleId:"_custom_list_",title:"Custom list"}])}return this.userCoursesToEnroll.length>0?(t=this.userCoursesToEnroll.map((function(e){return e.titleId})),[e].concat((0,a.Z)(this.coursesAllowed.filter((function(e){return!1===t.includes(e.titleId)}))))):[e].concat((0,a.Z)(this.coursesAllowed))},userGroupMode:function(){return null!==this.seatGroup},isGroup:function(){return null!==this.seatGroup&&this.seatGroup.type===w.tf},customListBind:{get:function(){return this.addUserToSeat?this.userCoursesToEnroll.map((function(e){return e.titleId})):[]},set:function(e){this.userCoursesToEnroll=e.map((function(e){return{titleId:e,price:0}}))}}},watch:{userCoursesToEnroll:{deep:!0,immediate:!0,handler:function(){this.$emit("changeUserCoursesToEnroll",{courses:this.userCoursesToEnroll,justificationMessage:this.justificationMessage})}},justificationMessage:{handler:function(){this.$emit("changeUserCoursesToEnroll",{courses:this.userCoursesToEnroll,justificationMessage:this.justificationMessage})}}},created:function(){this.userGroupMode&&(this.justificationMessage="")},methods:{userCoursesAvailableToEnrollExcept:function(e){var t=this.userCoursesAvailableToEnroll.filter((function(t){return t.titleId!==e})).map((function(e){return e.titleId}));return this.coursesAllowed.filter((function(s){return t.includes(s.titleId)||s.titleId===e}))},courseIsPaid:function(e){var t=this.coursesAllowed.find((function(t){return t.titleId===e}));return t&&"paid"===t.status},addEmptyCourseClick:function(){this.addCourse(),this.addNewCourse=!0},addCourse:function(){var e=this;if(""!==this.userCourseToEnroll.titleId){if("_custom_list_"===this.userCourseToEnroll.titleId)return this.userCoursesToEnroll=[],void(this.showAllCoursesList=!0);if(this.showAllCoursesList=!1,"_all_courses_"!==this.userCourseToEnroll.titleId){this.userGroupMode&&(this.userCoursesToEnroll=[]);var t=f()(this.coursesAllowed.find((function(t){return t.titleId===e.userCourseToEnroll.titleId})));if(null!==t&&!(this.userCoursesToEnroll.findIndex((function(t){return t.titleId===e.userCourseToEnroll.titleId}))>0)){var s;if(0!==this.userCourseToEnroll.price||this.userGroupMode)this.userGroupMode&&(this.userCourseToEnroll.price=0,t.price=0);else this.userCourseToEnroll.price=null!==(s=t.price)&&void 0!==s?s:0;this.userCoursesToEnroll.push(t),this.userGroupMode||(this.addNewCourse=!1,this.userCourseToEnroll.titleId="",this.userCourseToEnroll.price=0)}}else this.addAllCourses()}},removeCourse:function(e){var t=this.userCoursesToEnroll.findIndex((function(t){return t.titleId===e}));t<0||this.userCoursesToEnroll.splice(t,1)},updateCourse:function(e,t){var s,r=this.coursesAllowed.find((function(e){return e.titleId===t})),a=this.userCoursesToEnroll[e];a.titleId=r.titleId,a.price=null!==(s=r.price)&&void 0!==s?s:0},emptyCourseSelection:function(){this.userCourseToEnroll.titleId="",this.userCourseToEnroll.price=0,this.addNewCourse=!1},updateAddUserToSeat:function(){this.$emit("addUserToSeat",this.addUserToSeat)},selectAllCourses:function(e){this.allCoursesSelected=e,e?this.addAllCourses():this.userCoursesToEnroll=[]},addAllCourses:function(){var e=this;this.userCoursesToEnroll=[],this.userCoursesAvailableToEnroll.filter((function(e){return""!==e.id})).forEach((function(t){var s=f()(e.coursesAllowed.find((function(e){return e.titleId===t.titleId})));null!==s&&(s.price=0,e.userCoursesToEnroll.push(s))}))}}};var C=s(51900);const b=(0,C.Z)(_,(function(){var e=this,t=e._self._c;return t("div",[e.showOccupySeat?t("author-sideform-section",{attrs:{title:"Occupy a seat",description:"Select whether the user will occupy a seat."}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.addUserToSeat,expression:"addUserToSeat"}],staticClass:"checkmark-checkbox",attrs:{id:"addUserToSeatCheckbox",type:"checkbox"},domProps:{checked:Array.isArray(e.addUserToSeat)?e._i(e.addUserToSeat,null)>-1:e.addUserToSeat},on:{change:[function(t){var s=e.addUserToSeat,r=t.target,a=!!r.checked;if(Array.isArray(s)){var i=e._i(s,null);r.checked?i<0&&(e.addUserToSeat=s.concat([null])):i>-1&&(e.addUserToSeat=s.slice(0,i).concat(s.slice(i+1)))}else e.addUserToSeat=a},function(t){return e.updateAddUserToSeat()}]}}),e._v(" "),t("label",{staticClass:"v-middle",attrs:{for:"addUserToSeatCheckbox"}}),e._v(" "),t("div",{staticClass:"settings-lbl v-middle"},[e._v("Add user to seat")])]):e._e(),e._v(" "),e.userGroupMode?t("author-sideform-section",{attrs:{title:"Select courses",description:"Select one or more courses to enroll the user in."}},[t("label",{staticClass:"form-select-lbl select-lbl",staticStyle:{"margin-top":"5px"}},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.userCourseToEnroll.titleId,expression:"userCourseToEnroll.titleId"}],staticClass:"form-text-input form-big-text-input",class:{disabled:!e.showEnrollToCoursesForGroups},attrs:{disabled:!e.showEnrollToCoursesForGroups},on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.userCourseToEnroll,"titleId",t.target.multiple?s:s[0])},e.addCourse]}},e._l(e.userCoursesAvailableToEnroll,(function(s){return t("option",{key:s.titleId,domProps:{value:s.titleId}},[e._v(e._s(s.title)+"\n                ")])})),0)]),e._v(" "),t("div",{staticClass:"line-effect"}),e._v(" "),e.showAllCoursesList?t("div",[t("p",{staticClass:"learnworlds-sideform-section-row-lbl",staticStyle:{"margin-top":"7px","padding-left":"10px"}},[t("a",{directives:[{name:"show",rawName:"v-show",value:!e.allCoursesSelected,expression:"!allCoursesSelected"}],on:{click:function(t){return t.preventDefault(),e.selectAllCourses(!0)}}},[e._v("Select all courses")]),e._v(" "),t("a",{directives:[{name:"show",rawName:"v-show",value:e.allCoursesSelected,expression:"allCoursesSelected"}],on:{click:function(t){return t.preventDefault(),e.selectAllCourses(!1)}}},[e._v("Deselect all courses")])]),e._v(" "),t("div",{staticClass:"checkboxes-list"},e._l(e.userCoursesAvailableToEnroll.filter((function(e){return""!==e.id})),(function(s){return t("div",{key:s.id,staticClass:"flex-wrapper with-checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.customListBind,expression:"customListBind"}],staticClass:"checkmark-checkbox",attrs:{type:"checkbox",id:s.id},domProps:{value:s.titleId,checked:Array.isArray(e.customListBind)?e._i(e.customListBind,s.titleId)>-1:e.customListBind},on:{change:function(t){var r=e.customListBind,a=t.target,i=!!a.checked;if(Array.isArray(r)){var n=s.titleId,o=e._i(r,n);a.checked?o<0&&(e.customListBind=r.concat([n])):o>-1&&(e.customListBind=r.slice(0,o).concat(r.slice(o+1)))}else e.customListBind=i}}}),e._v(" "),t("label",{attrs:{for:s.id}}),e._v(" "),t("div",{staticClass:"settings-small-lbl v-middle"},[e._v(e._s(s.title))])])})),0)]):e._e(),e._v(" "),e.isGroup&&!e.showEnrollToCoursesForGroups?t("extra-info",{staticClass:"mt-20",scopedSlots:e._u([{key:"extra-info-frame-title",fn:function(){return[e._v("\n                Auto-enrolment setting is enabled\n            ")]},proxy:!0}],null,!1,406520698)},[e._v(" "),t("p",[e._v("When new members join the group, they will automatically be enrolled in the group's courses.")])]):e._e()],1):e._e(),e._v(" "),e.userGroupMode?e._e():t("author-sideform-section",{attrs:{title:"Enroll in courses",description:"Enroll the user in courses and define the selling price for this user."}},[t("div",{staticClass:"mb-25"},[t("div",{staticClass:"form-row mb-0"},[t("div",{staticClass:"learnworlds-sideform-section-row no-margin-top mb-0"},[t("div",{staticClass:"learnworlds-sideform-section-row-lbl sideform-col sideform-col_7"},[t("div",{staticClass:"form-lbl"},[e._v("Course")])]),e._v(" "),t("div",{staticClass:"learnworlds-sideform-section-row-lbl sideform-col sideform-col_4 with-line-effect"},[t("div",{staticClass:"form-lbl"},[e._v("Price")])])])]),e._v(" "),t("div",{staticClass:"form-row with-line-effect mb-0"},e._l(e.userCoursesToEnroll,(function(s,r){return t("div",{key:s.titleId,staticClass:"learnworlds-sideform-section-row no-margin-top mb-10"},[t("div",{staticClass:"learnworlds-sideform-section-row-lbl sideform-col sideform-col_7"},[t("label",{staticClass:"form-select-lbl select-lbl w-full"},[t("select",{directives:[{name:"model",rawName:"v-model",value:s.titleId,expression:"userCourse.titleId"}],staticClass:"form-text-input form-big-text-input",on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(s,"titleId",t.target.multiple?r:r[0])},function(t){return e.updateCourse(r,s.titleId)}]}},e._l(e.userCoursesAvailableToEnrollExcept(s.titleId),(function(s){return t("option",{key:s.titleId,domProps:{value:s.titleId}},[e._v("\n                                    "+e._s(s.title)+"\n                                ")])})),0)])]),e._v(" "),t("div",{staticClass:"learnworlds-sideform-section-row-lbl sideform-col sideform-col_4 with-line-effect"},[e.courseIsPaid(s.titleId)?t("input",{directives:[{name:"model",rawName:"v-model",value:s.price,expression:"userCourse.price"}],staticClass:"form-text-input form-big-text-input",attrs:{placeholder:"e.g. 20",type:"number",title:""},domProps:{value:s.price},on:{change:e.addCourse,input:function(t){t.target.composing||e.$set(s,"price",t.target.value)}}}):t("div",{staticClass:"extra-info-frame-descr"},[e._v("Free course")]),e._v(" "),t("div",{staticClass:"line-effect"})]),e._v(" "),t("div",{staticClass:"learnworlds-sideform-section-row-lbl sideform-col sideform-col_1"},[t("a",{staticClass:"inline-block",attrs:{href:"#"}},[t("img",{staticClass:"w-20 show-on-hover",attrs:{src:e.imagePath+"/author/images/icons/small/trash.svg",alt:"delete"},on:{click:function(t){return e.removeCourse(s.titleId)}}})])])])})),0),e._v(" "),e.addNewCourse||0===e.userCoursesToEnroll.length?t("div",{staticClass:"form-row with-line-effect mb-0"},[t("div",{staticClass:"learnworlds-sideform-section-row align-center no-margin-top mb-10"},[t("div",{staticClass:"learnworlds-sideform-section-row-lbl sideform-col sideform-col_7"},[t("label",{staticClass:"form-select-lbl select-lbl w-full"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.userCourseToEnroll.titleId,expression:"userCourseToEnroll.titleId"}],staticClass:"form-text-input form-big-text-input",on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.userCourseToEnroll,"titleId",t.target.multiple?s:s[0])},e.addCourse]}},e._l(e.userCoursesAvailableToEnroll,(function(s){return t("option",{key:s.titleId,domProps:{selected:""===s.titleId,value:s.titleId}},[e._v("\n                                    "+e._s(s.title)+"\n                                ")])})),0)])]),e._v(" "),t("div",{staticClass:"learnworlds-sideform-section-row-lbl sideform-col sideform-col_4 with-line-effect"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.userCourseToEnroll.price,expression:"userCourseToEnroll.price"}],staticClass:"form-text-input form-big-text-input",attrs:{placeholder:"e.g. 20",type:"number",title:""},domProps:{value:e.userCourseToEnroll.price},on:{change:e.addCourse,input:function(t){t.target.composing||e.$set(e.userCourseToEnroll,"price",t.target.value)}}}),e._v(" "),t("div",{staticClass:"line-effect"})]),e._v(" "),t("div",{staticClass:"learnworlds-sideform-section-row-lbl sideform-col sideform-col_1"},[t("a",{attrs:{href:"#"}},[t("img",{staticClass:"w-20 lw-opaque-0_6 show-on-hover",attrs:{src:e.imagePath+"/author/images/icons/small/trash.svg"},on:{click:e.emptyCourseSelection}})])])])]):e._e(),e._v(" "),e.showPlusBox?t("div",{staticClass:"form-row ml-15"},[t("a",{staticClass:"lbl-small weight-500 lbl-author",on:{click:e.addEmptyCourseClick}},[e._v("Add another course")])]):e._e(),e._v(" "),e.userCoursesToEnroll.length>0?t("div",{staticClass:"form-row with-line-effect mb-0"},[t("div",{staticClass:"form-lbl"},[e._v("Enter justification message")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.justificationMessage,expression:"justificationMessage"}],staticClass:"form-text-input form-big-text-input",attrs:{type:"text"},domProps:{value:e.justificationMessage},on:{input:function(t){t.target.composing||(e.justificationMessage=t.target.value)}}})]):e._e()])])],1)}),[],!1,null,null,null).exports;var y=s(92123),S=(s(67541),function(e){return{id:e.id,title:e.value}}),P=function(e,t){return e.title.localeCompare(t.title)};const T={name:"AddUpdateUserRolesSection",components:{Multiselect:l(),UserRoleEnrollCourses:b},mixins:[h.Z,p.Z],props:{user:{type:Object,default:function(){return null}},roleDataErrors:{type:Object,default:function(){return null}},userRoles:{type:Array,default:function(){return[]}},roleId:{type:String,default:""},seatGroup:{type:Object,default:function(){return null}}},data:function(){return{analyticSegments:[],managerialSeats:[],managerialUserGroups:[],channels:[],roleData:{activeRole:{key:"",name:"",parentRole:"",isInstructor:!1,error:!1},isInstructorIn:[],isModeratorIn:[],segmentSettings:{segmentId:null,manage_courses:[],error:!1},seatSettings:{manage_seats:[]},userGroupSettings:{manage_user_groups:[]},userCoursesToEnroll:{courses:[],justificationMessage:""},addToSeat:!1},addNewCourse:!1,moderatorInValue:[],newInstructorCourse:{courseTitleId:"",percentage:"0"},managersAccess:[]}},computed:{showUserEnrollSection:function(){return this.roleData.activeRole.parentRole===this.$lwGates.state.allUserRoles.user&&null===this.user||this.userGroupMode&&null===this.user},showComissionDiv:function(){return this.roleData.activeRole.parentRole===this.systemUserRoles.instructor||this.adminsCommission&&(this.roleData.activeRole.parentRole===this.systemUserRoles.admin||null!==this.user&&this.user.userRole===this.systemUserRoles.lwAdmin)},showGroupsAndSeats:function(){return this.roleData.activeRole.parentRole===this.systemUserRoles.seatManager&&this.canViewGroupsAndSeats},showCommunityGroups:function(){return this.roleData.activeRole.parentRole===this.systemUserRoles.seatManager&&this.canViewSpaces},isInstructorInWithoutDeleted:function(){var e=this;return 0===this.roleData.isInstructorIn.length?[]:this.roleData.isInstructorIn.filter((function(t){return!!e.courses.find((function(e){return e.id===t.courseId}))}))},instructorAvailableCourses:function(){var e={id:"",titleId:"",title:"Select a course"},t=[];return this.roleData.isInstructorIn.length>0?(t=this.roleData.isInstructorIn.map((function(e){return e.courseId})),[e].concat((0,a.Z)(this.courses.filter((function(e){return!1===t.includes(e.id)}))))):[e].concat((0,a.Z)(this.courses))},managerialCourses:function(){return this.courses.map((function(e){return{id:e.id,title:e.title}}))},showPlusBox:function(){return this.isInstructorInWithoutDeleted.length>0&&!1===this.addNewCourse||this.roleData.isInstructorIn.length>0&&!1===this.addNewCourse},userGroupMode:function(){return null!==this.seatGroup},availableChannels:function(){var e,t;return null!==(e=null===(t=this.channels)||void 0===t?void 0:t.map((function(e){return{id:e.id,title:e.name}})).sort(P))&&void 0!==e?e:[]},canViewGroupsAndSeats:function(){var e=this.roleData.activeRole.key;return this.managersAccess.hasOwnProperty(e)&&this.managersAccess[e].hasViewGroupAndSeats},canViewSpaces:function(){var e=this.roleData.activeRole.key;return this.managersAccess.hasOwnProperty(e)&&this.managersAccess[e].hasModerateCommunityPosts}},watch:{roleData:{deep:!0,handler:function(){this.$emit("changeRoleData",this.roleData)}},moderatorInValue:{deep:!0,handler:function(){this.roleData.isModeratorIn=this.moderatorInValue.map((function(e){return e.id}))}}},beforeMount:function(){var e=this;return(0,r.Z)(n().mark((function t(){var s,r,a,i,o,l,h,p,g,f,v,_,C,b,y,T;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.Z.getSegments().then((function(t){if(t.data.errors&&t.data.errors.length>0)return showMessage("alert","Error fetching segment segments",t.data.errors.map((function(e){return e.message})).join(", "),[{name:"OK"}]);e.analyticSegments=t.data.bookmarks})).catch((function(e){return showMessage("alert","Error fetching segment segments",e.message,[{name:"OK"}])}));case 2:return t.next=4,(0,d.DS)(u.Z.getUserGroupsSummary(),{title:"Error fetching user groups"});case 4:return l=t.sent,t.next=7,(0,d.DS)(m.Z.getCommunityChannels(),{title:"Error fetching user spaces"}).catch((function(){e.channels=[]}));case 7:return h=t.sent,e.channels=null!==(s=null==h||null===(r=h.data)||void 0===r?void 0:r.groups)&&void 0!==s?s:[],t.next=11,c.Z.getManagerialRolesAccess();case 11:if(p=t.sent,e.managersAccess=null!==(a=null==p||null===(i=p.data)||void 0===i?void 0:i.data)&&void 0!==a?a:[],e.managerialSeats=l.data.userGroups.filter((function(e){return e.type===w.ab})).map(S).sort(P),e.managerialUserGroups=l.data.userGroups.filter((function(e){return e.type===w.tf})).map(S).sort(P),g="user",null!==(o=e.user)&&void 0!==o&&o.userRole?g=null===(f=e.user)||void 0===f?void 0:f.userRole:e.roleId&&(g=e.roleId),e.userRoles.forEach((function(e){var t=e.roles.find((function(e){return e.key===g}));t&&(v=t)})),void 0!==v?e.$set(e.roleData,"activeRole",v):(_=e.userRoles[0].roles.find((function(e){return!0===e.isSelectableByPackage})))&&e.$set(e.roleData,"activeRole",_),null!==e.user){t.next=21;break}return t.abrupt("return");case 21:e.user.hasOwnProperty("isInstructorIn")&&null!==e.user.isInstructorIn&&e.$set(e.roleData,"isInstructorIn",e.user.isInstructorIn.map((function(e){return{courseId:e.courseId,courseTitleId:e.courseTitleId,percentage:(100*parseFloat(e.percentage)).toFixed(2)}}))),e.user.hasOwnProperty("isModeratorIn")&&null!==e.user.isModeratorIn&&(e.$set(e.roleData,"isModeratorIn",e.user.isModeratorIn),e.moderatorInValue=e.user.isModeratorIn.map((function(t){var s;return{id:t,title:null===(s=e.channels.find((function(e){return t===e.id})))||void 0===s?void 0:s.name}})).filter((function(t){var s=t.id;return e.channels.find((function(e){return s===e.id}))}))),e.user.hasOwnProperty("segmentSettings")&&null!==e.user.segmentSettings&&(b=[],(null===(C=e.user.segmentSettings.manage_courses)||void 0===C?void 0:C.length)>0&&(e.user.segmentSettings.manage_courses.forEach((function(t){var s=e.courses.find((function(e){return e.id===t}));b.push({id:s.id,title:s.title})})),e.$set(e.roleData.segmentSettings,"manage_courses",b)),e.roleData.segmentSettings.segmentId=e.user.segmentSettings.segmentId),e.user.hasOwnProperty("userGroupSettings")&&null!==e.user.userGroupSettings&&(y=[],T=[],e.user.userGroupSettings.forEach((function(t){var s=e.managerialSeats.find((function(e){return e.id===t}));s&&y.push({id:s.id,title:s.title});var r=e.managerialUserGroups.find((function(e){return e.id===t}));r&&T.push({id:r.id,title:r.title})})),y=y.sort((function(e,t){return e.title.localeCompare(t.title)})),e.$set(e.roleData.seatSettings,"manage_seats",y),T=T.sort((function(e,t){return e.title.localeCompare(t.title)})),e.$set(e.roleData.userGroupSettings,"manage_user_groups",T));case 25:case"end":return t.stop()}}),t)})))()},methods:{getInstructorCoursesDropDown:function(e){var t=this.roleData.isInstructorIn.filter((function(t){return t.courseTitleId!==e})).map((function(e){return e.courseTitleId}));return this.courses.filter((function(e){return!1===t.includes(e.titleId)}))},addEmptyCourseClick:function(){this.addCourse(),this.addNewCourse=!0},addCourse:function(){var e=this;if(""!==this.newInstructorCourse.courseTitleId){var t=this.courses.find((function(t){return t.titleId===e.newInstructorCourse.courseTitleId}));this.roleData.isInstructorIn.push({courseId:t.id,courseTitleId:this.newInstructorCourse.courseTitleId,percentage:this.newInstructorCourse.percentage}),this.newInstructorCourse.courseTitleId="",this.newInstructorCourse.percentage="",this.addNewCourse=!1}},removeCourse:function(e){var t=this.roleData.isInstructorIn.findIndex((function(t){return t.courseTitleId===e}));t<0||this.roleData.isInstructorIn.splice(t,1)},updateCourse:function(e){var t=this.courses.find((function(t){return t.titleId===e})),s=this.roleData.isInstructorIn.find((function(t){return t.courseTitleId===e}));s.courseId=t.id,s.percentage=0},emptyInstructorCourseSelection:function(){this.newInstructorCourse.courseTitleId="",this.newInstructorCourse.percentage="",this.addNewCourse=!1},courseIsPaid:function(e){var t=this.courses.find((function(t){return t.titleId===e}));return t&&"paid"===t.status},getSegments:function(){var e=this;return(0,r.Z)(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c.Z.getSegments().then((function(t){if(t.data.errors&&t.data.errors.length>0)return showMessage("alert","Error fetching segment segments",t.data.errors.map((function(e){return e.message})).join(", "),[{name:"OK"}]);e.analyticSegments=t.data.bookmarks})).catch((function(e){return showMessage("alert","Error fetching segment segments",e.message,[{name:"OK"}])}));case 1:case"end":return t.stop()}}),t)})))()},goToSeatsPage:function(){if(!this.$lwGates.hasSeatOfferingManagePermission())return showMessage("info","Seat offerings","You have no access to proceed. To access this page the 'Manage user groups & multiple seat offerings' permission is required.",[{name:"OK"}]);window.authorController.redirectTo((0,y.O)(w.ab))},goToUserGroupsPage:function(){if(!this.$lwGates.hasSeatOfferingManagePermission())return showMessage("info","User groups","You have no access to proceed. To access this page the 'Manage user groups & multiple seat offerings' permission is required.",[{name:"OK"}]);window.authorController.redirectTo((0,y.O)(w.tf))},changeUserCoursesToEnroll:function(e){this.$set(this.roleData,"userCoursesToEnroll",{justificationMessage:e.justificationMessage,courses:e.courses.map((function(e){return{titleId:e.titleId,price:e.price}}))})},updateAddUserToSeat:function(e){this.roleData.addToSeat=e}}};const U=(0,C.Z)(T,(function(){var e=this,t=e._self._c;return t("div",[null!==e.user&&e.user.userRole===e.systemUserRoles.lwAdmin||e.userGroupMode?e._e():t("div",{staticClass:"section-card-row-small"},[e._m(0),e._v(" "),t("div",{staticClass:"section-card-part-small"},[t("div",{staticClass:"mb-25"},[t("div",{staticClass:"form-row with-line-effect"},[t("div",{staticClass:"form-lbl"},[e._v("Role")]),e._v(" "),t("label",{staticClass:"form-select-lbl select-lbl"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.roleData.activeRole,expression:"roleData.activeRole"}],staticClass:"form-text-input form-big-text-input",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.roleData,"activeRole",t.target.multiple?s:s[0])}}},e._l(e.userRoles,(function(s){return t("optgroup",{key:s.label,attrs:{label:s.label}},e._l(s.roles,(function(s){return t("option",{key:s.key,attrs:{disabled:!1===s.isSelectableByPackage},domProps:{value:s}},[e._v(e._s(s.name)+"\n                                ")])})),0)})),0)]),e._v(" "),e.roleDataErrors.roleRequired?t("span",{staticClass:"error-message"},[e._v("Please specify a user role")]):e._e()])])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showCommunityGroups,expression:"showCommunityGroups"}],staticClass:"section-card-row-small"},[e._m(1),e._v(" "),t("div",{staticClass:"section-card-part-small"},[t("div",{staticClass:"mb-25"},[t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-lbl"},[e._v("Assigned community spaces")]),e._v(" "),t("multiselect",{attrs:{"close-on-select":!0,multiple:!0,options:e.availableChannels,label:"title",placeholder:"Select community spaces","track-by":"id"},model:{value:e.moderatorInValue,callback:function(t){e.moderatorInValue=t},expression:"moderatorInValue"}})],1)])])]),e._v(" "),e.showComissionDiv?t("div",{staticClass:"section-card-row-small"},[t("div",{staticClass:"section-card-part-small"},[t("h3",{staticClass:"inner-title-small"},[e._v("Courses")]),e._v(" "),e.roleData.activeRole.parentRole===e.systemUserRoles.admin||null!==e.user&&e.user.userRole===e.systemUserRoles.lwAdmin?t("p",{staticClass:"inner-subtitle"},[null===e.user?[e._v("Assign courses to the user and define the commission that she/he will receive for every course.\n                    The user will also receive all the instructor’s notifications for these courses.")]:[e._v("Assign courses to the user and define the commission that she/he will receive for every course, or remove courses and the respective commission from the user.\n                    The user will also receive all the instructor’s notifications for these courses.")]],2):t("p",{staticClass:"inner-subtitle"},[null===e.user?[e._v("\n                    Assign courses to the user and define the commission that she/he will receive for every course.\n                    The user will see data only for the selected courses."),t("br"),e._v("If the user has the permission “Create course”\n                    then all the courses that the user creates will be auto-assigned to him/her.\n                ")]:[e._v("\n                    Update the courses and the courses commission for this user. The user will see data only for the selected\n                    courses."),t("br"),e._v("If the user has the permission “Create course” then all the courses that the user creates will be\n                    auto-assigned to him/her.\n                ")]],2)]),e._v(" "),t("div",{staticClass:"section-card-part-small"},[t("div",{staticClass:"mb-25"},[e._m(2),e._v(" "),t("div",{staticClass:"form-row with-line-effect mb-0"},e._l(e.isInstructorInWithoutDeleted,(function(s){return e.isInstructorInWithoutDeleted.length>0?t("div",{key:s.courseId,staticClass:"learnworlds-sideform-section-row no-margin-top mb-10"},[t("div",{staticClass:"learnworlds-sideform-section-row-lbl sideform-col sideform-col_7"},[t("label",{staticClass:"form-select-lbl select-lbl w-full"},[t("select",{directives:[{name:"model",rawName:"v-model",value:s.courseTitleId,expression:"instructorCourse.courseTitleId"}],staticClass:"form-text-input form-big-text-input",on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(s,"courseTitleId",t.target.multiple?r:r[0])},function(t){return e.updateCourse(s.courseTitleId)}]}},e._l(e.getInstructorCoursesDropDown(s.courseTitleId),(function(s){return t("option",{key:s.titleId,domProps:{value:s.titleId}},[e._v("\n                                        "+e._s(s.title)+"\n                                    ")])})),0)])]),e._v(" "),t("div",{staticClass:"learnworlds-sideform-section-row-lbl sideform-col sideform-col_4 with-line-effect"},[e.courseIsPaid(s.courseTitleId)?t("input",{directives:[{name:"model",rawName:"v-model",value:s.percentage,expression:"instructorCourse.percentage"}],staticClass:"form-text-input form-big-text-input",attrs:{placeholder:"e.g. 25%",type:"number",max:"100",min:"0"},domProps:{value:s.percentage},on:{change:e.addCourse,input:function(t){t.target.composing||e.$set(s,"percentage",t.target.value)}}}):t("div",{staticClass:"extra-info-frame-descr"},[e._v("Free course")]),e._v(" "),t("div",{staticClass:"line-effect"}),e._v(" "),e.courseIsPaid(s.courseTitleId)?t("span",{staticClass:"settings-lbl input-unit"},[e._v("%")]):e._e()]),e._v(" "),t("div",{staticClass:"learnworlds-sideform-section-row-lbl sideform-col sideform-col_1"},[t("a",{staticClass:"inline-block",attrs:{href:"#"}},[t("img",{staticClass:"w-20 show-on-hover",attrs:{src:e.imagePath+"/author/images/icons/small/trash.svg"},on:{click:function(t){return e.removeCourse(s.courseTitleId)}}})])])]):e._e()})),0),e._v(" "),e.addNewCourse||0===e.roleData.isInstructorIn.length?t("div",{staticClass:"form-row with-line-effect mb-0"},[t("div",{staticClass:"learnworlds-sideform-section-row align-center no-margin-top mb-10"},[t("div",{staticClass:"learnworlds-sideform-section-row-lbl sideform-col sideform-col_7"},[t("label",{staticClass:"form-select-lbl select-lbl w-full"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.newInstructorCourse.courseTitleId,expression:"newInstructorCourse.courseTitleId"}],staticClass:"form-text-input form-big-text-input",on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.newInstructorCourse,"courseTitleId",t.target.multiple?s:s[0])},e.addCourse]}},e._l(e.instructorAvailableCourses,(function(s){return t("option",{key:s.titleId,domProps:{selected:""===s.titleId,value:s.titleId}},[e._v(e._s(s.title)+"\n                                    ")])})),0)])]),e._v(" "),t("div",{staticClass:"learnworlds-sideform-section-row-lbl sideform-col sideform-col_4 with-line-effect"},[e.courseIsPaid(e.newInstructorCourse.courseTitleId)||""===e.newInstructorCourse.courseTitleId?t("input",{directives:[{name:"model",rawName:"v-model",value:e.newInstructorCourse.percentage,expression:"newInstructorCourse.percentage"}],staticClass:"form-text-input form-big-text-input",attrs:{max:"100",min:"0",placeholder:"e.g. 25",step:"1",type:"number"},domProps:{value:e.newInstructorCourse.percentage},on:{change:e.addCourse,input:function(t){t.target.composing||e.$set(e.newInstructorCourse,"percentage",t.target.value)}}}):e._e(),e._v(" "),t("div",{staticClass:"line-effect"})]),e._v(" "),t("div",{staticClass:"learnworlds-sideform-section-row-lbl sideform-col sideform-col_1"},[t("a",{attrs:{href:"#"}},[t("img",{staticClass:"w-20 lw-opaque-0_6 show-on-hover",attrs:{src:e.imagePath+"/author/images/icons/small/trash.svg"},on:{click:e.emptyInstructorCourseSelection}})])])])]):e._e(),e._v(" "),e.roleDataErrors.instructorError?t("div",{staticClass:"form-row with-line-effect"},[t("span",{staticClass:"error-message"},[e._v("You must select at least one course for the instructor")])]):e._e(),e._v(" "),e.roleDataErrors.invalidPercentage?t("div",{staticClass:"form-row with-line-effect"},[t("span",{staticClass:"error-message"},[e._v("Course revenue is invalid")])]):e._e(),e._v(" "),e.showPlusBox?t("div",{staticClass:"form-row ml-15"},[t("a",{staticClass:"lbl-small weight-500 lbl-author",on:{click:e.addEmptyCourseClick}},[e._v("Add another course")])]):e._e()])])]):e._e(),e._v(" "),e.roleData.activeRole.parentRole===e.$lwGates.state.allUserRoles.segment?t("div",{staticClass:"section-card-row-small"},[t("div",{staticClass:"section-card-part-small"},[t("h3",{staticClass:"inner-title-small"},[e._v("User segment")]),e._v(" "),null===e.user?t("p",{staticClass:"inner-subtitle"},[e._v("\n                Assign a User Segment to the user. She/he will see data only for the users of this segment."),t("br"),e._v("You can create a new User Segment  "),t("a",{attrs:{href:"/author/usersegments"}},[e._v("here")]),e._v(".\n            ")]):t("p",{staticClass:"inner-subtitle"},[e._v("\n                Update the User Segment. The user will see data only for the users of this segment."),t("br"),e._v("You can create a new User Segment "),t("a",{attrs:{href:"/author/usersegments"}},[e._v("here")]),e._v(".\n            ")])]),e._v(" "),t("div",{staticClass:"section-card-part-small"},[t("div",{staticClass:"mb-25"},[t("div",{staticClass:"form-row with-line-effect"},[t("div",{staticClass:"form-lbl"},[e._v("Assigned user segment")]),e._v(" "),t("label",{staticClass:"form-select-lbl select-lbl"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.roleData.segmentSettings.segmentId,expression:"roleData.segmentSettings.segmentId"}],staticClass:"form-text-input form-big-text-input",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.roleData.segmentSettings,"segmentId",t.target.multiple?s:s[0])}}},[t("option",{domProps:{value:null}},[e._v("Select user segment")]),e._v(" "),e._l(e.analyticSegments,(function(s){return t("option",{key:s.id,domProps:{value:s.id}},[e._v(e._s(s.name))])}))],2)]),e._v(" "),e.roleDataErrors.segmentSegment?t("span",{staticClass:"error-message"},[e._v("This field is required!")]):e._e()])])])]):e._e(),e._v(" "),e.roleData.activeRole.parentRole===e.$lwGates.state.allUserRoles.segment?t("div",{staticClass:"section-card-row-small"},[t("div",{staticClass:"section-card-part-small"},[t("h3",{staticClass:"inner-title-small"},[e._v("Courses")]),e._v(" "),null===e.user?t("p",{staticClass:"inner-subtitle"},[e._v("\n                Select the courses for which the user will be able to edit Gradebook, Assignments and Certifications."),t("br"),e._v("The permissions “Manage gradebook”, “Manage Assignments”, and “Manage certifications” are also required.\n            ")]):t("p",{staticClass:"inner-subtitle"},[e._v("\n                Update the courses for which the user will be able to edit Gradebook, Assignments and Certifications."),t("br"),e._v("The permissions “Manage gradebook”, “Manage Assignments”, and “Manage certifications” are also required.\n            ")])]),e._v(" "),t("div",{staticClass:"section-card-part-small"},[t("div",{staticClass:"mb-25"},[t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-lbl"},[e._v("Courses allowed to edit")]),e._v(" "),t("multiselect",{attrs:{"close-on-select":!0,multiple:!0,options:e.managerialCourses,label:"title",placeholder:"Select courses","track-by":"id"},model:{value:e.roleData.segmentSettings.manage_courses,callback:function(t){e.$set(e.roleData.segmentSettings,"manage_courses",t)},expression:"roleData.segmentSettings.manage_courses"}})],1)])])]):e._e(),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showGroupsAndSeats,expression:"showGroupsAndSeats"}],staticClass:"section-card-row-small"},[t("div",{staticClass:"section-card-part-small"},[t("h3",{staticClass:"inner-title-small"},[e._v("Seat offerings")]),e._v(" "),t("p",{staticClass:"inner-subtitle"},[e._v("\n                Assign a seat offering to the user. She/he will see data only for the users of the selected seat offerings.\n                You can create a new seat offering "),t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.goToSeatsPage()}}},[e._v("here")]),e._v(".\n            ")])]),e._v(" "),t("div",{staticClass:"section-card-part-small"},[t("div",{staticClass:"mb-25"},[t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-lbl"},[e._v("Assigned seat offerings")]),e._v(" "),t("multiselect",{attrs:{"close-on-select":!0,multiple:!0,options:e.managerialSeats,label:"title",placeholder:"Select seat offerings","track-by":"id"},model:{value:e.roleData.seatSettings.manage_seats,callback:function(t){e.$set(e.roleData.seatSettings,"manage_seats",t)},expression:"roleData.seatSettings.manage_seats"}})],1)])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showGroupsAndSeats,expression:"showGroupsAndSeats"}],staticClass:"section-card-row-small"},[t("div",{staticClass:"section-card-part-small"},[t("h3",{staticClass:"inner-title-small"},[e._v("User groups")]),e._v(" "),t("p",{staticClass:"inner-subtitle"},[e._v("\n        Assign a user group to the user. She/he will see data only for the users of the selected user group.\n\n        You can create a new user group "),t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.goToUserGroupsPage()}}},[e._v("here")]),e._v(".\n      ")])]),e._v(" "),t("div",{staticClass:"section-card-part-small"},[t("div",{staticClass:"mb-25"},[t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-lbl"},[e._v("Assigned user groups")]),e._v(" "),t("multiselect",{attrs:{"close-on-select":!0,multiple:!0,options:e.managerialUserGroups,label:"title",placeholder:"Select user groups","track-by":"id"},model:{value:e.roleData.userGroupSettings.manage_user_groups,callback:function(t){e.$set(e.roleData.userGroupSettings,"manage_user_groups",t)},expression:"roleData.userGroupSettings.manage_user_groups"}})],1)])])]),e._v(" "),e.showUserEnrollSection?t("user-role-enroll-courses",{attrs:{seatGroup:e.seatGroup},on:{changeUserCoursesToEnroll:e.changeUserCoursesToEnroll,addUserToSeat:e.updateAddUserToSeat}}):e._e()],1)}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"section-card-part-small"},[t("h3",{staticClass:"inner-title-small"},[e._v("User role")]),e._v(" "),t("span",{staticClass:"inner-subtitle"},[e._v("Assign a role to the user."),t("br"),e._v("You can create a new\n                User Role "),t("a",{attrs:{href:"/author/user_roles?tab=Overview"}},[e._v("here")]),e._v(". Click “Create new role” to define the data\n                and the platform areas that the users with this role will be able to access.")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"section-card-part-small"},[t("h3",{staticClass:"inner-title-small"},[e._v("Spaces")]),e._v(" "),t("p",{staticClass:"inner-subtitle"},[e._v("\n                Assign spaces to user that he will then manage.\n            ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-row mb-0"},[t("div",{staticClass:"learnworlds-sideform-section-row no-margin-top mb-0"},[t("div",{staticClass:"learnworlds-sideform-section-row-lbl sideform-col sideform-col_7"},[t("div",{staticClass:"form-lbl"},[e._v("Assigned courses")])]),e._v(" "),t("div",{staticClass:"learnworlds-sideform-section-row-lbl sideform-col sideform-col_4 with-line-effect"},[t("div",{staticClass:"form-lbl"},[e._v("Revenue share")])])])])}],!1,null,null,null).exports},72554:(e,t,s)=>{s.d(t,{Z:()=>g});var r=s(93433),a=s(15861),i=s(64687),n=s.n(i),o=(s(57658),s(69826),s(41539),s(57327),s(21249),s(73210),s(74916),s(15306),s(89554),s(54747),s(82772),s(69600),s(24814),s(283)),l=s.n(o),c=s(13952),u=(s(92741),s(60741)),d=s(11180),m=s(48775),h=s(41162);const p={name:"UserTags",components:{MultiSelectPropertyTags:m.Z},mixins:[d.Z],props:{user:{type:Object,default:function(){return null}},sendTags:{default:!0,type:Boolean},readOnly:{default:!1,type:Boolean}},data:function(){return{allTags:[],tags:[],importTags:[],userTags:[]}},mounted:function(){var e=this;return(0,a.Z)(n().mark((function t(){var s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null!==e.user&&e.user.tags&&e.user.tags.length>0&&(e.$set(e,"importTags",l()(e.user.tags)),(s=e.userTags).push.apply(s,(0,r.Z)(l()(e.user.tags)))),t.next=3,c.Z.getTags();case 3:e.allTags=t.sent;case 4:case"end":return t.stop()}}),t)})))()},methods:{addTag:function(e){this.importTags.find((function(t){return t===e}))||(this.importTags.push(e),null!==this.user&&!0===this.sendTags&&this.$lwGates.hasUsersAdvancedPermission()&&this.sendTagChangeToApi(),this.$emit("updateTags",this.importTags))},changeInputTags:function(e){this.$set(this,"importTags",e.map((function(e){return e.trim()})).filter((function(e){return e.replace(/\s/g,"").length>0}))),null!==this.user&&!0===this.sendTags&&this.$lwGates.hasUsersAdvancedPermission()&&this.sendTagChangeToApi(),this.$emit("updateTags",this.importTags)},sendTagChangeToApi:function(){var e=this;return(0,a.Z)(n().mark((function t(){var s,r,a,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=[],r=[],e.userTags.forEach((function(t){-1===e.importTags.indexOf(t)&&s.push(t)})),e.importTags.forEach((function(t){-1===e.userTags.indexOf(t)&&r.push(t)})),t.prev=4,t.next=7,h.Z.editTags({userId:e.user.id,addTags:r,removeTags:s});case 7:if(!((i=t.sent).data.errors&&i.data.errors.length>0)){t.next=10;break}return t.abrupt("return",showMessage("alert","Save tags","Error saving tags. ".concat(i.data.errors.map((function(e){return e.message})).join(", ")),[{name:"OK"}]));case 10:(a=e.userTags).push.apply(a,r),s.forEach((function(t){e.userTags=e.userTags.filter((function(e,s,r){return e!==t}))})),(0,u.il)({skipLoader:!0}),t.next=18;break;case 15:return t.prev=15,t.t0=t.catch(4),t.abrupt("return",showMessage("alert","Add tag error",t.t0.message,[{name:"OK"}]));case 18:case"end":return t.stop()}}),t,null,[[4,15]])})))()}}};const g=(0,s(51900).Z)(p,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"uploaded-desc panel"},[e.readOnly?t("div",{staticClass:"lbl-large weight-500 mb-10 -tags-title"},[e._v("Tags")]):e._e(),e._v(" "),t("MultiSelectPropertyTags",{attrs:{allTags:e.allTags,selectedTags:e.importTags,isInteractive:!e.readOnly},on:{tagsChanged:e.changeInputTags}})],1)}),[],!1,null,null,null).exports},85257:(e,t,s)=>{s.d(t,{Z:()=>d});s(21249),s(57327),s(41539),s(79753),s(92222),s(47042),s(23157),s(88674),s(17727),s(69600),s(89554),s(54747),s(54678),s(56977),s(91058);var r=s(92741),a=s(7217),i=s(14351),n=s(34566),o=s(44035),l=s(60741),c=s(11180);const u={name:"EnrollToProduct",components:{AuthorSideform:n.Z,AuthorSideformSection:i.Z,AuthoringTip:a.Z},mixins:[o.Z,c.Z],props:{user:{default:null,type:Object}},data:function(){return{fullName:"",products:[],selectedProduct:null,priceToDisplay:0,feesToDisplay:0,commission:!0,justification:"Added by admin",subscriptionDuration:1,subscriptionDurationType:"months",durationMode:"forever",addInProgress:!1,loadingCourses:!1}},computed:{subscriptionsDuration:function(){return"months"===this.subscriptionDurationType?[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]:[1,2,3,4,5,6,7,8,9,10,11,12]},subscriptionsDurationType:function(){return[{displayName:"Months",value:"months"},{displayName:"Weeks",value:"weeks"},{displayName:"Days",value:"days"}]},schoolHasFees:function(){return this.learnWorldsPackage.startsWith("starter")||this.learnWorldsPackage.startsWith("learning_center")||this.learnWorldsPackage.startsWith("pro")},displayDuration:function(){return null!==this.selectedProduct&&"subscription"===this.selectedProduct.type},displayFee:function(){return null!==this.selectedProduct&&!0===this.schoolHasFees&&this.selectedProduct.commission>0&&"free"!==this.selectedProduct.status&&("subscription"===this.selectedProduct.type?"forever"===this.durationMode?this.feesToDisplay=this.calculateSubscriptionFees(this.selectedProduct.commission,"months",6):this.feesToDisplay=this.calculateSubscriptionFees(this.selectedProduct.commission,this.subscriptionDurationType,this.subscriptionDuration):this.feesToDisplay=this.selectedProduct.commission,!0)},priceIsValid:function(){return!isNaN(this.priceToDisplay)&&this.priceToDisplay>=0}},watch:{user:{immediate:!0,handler:function(e){this.fullName=e.username}}},created:function(){this.getProductsThatCanBeBought()},methods:{getProductsThatCanBeBought:function(){var e=this;this.loadingCourses=!0,r.Z.get("".concat(server,"author/user/").concat(this.user.id,"/products?canBeBought=true")).then((function(t){if(t.data.errors&&t.data.errors.length>0)return e.$root.$emit("closeManageUserSidebar"),showMessage("alert","Failed to fetch products",t.data.errors.map((function(e){return e.message})).join(", "),[{name:"OK"}]);e.products=t.data.products,e.products.forEach((function(e){"free"===e.status&&(e.price=0)})),e.products.length>0&&(e.selectedProduct=e.products[0],e.priceToDisplay=e.selectedProduct.price)})).catch((function(e){displayError()})).finally((function(){e.loadingCourses=!1}))},updateSelectedProduct:function(){this.priceToDisplay=this.selectedProduct.price},enrollToProduct:function(){var e=this;if(!1!==this.priceIsValid&&0!==this.products.length){var t={user:this.user.id,product:this.selectedProduct.titleId,type:this.selectedProduct.type,price:this.priceToDisplay,justification:this.justification,applyAffiliateCommissions:this.commission,durationMode:this.durationMode};"subscription"===this.selectedProduct.type&&"forever"!==this.durationMode&&(t.duration=this.subscriptionDuration,t.durationType=this.subscriptionDurationType),this.addInProgress=!0,r.Z.post("".concat(server,"author/users-course"),t).then((function(t){if(t.data.errors&&t.data.errors.length>0)return showMessage("alert","Error enrolling user to product",t.data.errors.map((function(e){return e.message})).join(", "),[{name:"OK"}]);e.feesToDisplay&&!0===e.schoolHasFees&&"free"!==e.selectedProduct.status&&showMessage("info","Want to skip the ".concat(e.feesToDisplay,"$ enrollment fee?"),"Your plan comes with a $".concat(e.feesToDisplay," enrollment fee. Upgrade now to skip the fee plus get access to dozens of cool features 🚀"),[{name:"Upgrade now!",func:function(){e.redirectToBillingAndTrack("Skip enrollment fee toast","Users")}}],[],{timeout:5e3}),(0,l.il)()})).catch((function(e){showMessage("alert","Error enrolling user to product",e.message,[{name:"OK"}])})).finally((function(){e.$root.$emit("closeManageUserSidebar"),e.addInProgress=!1}))}},calculateSubscriptionFees:function(e,t,s){var r=null;switch(t){case"months":r=1;break;case"days":r=30;break;case"years":r=1/12;break;case"weeks":r=4;break;default:return 0}return parseFloat(e)*(parseInt(s)/r).toFixed(2)},removeExtraDecimalDigits:function(){var e=parseFloat(parseFloat(this.priceToDisplay).toFixed(2));isNaN(e)?this.priceToDisplay=0:this.priceToDisplay=parseFloat(parseFloat(this.priceToDisplay).toFixed(2))}}};const d=(0,s(51900).Z)(u,(function(){var e=this,t=e._self._c;return t("AuthorSideform",{attrs:{title:"Enroll user to product"},on:{close:function(t){return e.$root.$emit("closeManageUserSidebar")}}},[t("div",{staticClass:"section-card-row-small"},[t("div",{staticClass:"section-card-part-small"},[t("h3",{staticClass:"inner-title-small"},[e._v("User's full name")]),e._v(" "),t("p",{staticClass:"inner-subtitle-small"},[e._v("The full name of the user")])]),e._v(" "),t("div",{staticClass:"section-card-part-small"},[t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-text-input form-big-text-input disabled"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.fullName,expression:"fullName"}],attrs:{id:"selectUser",name:"selectUser",disabled:""},domProps:{value:e.fullName},on:{input:function(t){t.target.composing||(e.fullName=t.target.value)}}})])])])]),e._v(" "),t("div",{staticClass:"section-card-row-small"},[t("div",{staticClass:"section-card-part-small"},[t("h3",{staticClass:"inner-title-small"},[e._v("Select product")]),e._v(" "),t("p",{staticClass:"inner-subtitle-small"},[e._v("Course, course bundle or subscription")])]),e._v(" "),t("div",{staticClass:"section-card-part-small"},[e.products.length>0?t("div",{staticClass:"form-row"},[t("label",{staticClass:"form-select-lbl select-lbl"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedProduct,expression:"selectedProduct"}],staticClass:"form-text-input form-big-text-input",on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedProduct=t.target.multiple?s:s[0]},function(t){return e.updateSelectedProduct()}]}},e._l(e.products,(function(s){return t("option",{domProps:{value:s}},[e._v(e._s(s.title))])})),0)])]):e._e(),e._v(" "),e.loadingCourses||0!==e.products.length?e._e():t("span",{staticClass:"error-message no-content-msg"},[e._v("User is enrolled in all your products")]),e._v(" "),e.loadingCourses?t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-row"},[t("p",{staticClass:"inner-subtitle-small"},[e._v("Course list loading, please wait.")])])]):e._e()])]),e._v(" "),t("div",{staticClass:"section-card-row-small",style:{display:!0===e.displayDuration?"block":"none"}},[t("div",{staticClass:"section-card-part-small"},[t("h3",{staticClass:"inner-title-small"},[e._v("Duration")]),e._v(" "),t("p",{staticClass:"inner-subtitle-small"},[e._v("Select for how many billing cycles the learner will be enrolled in the\n                subscription plan.")])]),e._v(" "),t("div",{staticClass:"section-card-part-small"},[t("div",{staticClass:"radios-wrapper"},[t("div",{staticClass:"radio-wrapper"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.durationMode,expression:"durationMode"}],staticClass:"radio-button",attrs:{type:"radio",id:"durationModeForever",value:"forever"},domProps:{checked:e._q(e.durationMode,"forever")},on:{change:function(t){e.durationMode="forever"}}}),e._v(" "),t("label",{staticClass:"v-middle",attrs:{for:"durationModeForever"}}),e._v(" "),t("div",{staticClass:"settings-lbl v-middle"},[e._v("Forever")])]),e._v(" "),t("div",{staticClass:"radio-wrapper"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.durationMode,expression:"durationMode"}],staticClass:"radio-button",attrs:{type:"radio",id:"durationModeSpecific",value:"specific"},domProps:{checked:e._q(e.durationMode,"specific")},on:{change:function(t){e.durationMode="specific"}}}),e._v(" "),t("label",{staticClass:"v-middle",attrs:{for:"durationModeSpecific"}}),e._v(" "),t("div",{staticClass:"settings-lbl v-middle"},[e._v("For specific period of time")])])]),e._v(" "),"specific"===e.durationMode?t("div",{staticClass:"form-row",staticStyle:{"margin-top":"22px"}},[t("div",{staticClass:"v-middle"},[t("div",{staticClass:"form-lbl"},[e._v("Duration")]),e._v(" "),t("label",{staticClass:"form-select-lbl select-lbl"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.subscriptionDuration,expression:"subscriptionDuration"}],staticClass:"form-text-input form-big-text-input",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.subscriptionDuration=t.target.multiple?s:s[0]}}},e._l(e.subscriptionsDuration,(function(s){return t("option",{domProps:{value:s}},[e._v(e._s(s))])})),0)])]),e._v(" "),t("div",{staticClass:"v-middle"},[t("div",{staticClass:"form-lbl"},[e._v("Duration Type")]),e._v(" "),t("label",{staticClass:"form-select-lbl select-lbl"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.subscriptionDurationType,expression:"subscriptionDurationType"}],staticClass:"form-text-input form-big-text-input",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.subscriptionDurationType=t.target.multiple?s:s[0]}}},e._l(e.subscriptionsDurationType,(function(s){return t("option",{domProps:{value:s.value}},[e._v("\n                                "+e._s(s.displayName)+"\n                            ")])})),0)])])]):e._e()])]),e._v(" "),t("div",{staticClass:"section-card-row-small"},[t("div",{staticClass:"section-card-part-small"},[t("h3",{staticClass:"inner-title-small"},[e._v("Price")]),e._v(" "),t("p",{staticClass:"inner-subtitle-small"},[e._v("Set a price for the enrollment")])]),e._v(" "),t("div",{staticClass:"section-card-part-small"},[t("div",{staticClass:"form-row with-line-effect"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.priceToDisplay,expression:"priceToDisplay"}],staticClass:"form-text-input form-big-text-input",class:0===e.products.length||"free"===e.selectedProduct.status?"disabled":"",attrs:{id:"selectPrice",name:"price",type:"text",disabled:0===e.products.length||"free"===e.selectedProduct.status},domProps:{value:e.priceToDisplay},on:{blur:function(t){return e.removeExtraDecimalDigits()},input:function(t){t.target.composing||(e.priceToDisplay=t.target.value)}}}),e._v(" "),t("div",{staticClass:"line-effect"}),e._v(" "),!1===e.priceIsValid?t("span",{staticClass:"error-message"},[e._v("Value provided is not a valid price")]):e._e()])])]),e._v(" "),e.user.referrer?t("div",{staticClass:"section-card-row-small"},[t("div",{staticClass:"section-card-part-small"},[t("h3",{staticClass:"inner-title-small"},[e._v("Affiliate commission")]),e._v(" "),t("p",{staticClass:"inner-subtitle-small"},[e._v("Generate and track affiliate commission for this enrollment")])]),e._v(" "),t("div",{staticClass:"section-card-part-small"},[t("div",{staticClass:"form-row settings-checkbox-wrapper pt-25"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.commission,expression:"commission"}],staticClass:"checkmark-checkbox",attrs:{id:"affiliateCommission",name:"refund",type:"checkbox"},domProps:{checked:Array.isArray(e.commission)?e._i(e.commission,null)>-1:e.commission},on:{change:function(t){var s=e.commission,r=t.target,a=!!r.checked;if(Array.isArray(s)){var i=e._i(s,null);r.checked?i<0&&(e.commission=s.concat([null])):i>-1&&(e.commission=s.slice(0,i).concat(s.slice(i+1)))}else e.commission=a}}}),e._v(" "),t("label",{staticClass:"v-middle",attrs:{for:"affiliateCommission"}})])])]):e._e(),e._v(" "),t("div",{staticClass:"section-card-row-small"},[t("div",{staticClass:"section-card-part-small"},[t("h3",{staticClass:"inner-title-small"},[e._v("Justification")]),e._v(" "),t("p",{staticClass:"inner-subtitle-small"},[e._v("Set a justification/note for the enrollment")])]),e._v(" "),t("div",{staticClass:"section-card-part-small"},[t("div",{staticClass:"form-row"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.justification,expression:"justification"}],staticClass:"form-text-input form-textarea form-big-text-input",class:0===e.products.length?"disabled":"",attrs:{id:"selectJustification",disabled:0===e.products.length},domProps:{value:e.justification},on:{input:function(t){t.target.composing||(e.justification=t.target.value)}}})])])]),e._v(" "),t("div",{staticClass:"section-card-row-small"},[t("div",{staticClass:"section-card-part-small"},[t("div",{staticClass:"js-fees",style:{display:!0===e.displayFee?"block":"none"}},[t("AuthoringTip",[e._v("\n                    Please note that a $"+e._s(e.feesToDisplay)+" fee will occur with this enrollment.\n                ")])],1)]),e._v(" "),t("div",{staticClass:"section-card-part-small"},[t("div",{staticClass:"btn-wrapper"},[t("div",{staticClass:"btn btn-l -add-users-btn",class:0===e.products.length||e.addInProgress?"disabled":"",on:{click:function(t){return e.enrollToProduct()}}},[e._v("Enroll user")]),e._v(" "),t("button",{staticClass:"btn btn-l btn-secondary",attrs:{type:"button"},on:{click:function(t){return e.$root.$emit("closeManageUserSidebar")}}},[e._v("Cancel")])])])])])}),[],!1,null,null,null).exports},47867:(e,t,s)=>{s.d(t,{Z:()=>l});s(21249),s(57327),s(41539),s(92222),s(69600),s(88674),s(17727);var r=s(34566),a=s(14351),i=s(92741),n=s(60741);const o={name:"RemoveProduct",components:{AuthorSideformSection:a.Z,AuthorSideform:r.Z},props:{user:{default:null,type:Object}},data:function(){return{fullName:this.user.username,products:[],selectedProduct:null}},created:function(){this.getUserCourses()},methods:{getUserCourses:function(){var e=this;i.Z.get("".concat(server,"author/user/").concat(this.user.id,"/products")).then((function(t){if(t.data.errors&&t.data.errors.length>0)return showMessage("alert","Failed to fetch user products",t.data.errors.map((function(e){return e.message})).join(", "),[{name:"OK"}]);e.products=t.data.products,e.products.length>0&&(e.selectedProduct=e.products[0])})).catch((function(e){displayError()}))},removeProductAlert:function(){if(null!==this.selectedProduct)return!0===this.selectedProduct.activePaymentPlan?showMessage("alert","POSSIBLE PROBLEM","Τhe user currently has an active Payment Plan. If you continue with this action the payment plan will be canceled.",[{name:"Ok",func:this.removeProduct},{name:"Cancel",func:n.Fz,args:[this]}]):void this.removeProduct()},removeProduct:function(){var e=this,t={user:this.user.id,type:this.selectedProduct.type,product:this.selectedProduct.titleId,remove:!0};i.Z.post("".concat(server,"author/users-course"),t).then((function(e){if(e.data.errors&&e.data.errors.length>0)return showMessage("alert","Failed to un-enroll user from product",e.data.errors.map((function(e){return e.message})).join(", "),[{name:"OK"}]);(0,n.il)()})).catch((function(e){showMessage("alert","Failed to un-enroll user from product",e.message,[{name:"OK"}])})).finally((function(){e.$root.$emit("closeManageUserSidebar")}))}}};const l=(0,s(51900).Z)(o,(function(){var e=this,t=e._self._c;return t("AuthorSideform",{attrs:{title:"Un-enroll learner from product"},on:{close:function(t){return e.$root.$emit("closeManageUserSidebar")}}},[t("AuthorSideformSection",{attrs:{title:"Learner's full name",subtitle:"The full name of the learner"}},[t("div",{staticClass:"form-text-input form-big-text-input disabled"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.fullName,expression:"fullName"}],attrs:{id:"selectUser1",name:"selectUser",disabled:""},domProps:{value:e.fullName},on:{input:function(t){t.target.composing||(e.fullName=t.target.value)}}})])]),e._v(" "),t("AuthorSideformSection",{attrs:{title:"Select product",subtitle:"Course, course bundle or subscription"}},[e.products.length>0?t("label",{staticClass:"form-select-lbl select-lbl"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedProduct,expression:"selectedProduct"}],staticClass:"form-text-input form-big-text-input",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedProduct=t.target.multiple?s:s[0]}}},e._l(e.products,(function(s){return t("option",{domProps:{value:s}},[e._v(e._s(s.title))])})),0)]):t("span",{staticClass:"error-message no-content-msg"},[e._v("User is not enrolled to any products (paid)")])]),e._v(" "),t("AuthorSideformSection",[t("div",{staticClass:"btn-wrapper"},[t("div",{staticClass:"btn btn-l -add-users-btn",class:{disabled:0===e.products.length},on:{click:function(t){return e.removeProductAlert()}}},[e._v("Un-enroll user")]),e._v(" "),t("button",{staticClass:"btn btn-l btn-secondary",attrs:{type:"button"},on:{click:function(t){return e.$root.$emit("closeManageUserSidebar")}}},[e._v("Cancel")])])])],1)}),[],!1,null,null,null).exports},7821:(e,t,s)=>{s.d(t,{Z:()=>v});s(79753),s(92222),s(47042),s(41539),s(88674),s(17727),s(69600),s(21249);var r=s(70538),a=s(14351),i=s(92741),n=s(45101);const o=(0,r.defineComponent)({extends:n.Z,methods:{buildRulesInlineText:function(){var e=this.settings,t=e.minimum_characters,s=e.maximum_characters,r=e.check_uppercase,a=e.check_lowercase,i=e.check_digit,n=e.check_special_chars,o="Password must have ";return o+="".concat(t,"-").concat(s," characters length"),o+=r?", one uppercase":"",o+=a?", one lowercase":"",o+=i?", one number (0-9)":"",o+=n?", one special character (&*%^$_)":"",o+="."}}});var l=s(51900);const c=(0,l.Z)(o,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"password-meter-container password-meter-update-password-container"},[t("div",{staticClass:"with-line-effect"},[t("div",{staticClass:"form-control-wrapper"},["checkbox"===e.maskType?t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control form-text-input form-big-text-input add-user-input",attrs:{name:"password",placeholder:"Password",autocomplete:"off",required:"",type:"checkbox"},domProps:{checked:Array.isArray(e.password)?e._i(e.password,null)>-1:e.password},on:{change:function(t){var s=e.password,r=t.target,a=!!r.checked;if(Array.isArray(s)){var i=e._i(s,null);r.checked?i<0&&(e.password=s.concat([null])):i>-1&&(e.password=s.slice(0,i).concat(s.slice(i+1)))}else e.password=a}}}):"radio"===e.maskType?t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control form-text-input form-big-text-input add-user-input",attrs:{name:"password",placeholder:"Password",autocomplete:"off",required:"",type:"radio"},domProps:{checked:e._q(e.password,null)},on:{change:function(t){e.password=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control form-text-input form-big-text-input add-user-input",attrs:{name:"password",placeholder:"Password",autocomplete:"off",required:"",type:e.maskType},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),t("password-meter-mask"),e._v(" "),t("div",{staticClass:"line-effect"})],1)]),e._v(" "),e.isLoaded?t("div",{staticClass:"clrs-upload-lbl"},[e._v("\n        "+e._s(e.buildRulesInlineText())+"\n    ")]):e._e(),e._v(" "),e.isLoaded?e._e():t("div",{staticClass:"loader"},[e._m(0)])])}),[function(){var e=this._self._c;this._self._setupProxy;return e("div",{staticClass:"lds-ellipsis"},[e("div"),e("div"),e("div"),e("div")])}],!1,null,null,null).exports;var u=s(7217),d=s(64768),m=s(75091);const h=(0,r.defineComponent)({components:{PasswordMeterRulesListIcon:m.Z},setup:function(){var e=(0,d.h)();return{symbols:"(-._!\"`'#%&,:;<>=@{}~$()*+/\\?[]^|)",settings:e.settings,password:e.password,isLengthInRange:e.isLengthInRange,hasLowerCase:e.hasLowerCase,hasUpperCase:e.hasUpperCase,hasDigit:e.hasDigit,hasSpecialCharacter:e.hasSpecialCharacter}}});const p=(0,l.Z)(h,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"password-meter-rules-errors-container"},[t("div",{staticClass:"password-meter-rules-content"},[t("div",{staticClass:"password-meter-rules-content--title"},[e._v("\n            Password must have:\n        ")]),e._v(" "),t("ul",{staticClass:"password-meter-rules-elements-container"},[t("li",{directives:[{name:"show",rawName:"v-show",value:""===e.password,expression:"password === ''"}],staticClass:"password-meter-rules-element"},[t("span",{staticClass:"password-meter-rules-element--icon-container"},[t("password-meter-rules-list-icon",{attrs:{"is-checked":!1}})],1),e._v(" "),t("span",{staticClass:"password-meter-rules-element--text"},[e._v("\n                    Password cannot be empty\n                 ")])]),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:!e.isLengthInRange,expression:"!isLengthInRange"}],staticClass:"password-meter-rules-element"},[t("span",{staticClass:"password-meter-rules-element--icon-container"},[t("password-meter-rules-list-icon",{attrs:{"is-checked":!1}})],1),e._v(" "),t("span",{staticClass:"password-meter-rules-element--text"},[e._v("\n                    "+e._s(e.settings.minimum_characters)+" - "+e._s(e.settings.maximum_characters)+" characters length\n                 ")])]),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:e.settings.check_uppercase&&!e.hasUpperCase,expression:"settings.check_uppercase && !hasUpperCase"}],staticClass:"password-meter-rules-element"},[t("span",{staticClass:"password-meter-rules-element--icon-container"},[t("password-meter-rules-list-icon",{attrs:{"is-checked":!1}})],1),e._v(" "),t("span",{staticClass:"password-meter-rules-element--text"},[e._v("\n                  One uppercase character\n                ")])]),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:e.settings.check_lowercase&&!e.hasLowerCase,expression:"settings.check_lowercase && !hasLowerCase"}],staticClass:"password-meter-rules-element"},[t("span",{staticClass:"password-meter-rules-element--icon-container"},[t("password-meter-rules-list-icon",{attrs:{"is-checked":!1}})],1),e._v(" "),t("span",{staticClass:"password-meter-rules-element--text"},[e._v("\n                   One lowercase character\n                ")])]),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:e.settings.check_digit&&!e.hasDigit,expression:"settings.check_digit && !hasDigit"}],staticClass:"password-meter-rules-element"},[t("span",{staticClass:"password-meter-rules-element--icon-container"},[t("password-meter-rules-list-icon",{attrs:{"is-checked":!1}})],1),e._v(" "),t("span",{staticClass:"password-meter-rules-element--text"},[e._v("\n                    One number (0-9)\n                 ")])]),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:e.settings.check_special_chars&&!e.hasSpecialCharacter,expression:"settings.check_special_chars && !hasSpecialCharacter"}],staticClass:"password-meter-rules-element"},[t("span",{staticClass:"password-meter-rules-element--icon-container"},[t("password-meter-rules-list-icon",{attrs:{"is-checked":!1}})],1),e._v(" "),t("span",{staticClass:"password-meter-rules-element--text"},[e._v("\n                   One special character "+e._s(e.symbols)+"\n                ")])])])])])}),[],!1,null,null,null).exports;var g=s(34566);const f=(0,r.defineComponent)({name:"UpdatePassword",components:{AuthorSideform:g.Z,AuthorSideformSection:a.Z,PasswordMeterUpdatePasswordPresentation:c,PasswordMeterUpdatePasswordErrors:p,AuthoringTip:u.Z},props:{user:{default:null,type:Object}},setup:function(){var e=(0,d.h)(),t=e.isValidPassword,s=e.password,a=e.setPassword,i=(0,r.ref)(!1),n=(0,r.ref)(!1),o=function(e){return i.value=e};return(0,r.watch)(s,(function(){o(!1)})),(0,r.onMounted)((function(){a("")})),{password:s,showErrors:i,isValidPassword:t,setShowErrors:o,deleteUserSessions:n}},methods:{updatePassword:function(){var e=this;this.isValidPassword?i.Z.post("".concat(server,"author/user/").concat(this.user.id,"/password-set"),{password:this.password,deleteSessions:this.deleteUserSessions}).then((function(e){if(e.data.errors&&e.data.errors.length>0)return showMessage("alert","Error updating user password",e.data.errors.map((function(e){return e.message})).join(", "),[{name:"OK"}]);showMessage("success","Update user password","User password updated successfully",[{name:"OK"}])})).catch((function(e){showMessage("alert","Error updating user password",e.message,[{name:"OK"}])})).finally((function(){e.$root.$emit("closeManageUserSidebar")})):this.setShowErrors(!0)}}});const v=(0,l.Z)(f,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("author-sideform",{attrs:{title:"Change user's password"},on:{close:function(t){return e.$root.$emit("closeManageUserSidebar")}}},[t("author-sideform-section",{attrs:{title:"Change the user's password",description:"To keep your school safe, it's always best to avoid using\n                    easily guessed passwords. You can customize the password strength rules in the\n                    Site builder > Site settings >\n                    <a href='/author/authentication'>Sign in / up</a>"}},[t("PasswordMeterUpdatePasswordPresentation"),e._v(" "),e.showErrors?t("AuthoringTip",{staticClass:"mt-10",attrs:{type:"notification"}},[t("PasswordMeterUpdatePasswordErrors")],1):e._e()],1),e._v(" "),t("author-sideform-section",{attrs:{title:"Force log out",description:"This setting allows you to automatically log out the user as soon as you\n                change the user’s password."}},[t("div",{staticClass:"form-row settings-checkbox-wrapper"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.deleteUserSessions,expression:"deleteUserSessions"}],staticClass:"checkmark-checkbox",attrs:{id:"deleteUserSessions",name:"delete-user-sessions",type:"checkbox"},domProps:{checked:Array.isArray(e.deleteUserSessions)?e._i(e.deleteUserSessions,null)>-1:e.deleteUserSessions},on:{change:function(t){var s=e.deleteUserSessions,r=t.target,a=!!r.checked;if(Array.isArray(s)){var i=e._i(s,null);r.checked?i<0&&(e.deleteUserSessions=s.concat([null])):i>-1&&(e.deleteUserSessions=s.slice(0,i).concat(s.slice(i+1)))}else e.deleteUserSessions=a}}}),e._v(" "),t("label",{staticClass:"v-middle",attrs:{for:"deleteUserSessions"}}),e._v(" "),t("div",{staticClass:"settings-lbl v-middle",staticStyle:{"max-width":"340px"}},[e._v("Force the user to log out")])])]),e._v(" "),t("author-sideform-section",[t("div",{staticClass:"btn-wrapper"},[t("div",{staticClass:"btn btn-l -add-users-btn",on:{click:function(t){return e.updatePassword()}}},[e._v("Change")]),e._v(" "),t("button",{staticClass:"btn btn-l btn-secondary",attrs:{type:"button"},on:{click:function(t){return e.$root.$emit("closeManageUserSidebar")}}},[e._v("Cancel")])])])],1)}),[],!1,null,null,null).exports},36610:(e,t,s)=>{s.d(t,{Z:()=>a});const r={name:"AuthorUpgradeButton",props:{asset:{type:String,required:!1},context:{type:String,required:!1},withUpgrade:{type:Boolean,default:!0}},computed:{isAdmin:function(){return this.$lwGates.isParentRoleAdmin()||this.$lwGates.isParentRoleLwAdmin()}},methods:{upgrade:function(){this.isAdmin?(window.top.authorController.redirectToBillingAndTrack(this.asset,this.context,this.withUpgrade),this.$emit("upgrade")):this.$lw.showMessage("warning","Upgrade","This feature is not available on your current subscription plan.\nContact the school owner or an admin to upgrade to a higher plan so you can enjoy more awesome features.",[{name:"OK"}])}}};const a=(0,s(51900).Z)(r,(function(){var e=this;return(0,e._self._c)("button",{staticClass:"btn upgrade-btn",on:{click:e.upgrade}},[e._t("default",(function(){return[e._v("\n        Upgrade now!\n    ")]}))],2)}),[],!1,null,null,null).exports},61841:(e,t,s)=>{s.d(t,{Z:()=>a});const r={name:"ManageTagsFooterTemplate"};const a=(0,s(51900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"bt-1px-solid mt-5 pt-10"},[t("button",{staticClass:"flex a-i-c gap-8 p-0 teal-60-hover lbl-dark-gray cursor-pointer",on:{click:function(t){return t.stopPropagation(),e.redirectTo("/author/tags")}}},[t("LwImg",{staticClass:"block au-icon w-20 h-20",attrs:{src:"/author/images/svg/manage-tag.svg",alt:""}}),e._v(" "),t("span",{staticClass:"lbl-normal weight-500"},[e._v("Manage tags")])],1)])}),[],!1,null,null,null).exports}}]);