"use strict";(self.webpackChunkcodeneuron_templates=self.webpackChunkcodeneuron_templates||[]).push([[78170],{24717:(t,e,n)=>{n.d(e,{U:()=>c,t:()=>o});var i=n(4942),a=(n(26541),n(41539),n(82526),n(41817),n(21249),n(47941),n(57327),n(38880),n(57658),n(89554),n(54747),n(49337),n(33321),n(69070),n(71705));function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t){var e,n=null!==(e=null==t?void 0:t.promptFragments)&&void 0!==e?e:[];return!!n.length&&(n.length&&n.every((function(t){return t.type===a.O0.SELECTION})))}function c(t,e){if(!t||!t.categories)return[];var n=function t(n){var i,a={id:n.id,title:n.label,description:null!==(i=n.description)&&void 0!==i?i:"",icon:n.icon?window.imagePath+n.icon:null};return n.categories?a.categories=n.categories.map((function(e){return s(s({},e),{},{isAssistant:!0,items:e.items.map(t)})})):a.callback=function(){return e({item:n})},a};return t.categories.map((function(t){return s(s({},t),{},{isAssistant:!0,items:t.items.map(n)})}))}},46418:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(93949);const a={props:{id:{required:!1,default:function(){return(0,i.D1)("author_setting")}},value:{required:!1},disabled:{type:Boolean,default:!1}},computed:{valueForInput:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}}},47737:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(70538),a=n(79069),r=n(91033);function s(){var t=(0,i.ref)(null),e=(0,i.ref)({}),n=null;function s(){var n,i;e.value=null!==(n=null==t||null===(i=t.value)||void 0===i?void 0:i.getBoundingClientRect())&&void 0!==n?n:{}}function o(){n&&(n.unobserve(t.value),n=null)}return(0,a.Z)(document,"scroll",s,{capture:!0,passive:!0}),(0,a.Z)(window,"resize",s,{capture:!0,passive:!0}),(0,i.onUnmounted)(o),{rect:e,setElement:function(e){t.value=e,o(),(n=new r.Z(s)).observe(t.value),s()}}}},79069:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(70538);function a(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};"string"==typeof t&&(t=document.querySelector(t)),(0,i.onMounted)((function(){return t.addEventListener(e,n,a)})),(0,i.onUnmounted)((function(){return t.removeEventListener(e,n,a)}))}},30507:(t,e,n)=>{n.d(e,{O:()=>a,P:()=>i});n(33161),n(9653),n(21703),n(96647);var i=function(t){if(!Number.isInteger(t)&&t<0)throw new Error("The number should be a positive integer.");for(var e=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],n=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],i="",a=t,r=0;r<e.length;r++)for(;e[r]<=a;)i+=n[r],a-=e[r];return i},a=function(t){for(var e="a".charCodeAt(0),n="z".charCodeAt(0)-e+1,i="",a=t;a>=0;){var r=a%n;i=String.fromCharCode(r+e)+i,a=(a-r)/n-1}return i}},78170:(t,e,n)=>{n.d(e,{Z:()=>kt});n(82772),n(82526),n(57327),n(38880),n(49337),n(33321),n(69070);var i=n(15861),a=n(29439),r=n(93433),s=n(4942),o=n(64687),c=n.n(o),l=(n(9653),n(69826),n(41539),n(26699),n(32023),n(65069),n(92222),n(21249),n(89554),n(54747),n(69720),n(47042),n(85827),n(79753),n(5212),n(47941),n(57658),n(71705)),u=n(48728),p=n(36018),d=n(7217);const v={name:"GeneratedTextView",components:{AuthoringTip:d.Z,PulseLoader:u.Z,AiChatbotMessage:p.Z},props:{chatIsLoading:{type:Boolean,default:!1},generatedText:{type:String,default:""},messageHistory:{type:Array,default:function(){return[]}},readonly:{type:Boolean,default:!1},showEditOptionsEnabled:{type:Boolean,default:!0}},watch:{generatedText:{deep:!0,handler:function(){var t=this;this.$nextTick((function(){t.$el.scrollTop=0}))}}},methods:{insertContent:function(){this.$emit("event",{type:"insert-content"})},translate:function(t){this.$emit("event",{type:"translate",value:t})},regenerateText:function(){this.$emit("event",{type:"regenerate-text"})},shortenText:function(){this.$emit("event",{type:"shorten-text"})},expandText:function(){this.$emit("event",{type:"expand-text"})},summarizeText:function(){this.$emit("event",{type:"summarize"})},switchToPromptView:function(){this.$emit("event",{type:"change-view",value:l.e1.PROMPT})}}};var h=n(51900);const f=(0,h.Z)(v,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-d-col"},[e("div",{staticClass:"p-15-32 ov-auto"},[t._t("prompt-info"),t._v(" "),e("div",{staticClass:"content-container mb-2rem",domProps:{innerHTML:t._s(t.generatedText)}}),t._v(" "),t.messageHistory.length?e("div",{staticClass:"chat-wrapper"},[t._l(t.messageHistory,(function(t){return e("ai-chatbot-message",{key:t.id,attrs:{id:t.id,sender:t.sender,message:t.message}})})),t._v(" "),t.chatIsLoading?e("div",{staticClass:"flex j-c-c"},[e("pulse-loader"),t._v(" "),e("pulse-loader"),t._v(" "),e("pulse-loader")],1):t._e()],2):t._e(),t._v(" "),t.chatIsLoading||t.readonly?t._e():[e("div",{staticClass:"flex flex-wrap gap-8 a-i-c mb-20"},[e("button",{staticClass:"btn w-full-below-450",on:{click:t.insertContent}},[t._v("Insert content")]),t._v(" "),e("button",{staticClass:"p-5-15 cursor-pointer radius-15 lbl-small b-1px-gray mr-10 flex a-i-c",on:{click:t.regenerateText}},[e("svg",{staticClass:"mr-5",attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M3.64163 2.95378C4.81029 1.94328 6.33372 1.33203 7.99992 1.33203C11.6818 1.33203 14.6666 4.3168 14.6666 7.9987C14.6666 9.42276 14.2201 10.7426 13.4594 11.8258L11.3333 7.9987H13.3333C13.3333 5.05318 10.9455 2.66536 7.99992 2.66536C6.56646 2.66536 5.2651 3.23088 4.30674 4.15098L3.64163 2.95378ZM12.3582 13.0436C11.1895 14.0541 9.66612 14.6654 7.99992 14.6654C4.31802 14.6654 1.33325 11.6806 1.33325 7.9987C1.33325 6.5746 1.77978 5.2548 2.54045 4.17166L4.66658 7.9987H2.66659C2.66659 10.9442 5.0544 13.332 7.99992 13.332C9.43338 13.332 10.7347 12.7665 11.6931 11.8464L12.3582 13.0436Z",fill:"#029c91"}})]),t._v(" "),e("span",[t._v("Regenerate")])]),t._v(" "),t.showEditOptionsEnabled?e("button",{staticClass:"btn btn-secondary w-full-below-450",on:{click:t.switchToPromptView}},[e("svg",{staticClass:"mr-5",attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M4.27614 10.595L11.0375 3.83353L10.0947 2.89073L3.33333 9.65216V10.595H4.27614ZM4.82843 11.9283H2V9.09989L9.62333 1.47651C9.88373 1.21616 10.3058 1.21616 10.5661 1.47651L12.4518 3.36213C12.7121 3.62248 12.7121 4.04459 12.4518 4.30494L4.82843 11.9283ZM2 13.2616H14V14.595H2V13.2616Z",fill:"#029c91"}})]),t._v(" "),e("span",[t._v("Improve prompt")])]):t._e(),t._v(" "),e("button",{staticClass:"btn btn-secondary w-full-below-450",on:{click:t.expandText}},[e("svg",{staticClass:"mr-5",attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M1.33325 12.0013H7.99992V13.3346H1.33325V12.0013ZM1.33325 7.33464H14.6666V8.66797H1.33325V7.33464ZM1.33325 2.66797H14.6666V4.0013H1.33325V2.66797ZM11.9999 12.0013V10.0013H13.3333V12.0013H15.3333V13.3346H13.3333V15.3346H11.9999V13.3346H9.99992V12.0013H11.9999Z",fill:"#029c91"}})]),t._v(" "),e("span",[t._v("Expand")])]),t._v(" "),e("button",{staticClass:"btn btn-secondary w-full-below-450",on:{click:t.shortenText}},[e("svg",{attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M12.6667 12.6292H3.87103V3.83351V1.5V1.4H3.77103H2.896H2.796V1.5V3.83351V13.6042V13.7042H2.896H12.6667H15.0002H15.1002V13.6042V12.7292V12.6292H15.0002H12.6667Z",fill:"#029c91",stroke:"#029c91","stroke-width":"0.2"}}),t._v(" "),e("path",{attrs:{d:"M13.104 12.0986H13.204V11.9986V3.39453V3.29453H13.104H4.5H4.4V3.39453V4.26957V4.36957H4.5H12.129V11.9986V12.0986H12.229H13.104Z",fill:"#029c91",stroke:"#029c91","stroke-width":"0.2"}}),t._v(" "),e("path",{attrs:{d:"M12.229 14.232H12.129V14.332V15.4987V15.5987H12.229H13.104H13.204V15.4987V14.332V14.232H13.104H12.229Z",fill:"#029c91",stroke:"#029c91","stroke-width":"0.2"}}),t._v(" "),e("path",{attrs:{d:"M1 3.29453H0.9V3.39453V4.26957V4.36957H1H2.16663H2.26663V4.26957V3.39453V3.29453H2.16663H1Z",fill:"#029c91",stroke:"#029c91","stroke-width":"0.2"}})]),t._v(" "),e("span",[t._v("Shorten")])])])]],2),t._v(" "),e("div",{staticClass:"p-6 flex j-c-fe a-i-c",staticStyle:{"margin-top":"auto"}},[e("authoring-tip",{attrs:{type:"accuracy","show-icon":!1}},[t._v("\n            Check for accuracy before publishing. "),e("a",{attrs:{href:"https://platform.openai.com/docs/chatgpt-education",target:"_blank"}},[t._v("Learn more about AI")]),t._v(" and how to get best outcomes.\n        ")])],1)])}),[],!1,null,"17b2b448",null).exports;n(40561);var m=n(93949),g=n(70538),y=n(90297),b=n(94992);function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){(0,s.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const x=(0,g.defineComponent)({name:"PromptGenerationFragmentRow",components:{ValidationErrors:b.Z,SettingsBasicFactory:y.Z},props:{fragment:{type:Object,required:!0},value:{default:null},validationErrors:{type:Object,default:function(){return{}}}},computed:{isRowVisible:function(){return this.fragment.type!==l.O0.HIDDEN},showCloseOnLabel:function(){return this.fragment.type===l.O0.BOOLEAN},showErrorsBelowLabel:function(){return[l.O0.COURSE_CONTENT_UNITS].includes(this.fragment.type)},settingPropsForPromptFragment:function(){return _(_({type:l.As[this.fragment.type]},this.isBuiltInFragment?{validationErrors:this.validationErrors}:{}),this.fragment.properties)},valueForSetting:{get:function(){var t;return null!==(t=this.value)&&void 0!==t?t:this.fragment.default},set:function(t){this.$emit("input",t)}},isBuiltInFragment:function(){return l.Wr.includes(this.fragment.type)},fragmentValidationErrors:function(){var t;return null!==(t=this.validationErrors[this.fragment.key])&&void 0!==t?t:[]}},methods:{remove:function(){this.$emit("remove")}}});const C={name:"PromptGenerationView",components:{PromptGenerationFragmentRow:(0,h.Z)(x,(function(){var t=this,e=t._self._c;t._self._setupProxy;return t.isRowVisible?e("div",{staticClass:"mb-2rem"},[e("div",{staticClass:"flex a-i-c mb-0_5rem"},[t.fragment.label?e("label",{staticClass:"lbl-normal weight-500 block fg-1",attrs:{for:t.fragment.key}},[t._v("\n            "+t._s(t.fragment.label)+"\n        ")]):t._e(),t._v(" "),!t.fragment.required&&t.showCloseOnLabel?e("button",{staticClass:"close dark-gray-close ml-1rem",staticStyle:{"border-bottom":"2px dotted #58595b",height:"20px","background-size":"12px"},on:{click:t.remove}}):t._e()]),t._v(" "),t.showErrorsBelowLabel?e("validation-errors",{staticClass:"mt-5",attrs:{"validation-errors":t.fragmentValidationErrors}}):t._e(),t._v(" "),e("div",{staticClass:"flex a-i-fs"},[e("settings-basic-factory",{staticClass:"fg-1",class:{disabled:t.fragment.disabled},attrs:{id:t.fragment.key,setting:t.settingPropsForPromptFragment,"aria-required":t.fragment.required},on:{"clear-error":function(e){return t.$emit("clear-error",e)}},model:{value:t.valueForSetting,callback:function(e){t.valueForSetting=e},expression:"valueForSetting"}}),t._v(" "),t.fragment.required||t.showCloseOnLabel?t._e():e("button",{staticClass:"close dark-gray-close ml-1rem mt-0_5rem",staticStyle:{"border-bottom":"2px dotted #58595b",height:"20px","background-size":"16px"},on:{click:t.remove}})],1),t._v(" "),t.showErrorsBelowLabel?t._e():e("validation-errors",{staticClass:"mt-5",attrs:{"validation-errors":t.fragmentValidationErrors}})],1):t._e()}),[],!1,null,null,null).exports},props:{promptConfig:{type:Object,default:function(){return{}}},promptVariables:{type:Object,default:function(){return{}}},validationErrors:{type:Object,default:function(){return{}}},showNavigateToActionViewButton:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},data:function(){return{activeFragmentKeys:[]}},computed:{navigateToActiveViewButtonLabel:function(){var t;return null!==(t=this.promptConfig.navigateToActiveViewButtonLabel)&&void 0!==t?t:"Back"},activeFragments:function(){var t=this;return this.activeFragmentKeys.map((function(e){return t.promptConfig.promptFragments.find((function(t){return t.key===e}))})).filter((function(t){return!!t}))},inactiveFragments:function(){var t=this;return this.promptConfig.promptFragments.filter((function(e){var n=e.key,i=e.type;return!t.activeFragmentKeys.includes(n)&&"simple"!==i&&"hidden"!==i}))}},created:function(){var t=this;this.activeFragmentKeys=(0,m.Nb)([].concat((0,r.Z)(this.promptConfig.promptFragments.filter((function(t){return t.required})).map((function(t){return t.key}))),(0,r.Z)(Object.entries(this.promptVariables).filter((function(t){return!!(0,a.Z)(t,2)[1]})).map((function(t){return(0,a.Z)(t,1)[0]}))))),this.activeFragments.forEach((function(e){!t.promptVariables[e.key]&&e.default&&t.updateFragmentValue(e.key,e.default)}))},methods:{activateFragment:function(t){this.activeFragmentKeys.push(t);var e=this.promptConfig.promptFragments.find((function(e){return e.key===t}));e&&e.default?this.updateFragmentValue(t,e.default):e&&e.restorePrefilledValueOnActivate?this.restoreVariableToPrefilledValue({key:t}):e&&e.type===l.O0.BOOLEAN&&this.updateFragmentValue(t,!0)},removeFragment:function(t){this.$emit("event",{type:"update-prompt-variable",key:t,value:null});var e=this.activeFragmentKeys.indexOf(t);this.activeFragmentKeys.splice(e,1)},getFragmentValue:function(t){var e;return null!==(e=this.promptVariables[t])&&void 0!==e?e:""},updateFragmentValue:function(t,e){this.$emit("event",{type:"update-prompt-variable",key:t,value:e})},generateText:function(){this.$emit("event",{type:"generate-text"})},navigateToActiveView:function(){this.$emit("event",{type:"navigate-to-active-view"})},clearError:function(t){var e=t.key;this.$emit("event",{type:"clear-error",key:e})},restoreVariableToPrefilledValue:function(t){var e=t.key;this.$emit("event",{type:"restore-variable-to-prefilled-value",key:e})}}};const k=(0,h.Z)(C,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-d-col"},[e("div",{staticClass:"p-15-32 fg-1 ov-auto"},[t._t("prompt-info"),t._v(" "),t.activeFragments.length>0?e("div",{staticClass:"active-fragments fg-1 mb-1rem"},t._l(t.activeFragments,(function(n){return e("prompt-generation-fragment-row",{key:n.key,attrs:{fragment:n,value:t.getFragmentValue(n.key),"validation-errors":t.validationErrors},on:{"clear-error":t.clearError,input:function(e){return t.updateFragmentValue(n.key,e)},remove:function(e){return t.removeFragment(n.key)}}})})),1):t._e(),t._v(" "),t.inactiveFragments.length>0?e("div",{staticClass:"inactive-fragments fg-1"},t._l(t.inactiveFragments,(function(n){return e("div",{key:n.key,staticClass:"inactive-fragment cursor-pointer p-10-0 flex a-i-c",on:{click:function(e){return t.activateFragment(n.key)}}},[e("img",{staticClass:"au-icon",attrs:{src:"".concat(t.$lw.imagePath,"/author/images/svg/modals/AI-modal-plus-icon.svg"),alt:""}}),t._v(" "),e("span",{staticClass:"lbl-normal grey2 ml-10"},[t._v(t._s(n.inactiveTitle))])])})),0):t._e()],2),t._v(" "),e("div",{staticClass:"p-15 flex j-c-fe a-i-c bt-1px-lightGray"},[t.showNavigateToActionViewButton?e("button",{staticClass:"ml-10 mr-10 lw-faded-btn",on:{click:t.navigateToActiveView}},[t._v("\n            "+t._s(t.navigateToActiveViewButtonLabel)+"\n        ")]):t._e(),t._v(" "),e("button",{staticClass:"btn btn-l",on:{click:t.generateText}},[t._v("Generate")])])])}),[],!1,null,"24539be2",null).exports;var O=n(52200),T=n(68485),P=(n(34553),n(69600),n(45129)),A=n(25857),V=n(30507),S=n(60492);function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){(0,s.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const Z={name:"GeneratedTextView",components:{AuthoringTip:d.Z,RichAnswerRenderer:A.Z,SimpleBlockRenderer:P.Z},props:{blocks:{type:Array,required:!0},readonly:{type:Boolean,default:!1}},computed:{dummyAnswerData:function(){return{value:"",id:"",options:[]}}},methods:{insertContent:function(){this.$emit("event",{type:"insert-content"})},regenerateText:function(){this.$emit("event",{type:"regenerate-text"})},optionIndexToLetter:function(t){return(0,V.O)(t).toUpperCase()},hasAnswerPart:function(t){return![S.bF.OPEN_ENDED,S.bF.FILL_IN_THE_BLANK_BLOCK].includes(t.type)},hasFeedback:function(t){var e,n;return(null===(e=t.blockData.feedbackData)||void 0===e?void 0:e.feedbackCorrect)&&(null===(n=t.blockData.feedbackData)||void 0===n?void 0:n.feedbackWrong)},getCorrectFeedback:function(t){var e,n;return null!==(e=null===(n=t.blockData.feedbackData)||void 0===n?void 0:n.feedbackCorrect)&&void 0!==e?e:""},getWrongFeedback:function(t){var e,n;return null!==(e=null===(n=t.blockData.feedbackData)||void 0===n?void 0:n.feedbackWrong)&&void 0!==e?e:""},getCorrectText:function(t){var e,n,i,a=this,r=(e={},(0,s.Z)(e,S.bF.MC,(function(){var e=t.blockData.options.findIndex((function(t){return t.correct}));return a.optionIndexToLetter(e)})),(0,s.Z)(e,S.bF.DROPDOWN,(function(){var e,n;return null!==(e=null===(n=t.blockData.options.find((function(t){return t.correct})))||void 0===n?void 0:n.label)&&void 0!==e?e:""})),(0,s.Z)(e,S.bF.MCMA,(function(){return t.blockData.options.map((function(t,e){return t.correct?e:-1})).filter((function(t){return-1!==t})).map(a.optionIndexToLetter).join(", ")})),(0,s.Z)(e,S.bF.TRUE_FALSE,(function(){return 0===t.blockData.options.findIndex((function(t){return t.correct}))?"True":"False"})),(0,s.Z)(e,S.bF.OPEN_ENDED,(function(){return""})),(0,s.Z)(e,S.bF.MATCH,(function(){return""})),(0,s.Z)(e,S.bF.FILL_IN_THE_BLANK_BLOCK,(function(){return t.blockData.blanks.map((function(t){return t.blockData.options.filter((function(t){return t.correct})).map((function(t){return t.value})).join(" | ")})).join("<br>")})),e);return null!==(n=null===(i=r[t.type])||void 0===i?void 0:i.call(r))&&void 0!==n?n:""},getDummyAnswerSchema:function(t){var e,n,i=null!==(n=(e={},(0,s.Z)(e,S.bF.ORDERING,(function(){return{options:t.blockData.options.map((function(t){return t.id}))}})),(0,s.Z)(e,S.bF.MATCH,(function(){return{options:t.blockData.options.map((function(t){return{premiseId:t.premise.id,responseId:t.response.id}}))}})),(0,s.Z)(e,S.bF.DROPDOWN,(function(){return{value:'<strong>Options:</strong> <ul style="padding-left: 3ch; margin: .5em 0;">'.concat(t.blockData.options.reduce((function(t,e){return"".concat(t," <li>").concat(e.label,"</li>")}),""),"</ul>")}})),e)[t.type])&&void 0!==n?n:function(){return{}};return{blockId:t.id,answer:E({value:"",id:"",options:[]},i())}}}};const L=(0,h.Z)(Z,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-d-col"},[e("div",{staticClass:"p-15-32 ov-auto"},[t._t("prompt-info"),t._v(" "),e("div",{staticClass:"content-container mb-2rem"},t._l(t.blocks,(function(n){return e("div",{key:n.id,staticClass:"pl-10 pr-10"},[e("simple-block-renderer",{attrs:{block:n}}),t._v(" "),t.hasAnswerPart(n)?e("rich-answer-renderer",{staticClass:"mt-10",attrs:{block:n,answer:t.getDummyAnswerSchema(n),"display-correctness":!1}}):t._e(),t._v(" "),t.getCorrectText(n)?e("p",{staticClass:"mt-10"},[t._v("\n                    Correct answer: "),e("strong",{domProps:{innerHTML:t._s(t.getCorrectText(n))}})]):t._e(),t._v(" "),t.hasFeedback(n)?e("div",{staticClass:"mt-10"},[e("span",{staticClass:"learnworlds-sideform-section-row-lbl"},[t._v("Feedback when the answer is correct:")]),t._v(" "),e("p",[t._v(t._s(t.getCorrectFeedback(n)))]),t._v(" "),e("span",{staticClass:"learnworlds-sideform-section-row-lbl"},[t._v("Feedback when the answer is wrong:")]),t._v(" "),e("p",[t._v(t._s(t.getWrongFeedback(n)))])]):t._e(),t._v(" "),e("hr",{staticClass:"mt-25 mb-25"})],1)})),0),t._v(" "),t.readonly?t._e():e("div",{staticClass:"flex flex-wrap a-i-c gap-8 mb-20"},[e("button",{staticClass:"btn w-full-below-450",on:{click:t.insertContent}},[t._v("Insert content")]),t._v(" "),e("button",{staticClass:"btn btn-secondary w-full-below-450",on:{click:t.regenerateText}},[e("svg",{staticClass:"mr-5",attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M3.64163 2.95378C4.81029 1.94328 6.33372 1.33203 7.99992 1.33203C11.6818 1.33203 14.6666 4.3168 14.6666 7.9987C14.6666 9.42276 14.2201 10.7426 13.4594 11.8258L11.3333 7.9987H13.3333C13.3333 5.05318 10.9455 2.66536 7.99992 2.66536C6.56646 2.66536 5.2651 3.23088 4.30674 4.15098L3.64163 2.95378ZM12.3582 13.0436C11.1895 14.0541 9.66612 14.6654 7.99992 14.6654C4.31802 14.6654 1.33325 11.6806 1.33325 7.9987C1.33325 6.5746 1.77978 5.2548 2.54045 4.17166L4.66658 7.9987H2.66659C2.66659 10.9442 5.0544 13.332 7.99992 13.332C9.43338 13.332 10.7347 12.7665 11.6931 11.8464L12.3582 13.0436Z",fill:"#029c91"}})]),t._v(" "),e("span",[t._v("Regenerate")])])])],2),t._v(" "),e("div",{staticClass:"p-6 flex j-c-fe a-i-c",staticStyle:{"margin-top":"auto"}},[e("authoring-tip",{attrs:{type:"accuracy","show-icon":!1}},[t._v("\n            Check for accuracy before publishing. "),e("a",{attrs:{href:"https://platform.openai.com/docs/chatgpt-education",target:"_blank"}},[t._v("Learn more about AI")]),t._v(" and how to get best outcomes.\n        ")])],1)])}),[],!1,null,"3be3be20",null).exports;n(83112);var H=n(67549),j=(n(32564),n(3058));const D=(0,g.defineComponent)({name:"SimpleDivRenderer",props:{value:{type:String,default:""}}});const F=(0,h.Z)(D,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{domProps:{innerHTML:t._s(t.value)}})}),[],!1,null,null,null).exports,M=(0,g.defineComponent)({name:"ActivatableInput",props:{value:{type:String,default:""},activeClass:{type:String,default:""},inactiveClass:{type:String,default:""},readonly:{type:Boolean,default:!1}},data:function(){return{isActive:!1}},computed:{componentType:function(){return this.isActive?j.Z:F},componentClasses:function(){var t;return t={},(0,s.Z)(t,this.activeClass,this.isActive),(0,s.Z)(t,this.inactiveClass,!this.isActive),t}},methods:{activate:function(){var t=this;return(0,i.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.readonly){e.next=2;break}return e.abrupt("return");case 2:return t.isActive=!0,e.next=5,t.$nextTick();case 5:n=t.$el.querySelector("input"),window.setTimeout((function(){n.dispatchEvent(new InputEvent("click",{bubbles:!0})),n.focus()}),1);case 7:case"end":return e.stop()}}),e)})))()},deactivate:function(){this.readonly||(this.isActive=!1)}}});const N=(0,h.Z)(M,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e(t.componentType,{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.deactivate,expression:"deactivate"}],ref:"element",tag:"component",class:t.componentClasses,attrs:{value:t.value},on:{input:function(e){return t.$emit("input",e)}},nativeOn:{mousedown:function(e){return t.activate.apply(null,arguments)},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.deactivate.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.stopPropagation(),e.preventDefault(),t.deactivate.apply(null,arguments))}]}})}),[],!1,null,"7504113a",null).exports;var B=n(44029),R=n(4909),$=n(94239);function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(Object(n),!0).forEach((function(e){(0,s.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const G=(0,g.defineComponent)({name:"UnitTypeMenu",components:{HoverMenu:B.Z},props:{unit:{type:Object,default:function(){return{title:"",type:$.g1.PB_EBOOK,icon:$.xi.EBOOK}}},readonly:{type:Boolean,default:!1},portalable:{type:Boolean,default:!1}},data:function(){return{POSITION:R.V}},computed:{unitItems:function(){var t=this;return l.Ju.map((function(e){return q(q({},e),{},{callback:function(){return t.selectUnit(e.type)},icon:(0,m.Gi)(e.type)})}))}},methods:{selectUnit:function(t){this.$emit("unit-selected",{type:t})}}});const K=(0,h.Z)(G,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("hover-menu",{attrs:{items:t.unitItems,position:t.POSITION.LEFT,readonly:t.readonly,portalable:t.portalable,"dialog-style":"max-height: 200px; overflow: auto;"},scopedSlots:t._u([{key:"trigger",fn:function(){return[e("button",{staticClass:"btn btn-sm change nowrap",attrs:{title:"Change activity"}},[t._v("Change activity")])]},proxy:!0}])})}),[],!1,null,"183f1c53",null).exports;var z=n(79069),W=n(64794);function X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?X(Object(n),!0).forEach((function(e){(0,s.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const Y={name:"GeneratedCourseOutlineView",components:{AuthoringTip:d.Z,UnitTypeMenu:K,ActivatableInput:N,FloatingAssistantButton:H.Z},props:{sections:{type:Array,required:!0},chatIsLoading:{type:Boolean,default:!1},chatId:{type:String,default:null},readonly:{type:Boolean,default:!1},currentSectionsCount:{type:Number,default:0}},setup:function(){var t=(0,g.ref)(-1),e=(0,g.ref)(-1);return(0,z.Z)(document,"mouseover",(function(n){var i,a,r,s,o=n.target;n.target.closest("[data-hover-ignored]")||(e.value=+(null!==(i=null===(a=o.closest("[data-section-index]"))||void 0===a?void 0:a.getAttribute("data-section-index"))&&void 0!==i?i:-1),t.value=n.target.closest(".section-row")?null:+(null!==(r=null===(s=o.closest("[data-unit-index]"))||void 0===s?void 0:s.getAttribute("data-unit-index"))&&void 0!==r?r:-1))})),{hoverUnitIndex:t,hoverSectionIndex:e}},computed:{sectionsToRender:function(){var t=this;try{return this.sections.map((function(e,n){return{title:e.section,sectionNumber:String(n+1+t.currentSectionsCount).padStart(2,"0"),units:e.units.map((function(t){var e=t.type&&l.us[t.type]?t.type:l.re[$.g1.PB_EBOOK];return{title:t.title,type:e,icon:(0,m.Gi)(l.us[e])}}))}}))}catch(t){return[]}}},methods:{insertContent:function(){this.$emit("event",{type:"insert-content"})},regenerateText:function(){this.$emit("event",{type:"regenerate-text"})},switchToPromptView:function(){this.$emit("event",{type:"change-view",value:l.e1.PROMPT})},getAiAssistantActionForUnit:function(t,e){var n=this;return[{label:"Suggest alternative activity",icon:"/author/images/svg/ai-actions/propose-section.svg",callback:function(){return n.suggestAlternativeUnit(t,e)}},{label:"Rephrase activity",icon:"/author/images/svg/ai-actions/rephrase-section.svg",callback:function(){return n.rephraseUnit(t,e)}}].map((function(t){return Q(Q({},t),{},{icon:n.$lw.img(t.icon)})}))},getAiAssistantActionForSection:function(t){var e=this;return[{label:"Propose a new section",icon:"/author/images/svg/ai-actions/propose-section.svg",callback:function(){return e.suggestAlternativeSection(t)}},{label:"Rephrase section",icon:"/author/images/svg/ai-actions/rephrase-section.svg",callback:function(){return e.rephraseSection(t)}},{label:"Add more activities",icon:"/author/images/svg/ai-actions/add-more-activities.svg",callback:function(){return e.addNewUnitsToSection(t)}},{label:"Reduce activities",icon:"/author/images/svg/ai-actions/reduce-activities.svg",callback:function(){return e.minimizeUnits(t)}}].map((function(t){return Q(Q({},t),{},{icon:e.$lw.img(t.icon)})}))},updateSectionTitleAt:function(t,e){this.changeSectionsData("".concat(t,".section"),e)},updateUnitTitleAt:function(t,e,n){this.changeSectionsData("".concat(t,".units.").concat(e,".title"),n)},updateUnitTypeAt:function(t,e,n){this.changeSectionsData("".concat(t,".units.").concat(e,".type"),l.re[n])},deleteUnitAt:function(t,e){var n=(0,m.ut)(this.sections);return n[t].units.splice(e,1),this.updateSections(n)},deleteSectionAt:function(t){var e=(0,m.ut)(this.sections);e.splice(t,1),this.updateSections(e)},changeSectionIndex:function(t,e){if(t<0||t>=this.sections.length||e<0||e>=this.sections.length)console.warn("Cannot change section index. Indexes out of bounds",{fromIndex:t,toIndex:e});else{var n=(0,m.ut)(this.sections),i=n.splice(t,1),r=(0,a.Z)(i,1)[0];n.splice(e,0,r),this.updateSections(n)}},changeUnitIndex:function(t,e,n){var i=(0,m.ut)(this.sections[t].units);if(e<0||e>=i.length||n<0||n>=i.length)console.warn("Cannot change unit index. Indexes out of bounds",{fromIndex:e,toIndex:n});else{var r=i.splice(e,1),s=(0,a.Z)(r,1)[0];i.splice(n,0,s),this.changeSectionsData("".concat(t,".units"),i)}},updateSections:function(t){this.$emit("event",{type:"set-generated-text",value:t})},changeSectionsData:function(t,e){this.$emit("event",{type:"update-generated-text",propertyPath:t,value:e})},addNewSection:function(){var t=this;return(0,i.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.chat("Add one more section. Send only the newly added section as json. The section should include at least one activity from the avaialble ones.");case 2:n=e.sent,t.updateSections([].concat((0,r.Z)(t.sections),[n]));case 4:case"end":return e.stop()}}),e)})))()},rephraseSection:function(t){var e=this;return(0,i.Z)(c().mark((function n(){var i,a;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.chat('Rephrase the section title for the "'.concat(e.sections[t].section,"\" section. You are strictly forbidden to add curly or square brackets in the section's title. Send only the updated section as json containing just the title."));case 2:a=n.sent,e.changeSectionsData("".concat(t,".section"),null!==(i=a.section)&&void 0!==i?i:a.title);case 4:case"end":return n.stop()}}),n)})))()},suggestAlternativeSection:function(t){var e=this;return(0,i.Z)(c().mark((function n(){var i;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.chat('Suggest an alternative section to replace the "'.concat(e.sections[t].section,'" section. Send only the updated section and its units as json.'));case 2:i=n.sent,e.changeSectionsData("".concat(t),i);case 4:case"end":return n.stop()}}),n)})))()},addNewUnitsToSection:function(t){var e=this;return(0,i.Z)(c().mark((function n(){var i;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.chat('Create a few more units for the "'.concat(e.sections[t].section,'" section. Send only the newly created units as json.'));case 2:i=n.sent,e.changeSectionsData("".concat(t,".units"),[].concat((0,r.Z)(e.sections[t].units),(0,r.Z)(i)));case 4:case"end":return n.stop()}}),n)})))()},minimizeUnits:function(t){var e=this;return(0,i.Z)(c().mark((function n(){var i;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.chat('Suggest an alternative section to replace the "'.concat(e.sections[t].section,'" section. The new section must have less units than the original. The new section MUST contain at least one unit. Send only the updated section and its units as json.'));case 2:i=n.sent,e.changeSectionsData("".concat(t),i);case 4:case"end":return n.stop()}}),n)})))()},addNewBlankUnitBelow:function(t){var e=arguments,n=this;return(0,i.Z)(c().mark((function i(){var a,r,s;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=e.length>1&&void 0!==e[1]?e[1]:null,r={id:(0,m.D1)("unit_"),title:"New unit",type:$.g1.IVIDEO},(s=(0,m.ut)(n.sections[t].units)).splice(null!=a?a:s.length,0,r),n.changeSectionsData("".concat(t,".units"),s);case 5:case"end":return i.stop()}}),i)})))()},addNewUnit:function(t){var e=this;return(0,i.Z)(c().mark((function n(){var i;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.chat('Create one more unit for the "'.concat(e.sections[t].title,'" section. Send only the newly added unit as json.'));case 2:i=n.sent,e.changeSectionsData("".concat(t,".units"),[].concat((0,r.Z)(e.sections[t].units),[i]));case 4:case"end":return n.stop()}}),n)})))()},addNewUnitWithType:function(t,e){var n=this;return(0,i.Z)(c().mark((function i(){var a;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.chat('Create one more unit for the "'.concat(n.sections[t].title,'" section. The unit should be of type "').concat(e,'" Send only the newly added unit as json.'));case 2:a=i.sent,n.changeSectionsData("".concat(t,".units"),[].concat((0,r.Z)(n.sections[t].units),[a]));case 4:case"end":return i.stop()}}),i)})))()},rephraseUnit:function(t,e){var n=this;return(0,i.Z)(c().mark((function i(){var a,r;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=n.sections[t].units[e],i.next=3,n.chat('Rephrase the unit title for the "'.concat(a.title,"\" unit. You are strictly forbidden to add curly or square brackets in the unit's title. Send only the updated unit as json."));case 3:r=i.sent,n.changeSectionsData("".concat(t,".units.").concat(e,".title"),r.title);case 5:case"end":return i.stop()}}),i)})))()},suggestAlternativeUnit:function(t,e){var n=this;return(0,i.Z)(c().mark((function i(){var a,r;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=n.sections[t].units[e],i.next=3,n.chat('Suggest an alternative unit to replace the "'.concat(a.title,'" unit. Send only the updated unit as json.'));case 3:r=i.sent,n.changeSectionsData("".concat(t,".units.").concat(e),r);case 5:case"end":return i.stop()}}),i)})))()},chat:function(t){var e=this;return(0,i.Z)(c().mark((function n(){var i;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.$lw.track(W.Lu.AI_CHAT,{chatId:e.chatId,context:"generated-course-outline-view",message:t}),e.setLoading(!0),n.prev=2,n.next=5,O.Z.aiChat({chatId:e.chatId,prompt:T.FE.SIMPLE,transformerOverride:T.dq.JSON,variables:{text:t}});case 5:return i=n.sent,n.abrupt("return",i.data.answer);case 7:return n.prev=7,e.setLoading(!1),n.finish(7);case 10:case"end":return n.stop()}}),n,null,[[2,,7,10]])})))()},setLoading:function(t){this.$emit("event",{type:"set-loading",value:t})},isUnitButtonsVisible:function(t,e){return t===this.hoverSectionIndex&&this.hoverUnitIndex===e},isSectionButtonsVisible:function(t){return t===this.hoverSectionIndex&&null===this.hoverUnitIndex}}};const J=(0,h.Z)(Y,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-d-col"},[e("div",{staticClass:"p-15-32 course-outline-view ov-auto ov-x-hidden"},[t._t("prompt-info"),t._v(" "),t.sectionsToRender&&t.sectionsToRender.length?e("ul",{staticClass:"sections-list"},t._l(t.sectionsToRender,(function(n,i){return e("li",{key:n.id,staticClass:"section",attrs:{"data-section-index":i}},[e("div",{staticClass:"flex a-i-c mb-1rem flex-nowrap section-row"},[e("span",{staticClass:"section-number fsh-0"},[t._v(t._s(n.sectionNumber))]),t._v(" "),e("activatable-input",{staticClass:"section-title",attrs:{"active-class":"w-80perc",value:n.title,readonly:t.readonly},on:{input:function(e){return t.updateSectionTitleAt(i,e)}}}),t._v(" "),!t.readonly&&t.isSectionButtonsVisible(i)?e("div",{staticClass:"ml-20 ml-0-below-576 fsh-0 flex section-edit-btns gap-4"},[e("button",{staticClass:"edit-btn moveup",class:{disabled:0===i},attrs:{title:"Move section up"},on:{click:function(e){return t.changeSectionIndex(i,i-1)}}}),t._v(" "),e("button",{staticClass:"edit-btn movedn",class:{disabled:i===t.sectionsToRender.length-1},attrs:{title:"Move section down"},on:{click:function(e){return t.changeSectionIndex(i,i+1)}}}),t._v(" "),e("button",{staticClass:"edit-btn delete",class:{disabled:1===t.sectionsToRender.length},attrs:{title:"Delete section"},on:{click:function(e){return t.deleteSectionAt(i)}}}),t._v(" "),e("floating-assistant-button",{attrs:{portalable:!0,actions:t.getAiAssistantActionForSection(i)}})],1):t._e()],1),t._v(" "),n.units?e("ul",{staticClass:"course-units-list"},t._l(n.units,(function(a,r){return e("li",{key:a.id,staticClass:"course-unit",attrs:{"data-unit-index":r}},[e("div",{staticClass:"flex flex-wrap-below-768 a-i-c mb-1rem unit-row row-gap-8"},[e("img",{staticClass:"course-unit-icon",attrs:{src:a.icon,alt:a.title}}),t._v(" "),e("activatable-input",{staticClass:"course-unit-title",attrs:{"active-class":"w-80perc","inactive-class":"mb-5 bb-1px-transparent",value:a.title,readonly:t.readonly},on:{input:function(e){return t.updateUnitTitleAt(i,r,e)}}}),t._v(" "),!t.readonly&&t.isUnitButtonsVisible(i,r)?e("div",{staticClass:"ml-20 ml-0-below-576 flex a-i-c unit-edit-btns gap-4"},[e("unit-type-menu",{staticClass:"change-wrapper",staticStyle:{"flex-shrink":"1"},attrs:{readonly:t.readonly,unit:{icon:a.icon,title:a.title,type:a.type},portalable:!0},on:{"unit-selected":function(e){return t.updateUnitTypeAt(i,r,e.type)}}}),t._v(" "),e("button",{staticClass:"edit-btn add",attrs:{title:"Add a learning unit below"},on:{click:function(e){return t.addNewBlankUnitBelow(i,r+1)}}}),t._v(" "),e("button",{staticClass:"edit-btn moveup",class:{disabled:0===r},attrs:{title:"Move unit up"},on:{click:function(e){return t.changeUnitIndex(i,r,r-1)}}}),t._v(" "),e("button",{staticClass:"edit-btn movedn",class:{disabled:r===n.units.length-1},attrs:{title:"Move unit down"},on:{click:function(e){return t.changeUnitIndex(i,r,r+1)}}}),t._v(" "),e("button",{staticClass:"edit-btn delete",class:{disabled:1===n.units.length},attrs:{title:"Delete unit"},on:{click:function(e){return t.deleteUnitAt(i,r)}}}),t._v(" "),e("floating-assistant-button",{attrs:{portalable:!0,actions:t.getAiAssistantActionForUnit(i,r)}})],1):t._e()],1)])})),0):t._e(),t._v(" "),t.readonly?t._e():e("div",{staticClass:"flex a-i-c gap-7 pl-20"},[e("button",{staticClass:"btn btn-secondary w-full-below-450",on:{click:function(e){return t.addNewUnit(i)}}},[t._v("Suggest new activity")])])])})),0):t._e(),t._v(" "),t.readonly?t._e():e("div",{staticClass:"flex flex-wrap a-i-c gap-7 p-0-20",class:{disabled:t.chatIsLoading}},[e("button",{staticClass:"btn w-full-below-450",on:{click:t.insertContent}},[t._v("Insert content")]),t._v(" "),e("button",{staticClass:"btn btn-secondary w-full-below-450",on:{click:t.regenerateText}},[e("svg",{staticClass:"mr-5",attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M3.64163 2.95378C4.81029 1.94328 6.33372 1.33203 7.99992 1.33203C11.6818 1.33203 14.6666 4.3168 14.6666 7.9987C14.6666 9.42276 14.2201 10.7426 13.4594 11.8258L11.3333 7.9987H13.3333C13.3333 5.05318 10.9455 2.66536 7.99992 2.66536C6.56646 2.66536 5.2651 3.23088 4.30674 4.15098L3.64163 2.95378ZM12.3582 13.0436C11.1895 14.0541 9.66612 14.6654 7.99992 14.6654C4.31802 14.6654 1.33325 11.6806 1.33325 7.9987C1.33325 6.5746 1.77978 5.2548 2.54045 4.17166L4.66658 7.9987H2.66659C2.66659 10.9442 5.0544 13.332 7.99992 13.332C9.43338 13.332 10.7347 12.7665 11.6931 11.8464L12.3582 13.0436Z",fill:"#029c91"}})]),t._v(" "),e("span",[t._v("Regenerate")])]),t._v(" "),e("button",{staticClass:"btn btn-secondary w-full-below-450",on:{click:t.switchToPromptView}},[e("svg",{staticClass:"mr-5",attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M4.27614 10.595L11.0375 3.83353L10.0947 2.89073L3.33333 9.65216V10.595H4.27614ZM4.82843 11.9283H2V9.09989L9.62333 1.47651C9.88373 1.21616 10.3058 1.21616 10.5661 1.47651L12.4518 3.36213C12.7121 3.62248 12.7121 4.04459 12.4518 4.30494L4.82843 11.9283ZM2 13.2616H14V14.595H2V13.2616Z",fill:"#029c91"}})]),t._v(" "),e("span",[t._v("Improve prompt")])]),t._v(" "),e("button",{staticClass:"btn btn-secondary w-full-below-450",on:{click:t.addNewSection}},[e("svg",{staticClass:"mr-5",attrs:{width:"16",height:"16",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M4.33325 4.33203V0.332031H5.66658V4.33203H9.66658V5.66536H5.66658V9.66536H4.33325V5.66536H0.333252V4.33203H4.33325Z",fill:"#029c91"}})]),t._v(" "),e("span",[t._v("Suggest new section")])])])],2),t._v(" "),e("div",{staticClass:"p-6 flex j-c-fe a-i-c",staticStyle:{"margin-top":"auto"}},[e("authoring-tip",{attrs:{type:"accuracy","show-icon":!1}},[t._v("\n            Check for accuracy before publishing. "),e("a",{attrs:{href:"https://platform.openai.com/docs/chatgpt-education",target:"_blank"}},[t._v("Learn more about AI")]),t._v(" and how to get best outcomes.\n        ")])],1)])}),[],!1,null,"68231f4e",null).exports;var tt=n(52832),et=n(96486),nt=n(24717),it=[{title:"üôà An adorable little hiccup just happened in the AI wonderland!",message:"Give it another whirl or double-check your inputs from the previous step, and we'll have this tech marvel purring like a contented kitten in no time! üò∏"},{title:"ü§ñ An unexpected error has materialized and caught us a bit off guard",message:"Please muster up your patience and give it another go, or kindly review the inputs you provided earlier to ensure they are as precise as can be."},{title:"üôà An unexpected error has surfaced, but don't worry, we're here to turn this frown upside down! üîÑ",message:"While we work our magic, how about giving it another shot? Or you might want to take a quick peek at your previous inputs to make sure everything's hunky-dory. üïµÔ∏è‚Äç‚ôÇÔ∏è‚ú®"}];const at={name:"GenerationErrorView",props:{title:{required:!1,default:null},message:{required:!1,default:null},readonly:{type:Boolean,default:!1}},data:function(){return{generatedMessage:(0,m.J)(it)}},methods:{switchToPromptView:function(){this.$emit("event",{type:"change-view",value:l.e1.PROMPT})},regenerateText:function(){this.$emit("event",{type:"regenerate-text"})}}};const rt=(0,h.Z)(at,(function(){var t,e,n=this,i=n._self._c;return i("div",{staticClass:"flex flex-d-col p-15 fg-1 ov-auto a-i-c"},[i("div",{staticClass:"generation-error-view"},[i("h3",{staticClass:"no-results-title grey2"},[n._v(n._s(null!==(t=n.title)&&void 0!==t?t:n.generatedMessage.title))]),n._v(" "),i("p",{staticClass:"settings-descr mb-20"},[n._v(n._s(null!==(e=n.message)&&void 0!==e?e:n.generatedMessage.message))]),n._v(" "),i("div",{staticClass:"flex j-c-c gap-10"},[i("button",{staticClass:"btn",on:{click:n.regenerateText}},[n._v("\n                Try again\n            ")]),n._v(" "),i("button",{staticClass:"ml-10 lw-faded-btn",on:{click:n.switchToPromptView}},[n._v("\n                Edit your options\n            ")])])])])}),[],!1,null,"5e84828c",null).exports;n(41817);const st=(0,g.defineComponent)({name:"SelectedPrompt",props:{prompt:{type:Object,required:!0}},computed:{imagePath:function(){return this.prompt.icon?"".concat(this.$lw.imagePath).concat(this.prompt.icon):""},imageClasses:function(){return this.prompt.description?"w-40":"w-20"}}});const ot=(0,h.Z)(st,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"flex a-i-c"},[t.prompt.icon?e("img",{staticClass:"mr-5 block",class:t.imageClasses,attrs:{src:t.imagePath,alt:""}}):t._e(),t._v(" "),e("div",[e("div",{staticClass:"lbl-normal lbl-dark-gray"},[t._v(t._s(t.prompt.label))]),t._v(" "),t.prompt.description?e("div",{staticClass:"lbl-very-small lbl-light-gray"},[t._v(t._s(t.prompt.description))]):t._e()])])}),[],!1,null,"3ecea91b",null).exports;function ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(n),!0).forEach((function(e){(0,s.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const ut={name:"GeneratedUnitsView",components:{UnitTypeMenu:K,FloatingAssistantButton:H.Z,AuthoringTip:d.Z,ActivatableInput:N},props:{units:{type:Object,required:!0},chatIsLoading:{type:Boolean,default:!1},chatId:{type:String,default:null},readonly:{type:Boolean,default:!1}},computed:{unitsToShow:function(){try{return this.units.units.map((function(t){var e=t.type&&l.us[t.type]?t.type:l.re[$.g1.PB_EBOOK];return{title:t.title,type:e,icon:(0,m.Gi)(l.us[e])}}))}catch(t){return[]}}},methods:{insertContent:function(){this.$emit("event",{type:"insert-content"})},regenerateText:function(){this.$emit("event",{type:"regenerate-text"})},switchToPromptView:function(){this.$emit("event",{type:"change-view",value:l.e1.PROMPT})},getAiAssistantActionForUnit:function(t){var e=this;return[{label:"Suggest alternative activity",icon:"/author/images/svg/ai-actions/propose-section.svg",callback:function(){return e.suggestAlternativeUnit(t)}},{label:"Rephrase activity",icon:"/author/images/svg/ai-actions/rephrase-section.svg",callback:function(){return e.rephraseUnit(t)}}].map((function(t){return lt(lt({},t),{},{icon:e.$lw.img(t.icon)})}))},updateUnitTitleAt:function(t,e){this.changeUnitData("units.".concat(t,".title"),e)},deleteUnit:function(t){var e=(0,m.ut)(this.units);return e.units.splice(t,1),this.updateUnits(e)},updateUnits:function(t){this.$emit("event",{type:"set-generated-text",value:t})},updateUnitType:function(t,e){this.changeUnitData("units.".concat(t,".type"),l.re[e])},changeUnitData:function(t,e){this.$emit("event",{type:"update-generated-text",propertyPath:t,value:e})},rephraseUnit:function(t){var e=this;return(0,i.Z)(c().mark((function n(){var i,a;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.units.units[t],n.next=3,e.chat('Rephrase the unit title for the "'.concat(i.title,"\" unit. You are strictly forbidden to add curly or square brackets in the section's title. Send only the updated unit as json without including anything else in the object apart from its title and type."));case 3:a=n.sent,e.changeUnitData("units.".concat(t,".title"),a.title);case 5:case"end":return n.stop()}}),n)})))()},suggestAlternativeUnit:function(t){var e=this;return(0,i.Z)(c().mark((function n(){var i,a;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.units.units[t],n.next=3,e.chat('Suggest an alternative unit to replace the "'.concat(i.title,'" unit. Send only the updated unit as json.'));case 3:a=n.sent,e.changeUnitData("units.".concat(t),a);case 5:case"end":return n.stop()}}),n)})))()},chat:function(t){var e=this;return(0,i.Z)(c().mark((function n(){var i;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setLoading(!0),n.prev=1,e.$lw.track(W.Lu.AI_CHAT,{chatId:e.chatId,context:"generated-units-view",message:t}),n.next=5,O.Z.aiChat({chatId:e.chatId,prompt:T.FE.SIMPLE,transformerOverride:T.dq.JSON,variables:{text:t}});case 5:return i=n.sent,n.abrupt("return",i.data.answer);case 7:return n.prev=7,e.setLoading(!1),n.finish(7);case 10:case"end":return n.stop()}}),n,null,[[1,,7,10]])})))()},setLoading:function(t){this.$emit("event",{type:"set-loading",value:t})}}};const pt=(0,h.Z)(ut,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-d-col"},[e("div",{staticClass:"p-15-32 course-outline-view ov-auto ov-x-hidden"},[t._t("prompt-info"),t._v(" "),e("ul",{staticClass:"sections-list"},t._l(t.unitsToShow,(function(n,i){return e("li",{key:n.id,staticClass:"course-unit"},[e("div",{staticClass:"flex flex-wrap a-i-c mb-2rem unit-row row-gap-8"},[e("img",{staticClass:"course-unit-icon",attrs:{src:n.icon,alt:n.title}}),t._v(" "),e("activatable-input",{staticClass:"course-unit-title",attrs:{"active-class":"w-80perc","inactive-class":"mb-5 bb-1px-transparent",value:n.title,readonly:t.readonly},on:{input:function(e){return t.updateUnitTitleAt(i,e)}}}),t._v(" "),t.readonly?t._e():e("div",{staticClass:"ml-20 ml-0-below-576 flex a-i-c unit-edit-btns gap-4"},[e("unit-type-menu",{staticClass:"change-wrapper",attrs:{portalable:!0,readonly:t.readonly,unit:{icon:n.icon,title:n.title,type:n.type}},on:{"unit-selected":function(e){return t.updateUnitType(i,e.type)}}}),t._v(" "),e("button",{staticClass:"edit-btn delete",class:{disabled:1===t.unitsToShow.length},attrs:{title:"Delete unit"},on:{click:function(e){return t.deleteUnit(i)}}}),t._v(" "),e("floating-assistant-button",{attrs:{portalable:!0,actions:t.getAiAssistantActionForUnit(i)}})],1)],1)])})),0),t._v(" "),t.readonly?t._e():e("div",{staticClass:"flex flex-wrap a-i-c gap-7 mt-15",class:{disabled:t.chatIsLoading}},[e("button",{staticClass:"btn w-full-below-450",on:{click:t.insertContent}},[t._v("Insert content")]),t._v(" "),e("button",{staticClass:"btn btn-secondary w-full-below-450",on:{click:t.regenerateText}},[e("svg",{staticClass:"mr-5",attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M3.64163 2.95378C4.81029 1.94328 6.33372 1.33203 7.99992 1.33203C11.6818 1.33203 14.6666 4.3168 14.6666 7.9987C14.6666 9.42276 14.2201 10.7426 13.4594 11.8258L11.3333 7.9987H13.3333C13.3333 5.05318 10.9455 2.66536 7.99992 2.66536C6.56646 2.66536 5.2651 3.23088 4.30674 4.15098L3.64163 2.95378ZM12.3582 13.0436C11.1895 14.0541 9.66612 14.6654 7.99992 14.6654C4.31802 14.6654 1.33325 11.6806 1.33325 7.9987C1.33325 6.5746 1.77978 5.2548 2.54045 4.17166L4.66658 7.9987H2.66659C2.66659 10.9442 5.0544 13.332 7.99992 13.332C9.43338 13.332 10.7347 12.7665 11.6931 11.8464L12.3582 13.0436Z",fill:"#029c91"}})]),t._v(" "),e("span",[t._v("Regenerate")])]),t._v(" "),e("button",{staticClass:"btn btn-secondary w-full-below-450",on:{click:t.switchToPromptView}},[e("svg",{staticClass:"mr-5",attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M4.27614 10.595L11.0375 3.83353L10.0947 2.89073L3.33333 9.65216V10.595H4.27614ZM4.82843 11.9283H2V9.09989L9.62333 1.47651C9.88373 1.21616 10.3058 1.21616 10.5661 1.47651L12.4518 3.36213C12.7121 3.62248 12.7121 4.04459 12.4518 4.30494L4.82843 11.9283ZM2 13.2616H14V14.595H2V13.2616Z",fill:"#029c91"}})]),t._v(" "),e("span",[t._v("Improve prompt")])])])],2),t._v(" "),e("div",{staticClass:"p-6 flex j-c-fe a-i-c",staticStyle:{"margin-top":"auto"}},[e("authoring-tip",{attrs:{type:"accuracy","show-icon":!1}},[t._v("\n            Check for accuracy before publishing. "),e("a",{attrs:{href:"https://platform.openai.com/docs/chatgpt-education",target:"_blank"}},[t._v("Learn more about AI")]),t._v(" and how to get best outcomes.\n        ")])],1)])}),[],!1,null,"8fd3ae18",null).exports;var dt=n(20629);function vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(n),!0).forEach((function(e){(0,s.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ft=[{label:"Greek",value:"greek"},{label:"Turkish",value:"turkish"}];const mt={name:"GeneratedFeedbackView",components:{AuthoringTip:d.Z,PulseLoader:u.Z,AiChatbotMessage:p.Z},props:{chatIsLoading:{type:Boolean,default:!1},generatedText:{type:Object,default:function(){}},messageHistory:{type:Array,default:function(){return[]}},readonly:{type:Boolean,default:!1},questionBlockType:{type:String,default:""},isGraded:{type:Boolean,default:!0}},computed:{menuItems:function(){var t=this;return[{label:"Rewrite text",callback:function(){t.regenerateText()}},{label:"Shorten",callback:function(){t.shortenText()}},{label:"Summarize",callback:function(){t.summarizeText()}},{label:"Translate",callback:function(){},submenu:ft.map((function(e){return ht(ht({},e),{},{callback:function(){t.translate(e.value)}})}))}]},shouldShowGrade:function(){return this.generatedText.grade>=0&&S.s2.includes(this.questionBlockType)&&this.isGraded}},watch:{generatedText:{deep:!0,handler:function(){var t=this;this.$nextTick((function(){t.$el.scrollTop=0}))}}},methods:{insertContent:function(){this.$emit("event",{type:"insert-content"})},translate:function(t){this.$emit("event",{type:"translate",value:t})},regenerateText:function(){this.$emit("event",{type:"regenerate-text"})},shortenText:function(){this.$emit("event",{type:"shorten-text"})},expandText:function(){this.$emit("event",{type:"expand-text"})},summarizeText:function(){this.$emit("event",{type:"summarize"})},switchToPromptView:function(){this.$emit("event",{type:"change-view",value:l.e1.PROMPT})},getTextFromMessage:function(t){return null!=t&&t.feedback?t.feedback:t||""}}};const gt=(0,h.Z)(mt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-d-col"},[e("div",{staticClass:"p-15-32 ov-auto"},[t._t("prompt-info"),t._v(" "),e("div",{staticClass:"content-container mb-2rem",domProps:{innerHTML:t._s(t.generatedText.feedback)}}),t._v(" "),t.shouldShowGrade?e("div",[e("strong",[t._v("Score:")]),t._v(" "+t._s(t.generatedText.grade)+" ")]):t._e(),t._v(" "),t.messageHistory.length?e("div",{staticClass:"chat-wrapper"},[t._l(t.messageHistory,(function(n){return e("ai-chatbot-message",{key:n.id,attrs:{id:n.id,sender:n.sender,message:t.getTextFromMessage(n.message)}})})),t._v(" "),t.chatIsLoading?e("div",{staticClass:"flex j-c-c"},[e("pulse-loader"),t._v(" "),e("pulse-loader"),t._v(" "),e("pulse-loader")],1):t._e()],2):t._e(),t._v(" "),t.chatIsLoading||t.readonly?t._e():[e("div",{staticClass:"flex flex-wrap a-i-c gap-8 mb-20"},[e("button",{staticClass:"btn w-full-below-450",on:{click:t.insertContent}},[t._v("Insert content")]),t._v(" "),e("button",{staticClass:"btn btn-secondary w-full-below-450",on:{click:t.regenerateText}},[e("svg",{staticClass:"mr-5",attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M3.64163 2.95378C4.81029 1.94328 6.33372 1.33203 7.99992 1.33203C11.6818 1.33203 14.6666 4.3168 14.6666 7.9987C14.6666 9.42276 14.2201 10.7426 13.4594 11.8258L11.3333 7.9987H13.3333C13.3333 5.05318 10.9455 2.66536 7.99992 2.66536C6.56646 2.66536 5.2651 3.23088 4.30674 4.15098L3.64163 2.95378ZM12.3582 13.0436C11.1895 14.0541 9.66612 14.6654 7.99992 14.6654C4.31802 14.6654 1.33325 11.6806 1.33325 7.9987C1.33325 6.5746 1.77978 5.2548 2.54045 4.17166L4.66658 7.9987H2.66659C2.66659 10.9442 5.0544 13.332 7.99992 13.332C9.43338 13.332 10.7347 12.7665 11.6931 11.8464L12.3582 13.0436Z",fill:"#029c91"}})]),t._v(" "),e("span",[t._v("Regenerate")])]),t._v(" "),e("button",{staticClass:"btn btn-secondary w-full-below-450",on:{click:t.switchToPromptView}},[e("svg",{staticClass:"mr-5",attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M4.27614 10.595L11.0375 3.83353L10.0947 2.89073L3.33333 9.65216V10.595H4.27614ZM4.82843 11.9283H2V9.09989L9.62333 1.47651C9.88373 1.21616 10.3058 1.21616 10.5661 1.47651L12.4518 3.36213C12.7121 3.62248 12.7121 4.04459 12.4518 4.30494L4.82843 11.9283ZM2 13.2616H14V14.595H2V13.2616Z",fill:"#029c91"}})]),t._v(" "),e("span",[t._v("Improve prompt")])]),t._v(" "),e("button",{staticClass:"btn btn-secondary w-full-below-450",on:{click:t.expandText}},[e("svg",{staticClass:"mr-5",attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M1.33325 12.0013H7.99992V13.3346H1.33325V12.0013ZM1.33325 7.33464H14.6666V8.66797H1.33325V7.33464ZM1.33325 2.66797H14.6666V4.0013H1.33325V2.66797ZM11.9999 12.0013V10.0013H13.3333V12.0013H15.3333V13.3346H13.3333V15.3346H11.9999V13.3346H9.99992V12.0013H11.9999Z",fill:"#029c91"}})]),t._v(" "),e("span",[t._v("Expand")])]),t._v(" "),e("button",{staticClass:"btn btn-secondary w-full-below-450",on:{click:t.shortenText}},[e("svg",{attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M12.6667 12.6292H3.87103V3.83351V1.5V1.4H3.77103H2.896H2.796V1.5V3.83351V13.6042V13.7042H2.896H12.6667H15.0002H15.1002V13.6042V12.7292V12.6292H15.0002H12.6667Z",fill:"#029c91",stroke:"#029c91","stroke-width":"0.2"}}),t._v(" "),e("path",{attrs:{d:"M13.104 12.0986H13.204V11.9986V3.39453V3.29453H13.104H4.5H4.4V3.39453V4.26957V4.36957H4.5H12.129V11.9986V12.0986H12.229H13.104Z",fill:"#029c91",stroke:"#029c91","stroke-width":"0.2"}}),t._v(" "),e("path",{attrs:{d:"M12.229 14.232H12.129V14.332V15.4987V15.5987H12.229H13.104H13.204V15.4987V14.332V14.232H13.104H12.229Z",fill:"#029c91",stroke:"#029c91","stroke-width":"0.2"}}),t._v(" "),e("path",{attrs:{d:"M1 3.29453H0.9V3.39453V4.26957V4.36957H1H2.16663H2.26663V4.26957V3.39453V3.29453H2.16663H1Z",fill:"#029c91",stroke:"#029c91","stroke-width":"0.2"}})]),t._v(" "),e("span",[t._v("Shorten")])])])]],2),t._v(" "),e("div",{staticClass:"p-6 flex j-c-fe a-i-c",staticStyle:{"margin-top":"auto"}},[e("authoring-tip",{attrs:{type:"accuracy","show-icon":!1}},[t._v("\n                Check for accuracy before publishing. "),e("a",{attrs:{href:"https://platform.openai.com/docs/chatgpt-education",target:"_blank"}},[t._v("Learn more about AI")]),t._v(" and how to get best outcomes.\n            ")])],1)])}),[],!1,null,"9849bf94",null).exports;var yt=n(98666);n(86535),n(99244);const bt=(0,g.defineComponent)({name:"PromptSelectionView",props:{aiMenus:{type:Array,required:!0}},computed:{aiMenu:function(){var t;return null===(t=this.aiMenus)||void 0===t?void 0:t.find((function(t){var e=t.context;return null==e?void 0:e.inAppContext.includes(W.QC.ASSISTANT_MODAL_PROMPT_SELECTION_VIEW)}))},categories:function(){var t;return null===(t=this.aiMenu)||void 0===t?void 0:t.categories.filter((function(t){return"edit-text"!==t.id}))},prompts:function(){return this.categories.flatMap((function(t){return t.items})).map((function(t){return t.prompt})).filter((function(t){return t}))}},methods:{changePrompt:function(t){this.$emit("event",{type:"change-prompt",prompt:t})}}});const wt=(0,h.Z)(bt,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"flex flex-d-col pt-15 fg-1 a-i-c"},[e("h3",{staticClass:"no-results-title grey2 mt-10 mb-10 pr-5 pl-5 weight-500"},[t._v("\n        How do you want to start?\n    ")]),t._v(" "),e("div",{staticClass:"prompt-selection-view-options"},t._l(t.prompts,(function(n){return e("div",{key:n.id,staticClass:"flex a-i-c cursor-pointer radius-8 prompt-selection-view-options--item",attrs:{role:"button"},on:{click:function(e){return t.changePrompt(n)}}},[n.description?e("img",{staticClass:"fsh-0 w-40 block mr-10",attrs:{src:t.$lw.img(n.icon),alt:n.label}}):e("div",{staticClass:"prompt-icon-wrapper w-40 h-40 mr-10 fsh-0"},[e("img",{staticClass:"w-full h-full",attrs:{src:t.$lw.img(n.icon),alt:n.label}})]),t._v(" "),e("div",{staticClass:"flex flex-d-col fg-1 j-c-c"},[e("span",{staticClass:"lbl-small lbl-dark weight-500"},[t._v(t._s(n.label))]),t._v(" "),n.description?e("span",{staticClass:"lbl-very-small lbl-light-gray"},[t._v(t._s(n.description))]):t._e()])])})),0)])}),[],!1,null,"4d35e4a0",null).exports;function _t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function xt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_t(Object(n),!0).forEach((function(e){(0,s.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const Ct={name:"AiAssistantModal",components:{AiAssistantLoader:yt.Z,AuthoringTip:d.Z,PromptInfo:ot},props:{aiAssistantPayload:{type:Object,required:!0},modalWidth:{type:Number,default:500},modalHeight:{type:Number,default:800},modalTitle:{type:String,default:""},source:{type:Object,default:null},readonly:{type:Boolean,default:!1}},data:function(){return{AI_PROVIDER:W.tC,LINKS:T.BA,AI_ASSISTANT_MODAL_VIEWS:l.e1,message:"",history:[],reverseHistory:[],topic:"",chatId:"",promptVariables:{},tone:l.zF.NEUTRAL,activeView:l.e1.PROMPT,generatedText:null,isLoading:!1,chatIsLoading:!1,messageHistory:[],validationErrors:{}}},computed:xt(xt(xt({},(0,dt.rn)("ai",["totalPrompts","availablePrompts","provider","aiMenus"])),(0,dt.Se)("ai",["consumedPrompts"])),{},{modalStylesViewOverrides:function(){var t;return(0,m.EQ)(this.activeView,(t={},(0,s.Z)(t,l.e1.PROMPT_SELECTION,{width:"910px"}),(0,s.Z)(t,"default",{}),t))},showAiPrompt:function(){return this.activeView===l.e1.TEXT&&!this.readonly},activeViewComponent:function(){var t;return(t={},(0,s.Z)(t,l.e1.PROMPT,k),(0,s.Z)(t,l.e1.TEXT,f),(0,s.Z)(t,l.e1.QUESTIONS,L),(0,s.Z)(t,l.e1.COURSE_OUTLINE,J),(0,s.Z)(t,l.e1.UNITS,pt),(0,s.Z)(t,l.e1.FEEDBACK,gt),(0,s.Z)(t,l.e1.ERROR,rt),(0,s.Z)(t,l.e1.PROMPT_SELECTION,wt),t)[this.activeView]},activeViewProps:function(){var t,e,n;return null!==(n=(e={},(0,s.Z)(e,l.e1.PROMPT,{promptConfig:this.aiAssistantPayload.prompt,promptVariables:this.promptVariables,validationErrors:this.validationErrors,showNavigateToActionViewButton:!!this.generatedText,readonly:this.readonly}),(0,s.Z)(e,l.e1.TEXT,{generatedText:this.generatedText,messageHistory:this.messageHistory,chatIsLoading:this.chatIsLoading,readonly:this.readonly,showEditOptionsEnabled:!(null===(t=this.aiAssistantPayload.prompt)||void 0===t||!t.promptFragments.find((function(t){return![l.O0.SELECTION,l.O0.HIDDEN,l.O0.SIMPLE].includes(t.type)})))}),(0,s.Z)(e,l.e1.FEEDBACK,{questionBlockType:this.aiAssistantPayload.data.blockType,isGraded:this.aiAssistantPayload.data.isGraded,generatedText:this.generatedText,messageHistory:this.messageHistory,chatIsLoading:this.chatIsLoading,readonly:this.readonly}),(0,s.Z)(e,l.e1.QUESTIONS,{blocks:this.generatedText,readonly:this.readonly}),(0,s.Z)(e,l.e1.COURSE_OUTLINE,{sections:this.generatedText,chatIsLoading:this.chatIsLoading,chatId:this.chatId,readonly:this.readonly,currentSectionsCount:this.aiAssistantPayload.currentSectionsCount}),(0,s.Z)(e,l.e1.UNITS,{units:this.generatedText,chatIsLoading:this.chatIsLoading,chatId:this.chatId,readonly:this.readonly}),(0,s.Z)(e,l.e1.PROMPT_SELECTION,{aiMenus:this.aiMenus}),e)[this.activeView])&&void 0!==n?n:{}},generatedTextContent:function(){var t,e,n,i,a,s=null!==(t=null===(e=(0,r.Z)(this.messageHistory).reverse().find((function(t){return t.sender===p._.BOT})))||void 0===e?void 0:e.message)&&void 0!==t?t:this.generatedText;if((null!==(n=null===(i=this.aiAssistantPayload.data)||void 0===i?void 0:i.transformerOverride)&&void 0!==n?n:null===(a=this.aiAssistantPayload.prompt)||void 0===a?void 0:a.transformer)!==l.Dl.MARKDOWN)return s;var o=(0,m.gp)(s);return o.length>0?o:s},allPromptFragmentVariableKeys:function(){var t=this.aiAssistantPayload.prompt.promptFragments.find((function(t){return t.type===l.O0.ASSESSMENT_QUESTION_GENERATION})),e=this.aiAssistantPayload.prompt.promptFragments.find((function(t){return t.type===l.O0.CONTEXT}));return[].concat((0,r.Z)(this.aiAssistantPayload.prompt.promptFragments.map((function(t){return t.key}))),(0,r.Z)((0,m.LH)(t,l.rM)),(0,r.Z)((0,m.LH)(e,l.l$)))}}),created:function(){var t,e,n,i,r=this;if(!this.readonly){var s,o,c,u,p,d,v,h=null!==(s=null===(o=this.aiAssistantPayload.prompt)||void 0===o?void 0:o.promptFragments)&&void 0!==s?s:[];h.length>0&&null!==(c=this.aiAssistantPayload.data)&&void 0!==c&&c.selectedText&&h.forEach((function(t){t.type===l.O0.SELECTION&&r.updatePromptVariable({key:t.key,value:r.aiAssistantPayload.data.selectedText})})),Object.entries(null!==(u=null===(p=this.aiAssistantPayload)||void 0===p||null===(d=p.data)||void 0===d?void 0:d.prefilledVariableValues)&&void 0!==u?u:{}).forEach((function(t){var e=(0,a.Z)(t,2),n=e[0],i=e[1];return r.updatePromptVariable({key:n,value:i})})),((0,nt.t)(this.aiAssistantPayload.prompt)||null!==(v=this.aiAssistantPayload.prompt)&&void 0!==v&&v.autoSubmit)&&this.generateText()}null!==(t=this.aiAssistantPayload)&&void 0!==t&&null!==(e=t.initialMessageHistory)&&void 0!==e&&e.length&&(this.generatedText=null===(n=this.aiAssistantPayload)||void 0===n?void 0:n.initialMessageHistory[this.aiAssistantPayload.initialMessageHistory.length-1].message,this.setActiveView({value:this.activeViewForAction(this.aiAssistantPayload.prompt.action)}),this.messageHistory=null===(i=this.aiAssistantPayload)||void 0===i?void 0:i.initialMessageHistory.slice(2,this.aiAssistantPayload.initialMessageHistory.length-1));this.activeView=this.aiAssistantPayload.prompt?l.e1.PROMPT:l.e1.PROMPT_SELECTION},methods:xt(xt({},(0,dt.OI)("ai",["setTotalPrompts","setAvailablePrompts","setProvider"])),{},{handleEvent:function(t){this.trackAiEvent(t.type);var e={"clear-error":this.clearError,"update-prompt-variable":this.updatePromptVariable,"restore-variable-to-prefilled-value":this.restoreVariableToPrefilledValue,"tone-changed":this.setTone,"generate-text":this.generateText,"navigate-to-active-view":this.navigateToActiveView,"regenerate-text":this.generateText,"expand-text":this.expandText,"shorten-text":this.shortenText,summarize:this.summarizeText,translate:this.translate,"change-view":this.setActiveView,"insert-content":this.apply,"set-generated-text":this.setGeneratedText,"update-generated-text":this.updateGeneratedText,"set-loading":this.setLoading,"set-chat-loading":this.setChatLoading,"change-prompt":this.changePrompt};t.type&&e[t.type]||console.error("Wrong or missing event type"),e[t.type].call(this,t)},setTone:function(t){var e=t.value;this.tone=e},translate:function(t){var e=t.value;this.chat("Translate this in ".concat(e))},updatePromptVariable:function(t){var e=t.key,n=t.value;console.log("UPDATED PROMPT VARIABLE: ",{key:e,value:n}),g.default.set(this.promptVariables,e,n),this.clearError({key:e})},navigateToActiveView:function(){this.setActiveView({value:this.activeViewForAction(this.aiAssistantPayload.prompt.action)})},generateText:function(){var t=this;return(0,i.Z)(c().mark((function e(){var n,i,r,o,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,n=Object.entries(t.promptVariables).reduce((function(t,e){var n=(0,a.Z)(e,2),i=n[0],r=n[1];return(0,m.Kn)(r)?xt(xt({},t),r):xt(xt({},t),{},(0,s.Z)({},i,r))}),{}),e.prev=2,t.$lw.track(W.Lu.AI_PROMPT,{promptId:t.aiAssistantPayload.prompt.id,variables:n,source:t.source}),e.next=6,(0,m.Eh)(O.Z.aiChat({prompt:t.aiAssistantPayload.prompt.id,variables:n,source:t.source,transformerOverride:null!==(i=null===(r=t.aiAssistantPayload.data)||void 0===r?void 0:r.transformerOverride)&&void 0!==i?i:null}));case 6:o=e.sent,t.generatedText=o.data.answer,t.chatId=o.data.chatId,t.messageHistory=[],t.setTotalPrompts(o.data.totalPrompts),t.setAvailablePrompts(o.data.availablePrompts),t.setProvider(o.data.provider),t.setActiveView({value:t.activeViewForAction(t.aiAssistantPayload.prompt.action)}),e.next=34;break;case 16:if(e.prev=16,e.t0=e.catch(2),1!==e.t0.length||"insufficient_ai_credits"!==e.t0[0].context){e.next=21;break}return t.showAiLimitAlert(),e.abrupt("return");case 21:if(1!==e.t0.length||"invalid_ai_api_key"!==e.t0[0].context){e.next=24;break}return t.showInvalidAPIKeyAlert(),e.abrupt("return");case 24:if(Array.isArray(e.t0)&&(1!==e.t0.length||null!==e.t0[0].context)){e.next=28;break}return t.setActiveView({value:l.e1.ERROR}),console.error(e.t0),e.abrupt("return");case 28:return(0,m.zG)(e.t0,t.allPromptFragmentVariableKeys),t.setActiveView({value:l.e1.PROMPT}),t.validationErrors=(0,m.KU)(e.t0),e.next=33,t.$nextTick();case 33:null===(u=t.$el.querySelector(".js-ai-prompt-validation-errors"))||void 0===u||u.scrollIntoView({behavior:"smooth",block:"center"});case 34:return e.prev=34,t.isLoading=!1,e.finish(34);case 37:case"end":return e.stop()}}),e,null,[[2,16,34,37]])})))()},activeViewForAction:function(t){var e,n,i=(e={},(0,s.Z)(e,l.wx.QUESTIONS_GENERATION,l.e1.QUESTIONS),(0,s.Z)(e,l.wx.COURSE_CONTENT_GENERATION,l.e1.COURSE_OUTLINE),(0,s.Z)(e,l.wx.UNIT_GENERATION,l.e1.UNITS),(0,s.Z)(e,l.wx.FEEDBACK_GENERATION,l.e1.FEEDBACK),(0,s.Z)(e,"default",l.e1.TEXT),e);return null!==(n=i[t])&&void 0!==n?n:i.default},setActiveView:function(t){var e=t.value;this.activeView=e},closeAfterConfirmation:function(){if(!this.isLoading){var t=Object.keys(this.promptVariables).some(this.hasPromptVariableBeenEdited);(!!this.generatedText||t)&&!this.readonly?this.$lw.showMessage(T.zG.ALERT,"Close AI Assistant?","Any AI generated content will be lost.",[{name:"Close",func:this.close,class:"solid"},{name:"Cancel"}]):this.close()}},close:function(){this.$emit("close")},chat:function(t){var e=this;return(0,i.Z)(c().mark((function n(){var i,a,r;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return e.chatIsLoading=!0,n.prev=3,a=(0,m.D1)("message"),e.messageHistory.push({id:a,sender:p._.USER,message:t}),e.message="",e.$nextTick((function(){var t=e.$el.querySelector("#".concat(a," + div"));t&&t.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})})),e.$lw.track(W.Lu.AI_CHAT,{chatId:e.chatId,context:"ai-assistant",source:e.source}),n.next=11,O.Z.aiChat({chatId:e.chatId,prompt:T.FE.SIMPLE,source:e.source,variables:{text:t},transformerOverride:null===(i=e.aiAssistantPayload.prompt)||void 0===i?void 0:i.transformer});case 11:r=n.sent,e.chatId=r.data.chatId,e.messageHistory.push({id:(0,m.D1)("message"),sender:p._.BOT,message:r.data.answer}),e.setTotalPrompts(r.data.totalPrompts),e.setAvailablePrompts(r.data.availablePrompts),e.setProvider(r.data.provider),e.$nextTick((function(){var t=e.$el.querySelector("#".concat(a));t&&t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})})),n.next=30;break;case 20:if(n.prev=20,n.t0=n.catch(3),console.error(n.t0),1!==n.t0.length||"insufficient_ai_credits"!==n.t0[0].context){n.next=26;break}return e.showAiLimitAlert(),n.abrupt("return");case 26:if(1!==n.t0.length||"invalid_ai_api_key"!==n.t0[0].context){n.next=29;break}return e.showInvalidAPIKeyAlert(),n.abrupt("return");case 29:1===n.t0.length&&null===n.t0[0].context&&e.$lw.showMessage(T.zG.ALERT,"An unexpected error occurred!","AI system has encountered an unexpected error and crashed. We kindly request you to refresh the page and try again",[{name:"OK"}]);case 30:return n.prev=30,e.chatIsLoading=!1,n.finish(30);case 33:case"end":return n.stop()}}),n,null,[[3,20,30,33]])})))()},showAiLimitAlert:function(){this.$lw.showMessage(T.zG.ALERT,"AI prompt limit is reached for this month!","To continue creating new content and benefiting from the AI capabilities, please contact our support team to request an expansion of your account's AI prompts.",[{name:"Contact Support",func:function(){window.open(T.BA.SUPPORT)},class:"solid"},{name:"Cancel"}])},showInvalidAPIKeyAlert:function(){this.$lw.showMessage(T.zG.ALERT,"Invalid API key","Your OpenAI API key is not valid. Please update your API key and try again.",[{name:"Update API key",func:function(){window.top.authorController.redirectTo("/author/ai")},class:"solid"},{name:"Cancel"}])},expandText:function(){this.chat("Make it longer")},shortenText:function(){this.chat("Make it shorter")},summarizeText:function(){this.chat("Summarize it.")},apply:function(){var t=this;return(0,i.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.generatedTextContent){e.next=2;break}return e.abrupt("return");case 2:t.$emit("apply",{generatedTextContent:t.generatedTextContent,action:t.aiAssistantPayload.prompt.action||l.wx.ADDITION,data:t.aiAssistantPayload.data,variables:t.promptVariables});case 3:case"end":return e.stop()}}),e)})))()},changePrompt:function(t){var e=t.prompt;this.$emit("change-prompt",{prompt:e}),this.setActiveView({value:l.e1.PROMPT})},clearError:function(t){var e=t.key;this.$delete(this.validationErrors,e)},setGeneratedText:(0,et.debounce)((function(t){var e=t.value;this.updateHistory(),this.generatedText=e}),350),updateGeneratedText:(0,et.debounce)((function(t){var e=t.propertyPath,n=t.value;this.updateHistory(),(0,tt.nR)(this.generatedText,e,n)}),350),updateHistory:function(){this.generatedText&&(this.history=[].concat((0,r.Z)(this.history),[(0,m.ut)(this.generatedText)]),this.reverseHistory=[])},undo:function(){0!==this.history.length&&(this.reverseHistory=[].concat((0,r.Z)(this.reverseHistory),[(0,m.ut)(this.generatedText)]),this.generatedText=(0,m.ut)(this.history.pop()))},redo:function(){0!==this.reverseHistory.length&&(this.history=[].concat((0,r.Z)(this.history),[(0,m.ut)(this.generatedText)]),this.generatedText=(0,m.ut)(this.reverseHistory.pop()))},setLoading:function(t){var e=t.value;this.isLoading=e},setChatLoading:function(t){var e=t.value;this.chatIsLoading=e},restoreVariableToPrefilledValue:function(t){var e,n,i,a=t.key,r=null===(e=this.aiAssistantPayload)||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.prefilledVariableValues)||void 0===i?void 0:i[a];void 0!==r&&this.updatePromptVariable({key:a,value:r})},hasPromptVariableBeenEdited:function(t){var e,n,i,a,r,s=null===(e=this.aiAssistantPayload)||void 0===e||null===(n=e.prompt)||void 0===n?void 0:n.promptFragments.find((function(e){return e.key===t})),o=null===(i=this.aiAssistantPayload)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.prefilledVariableValues)||void 0===r?void 0:r[t],c=this.promptVariables[t];return c&&o!==c&&s.default!==c},trackAiEvent:function(t){["generate-text","regenerate-text","expand-text","shorten-text","summarize","translate","insert-content"].includes(t)&&this.$lw.track(W.Lu.AI_RESULTS,{promptId:this.aiAssistantPayload.prompt.id,action:t,context:this.source.type})}})};const kt=(0,h.Z)(Ct,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"on-esc-press",rawName:"v-on-esc-press",value:t.closeAfterConfirmation,expression:"closeAfterConfirmation"}],staticClass:"learnworlds-popup-window-wrapper white pos-fixed size-full flex a-i-c j-c-c",staticStyle:{"z-index":"300"}},[e("div",{staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},on:{click:t.closeAfterConfirmation}}),t._v(" "),e("div",{staticClass:"ov-hidden learnworlds-popup-window pos-rel w-800 h-600 au-white-bg",style:t.modalStylesViewOverrides},[e("div",{staticClass:"flex flex-d-col h-full"},[e("header",{staticClass:"flex a-i-fs j-c-sb p-15 bb-1px-lightGray"},[e("div",{staticClass:"flex lw-au-flex-d-col-sp a-i-fs fg-1 fsh-1 gap-8 ov-hidden"},[e("div",{staticClass:"flex a-i-fs gap-10"},[e("img",{staticClass:"mt-2",attrs:{src:"".concat(t.$lw.imagePath,"/author/images/svg/modals/AI-modal-magic-icon.svg"),alt:"Assistant"}}),t._v(" "),t.modalTitle?e("div",{staticClass:"lbl-normal ws-normal weight-500 lbl-ai-assistant ellipsis-text"},[t._v(t._s(t.modalTitle))]):t._e()]),t._v(" "),e("span",{staticClass:"ml-2 authoring-tag ginger ml-25-below-576"},[t._v("Beta")])]),t._v(" "),t.activeView===t.AI_ASSISTANT_MODAL_VIEWS.COURSE_OUTLINE?e("div",{staticClass:"flex a-i-c gap-4",staticStyle:{flex:"0 0 65px"}},[e("button",{staticClass:"au-toolbar-option toolbar-action fsh-0",class:{disabled:t.history.length<1},staticStyle:{"user-select":"none"},on:{click:t.undo}},[e("img",{staticClass:"au-toolbar-option-icon w-16",attrs:{src:t.$lw.img("/author/images/svg/topbar/icon_s-undo.svg")}})]),t._v(" "),e("button",{staticClass:"au-toolbar-option toolbar-action fsh-0",class:{disabled:t.reverseHistory.length<1},staticStyle:{"user-select":"none"},on:{click:t.redo}},[e("img",{staticClass:"au-toolbar-option-icon w-16",attrs:{src:t.$lw.img("/author/images/svg/topbar/icon_s-redo.svg")}})])]):t._e(),t._v(" "),e("div",{staticClass:"flex a-i-c j-c-fe"},[e("div",{staticClass:"close dark-gray-close ml-1rem",on:{click:t.closeAfterConfirmation}})])]),t._v(" "),e("div",{staticClass:"fg-1 ov-auto"},[e(t.activeViewComponent,t._b({tag:"component",staticClass:"h-full ov-auto",on:{event:t.handleEvent},scopedSlots:t._u([{key:"prompt-info",fn:function(){return[t.provider===t.AI_PROVIDER.LEARNWORLDS&&t.availablePrompts<=10?e("AuthoringTip",{staticClass:"mb-10"},[t._v("\n                            You have used "+t._s(t.consumedPrompts)+" out of "+t._s(t.totalPrompts)+" free prompts for this month.\n                            You can "),e("a",{attrs:{href:t.LINKS.SUPPORT,target:"_blank"}},[t._v(" contact support")]),t._v("\n                            if you want to add more prompts in your account.\n                        ")]):t._e(),t._v(" "),e("prompt-info",{staticClass:"mb-20",attrs:{prompt:t.aiAssistantPayload.prompt}})]},proxy:!0}])},"component",t.activeViewProps,!1))],1),t._v(" "),t.showAiPrompt?e("div",{staticClass:"p-15 gray-bg",class:{disabled:t.chatIsLoading}},[e("div",{staticClass:"pos-rel"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"pr-40 no-edit b-1px-gray lw-input lw-input-small white-bg lw-radius-small",attrs:{placeholder:"Ask AI to improve the results"},domProps:{value:t.message},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.chat(t.message))},input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(" "),e("button",{staticClass:"pos-abs cursor-pointer tr h-full w-40 flex a-i-c j-c-c",class:{disabled:!t.message},on:{click:function(e){return t.chat(t.message)}}},[e("svg",{attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M2.33333 0.896484C2.3895 0.896484 2.44476 0.910678 2.49397 0.937751L14.8023 7.70735C14.9636 7.79602 15.0225 7.99875 14.9337 8.16002C14.9033 8.21542 14.8577 8.26102\n                                14.8023 8.29148L2.49397 15.061C2.33267 15.1498 2.12998 15.091 2.04126 14.9296C2.01419 14.8804 2 14.8252 2 14.769V1.22982C2 1.04572 2.14924 0.896484 2.33333 0.896484ZM3.33333\n                                2.92109V7.33275H6.66667V8.66608H3.33333V13.0777L12.5666 7.99942L3.33333 2.92109Z",fill:"black"}})])])])]):t._e()]),t._v(" "),t.isLoading?e("ai-assistant-loader"):t._e()],1)])}),[],!1,null,"5c86089e",null).exports},98666:(t,e,n)=>{n.d(e,{Z:()=>a});const i={name:"AiAssistantLoader"};const a=(0,n(51900).Z)(i,(function(){this._self._c;return this._m(0)}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"assistant-loading-wrapper"},[e("div",{staticClass:"assistant-loading"},[e("div",{staticClass:"rect1"}),t._v(" "),e("div",{staticClass:"rect2"}),t._v(" "),e("div",{staticClass:"rect3"}),t._v(" "),e("div",{staticClass:"rect4"}),t._v(" "),e("div",{staticClass:"rect5"})])])}],!1,null,null,null).exports},67549:(t,e,n)=>{n.d(e,{Z:()=>o});var i=n(70538),a=n(44029),r=n(4909);const s=(0,i.defineComponent)({name:"FloatingAssistantButton",components:{HoverMenu:a.Z},props:{actions:{type:Array,default:function(){return[]}},position:{type:String,default:r.V.RIGHT},portalable:{type:Boolean,default:!1}}});const o=(0,n(51900).Z)(s,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("hover-menu",{attrs:{items:t.actions,position:t.position,portalable:t.portalable},scopedSlots:t._u([{key:"trigger",fn:function(){return[e("button",t._g(t._b({staticClass:"floating-assistant-button cursor-pointer lw-hide-tp lw-hide-sl lw-hide-sp",attrs:{title:""}},"button",t.$attrs,!1),t.$listeners),[e("img",{attrs:{src:t.$lw.img("/author/images/svg/modals/AI-modal-magic-icon.svg"),alt:""}})])]},proxy:!0}])})}),[],!1,null,"61d8485e",null).exports},44029:(t,e,n)=>{n.d(e,{Z:()=>s});n(82526),n(41817);var i=n(70538),a=n(4909);const r=(0,i.defineComponent)({name:"HoverMenu",components:{HoverableDropdown:a.Z},props:{items:{type:Array,default:function(){return[]}},position:{type:String,default:a.V.NONE},dialogStyle:{default:""},readonly:{type:Boolean,default:!1},portalable:{type:Boolean,default:!1}}});const s=(0,n(51900).Z)(r,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("hoverable-dropdown",t._b({staticClass:"hover-menu",attrs:{disabled:t.readonly,position:t.position,portalable:t.portalable,"content-style":t.dialogStyle},scopedSlots:t._u([{key:"trigger",fn:function(){return[t._t("trigger")]},proxy:!0},{key:"content",fn:function(){return[e("ul",{staticClass:"lst-none"},t._l(t.items,(function(n){return e("li",{key:n.label,staticClass:"flex a-i-c radius-5 cursor-pointer p-4-10 ai-hover",attrs:{role:"button"},on:{click:n.callback}},[n.submenu?e("hover-menu",{staticClass:"p-7-10",attrs:{items:n.submenu,"content-style":"right: 100%;top:-100%;"},scopedSlots:t._u([{key:"trigger",fn:function(){return[e("div",{staticClass:"flex a-i-c"},[n.icon?e("img",{staticClass:"mr-10",attrs:{src:n.icon,alt:""}}):t._e(),t._v(" "),e("span",[t._v(t._s(n.label))])])]},proxy:!0}],null,!0)}):e("div",{staticClass:"flex a-i-c"},[n.icon?e("img",{staticClass:"mr-5 block",attrs:{src:n.icon,alt:""}}):t._e(),t._v(" "),e("div",{staticClass:"ai-txt"},[e("div",{staticClass:"lbl-normal lbl-dark-gray"},[t._v(t._s(n.label))]),t._v(" "),n.description?e("div",{staticClass:"lbl-very-small lbl-light-gray"},[t._v(t._s(n.description))]):t._e()])])],1)})),0)]},proxy:!0}],null,!0)},"hoverable-dropdown",t.$attrs,!1))}),[],!1,null,null,null).exports},94992:(t,e,n)=>{n.d(e,{Z:()=>a});const i=(0,n(70538).defineComponent)({name:"ValidationErrors",props:{validationErrors:{type:Array,default:function(){return[]}}}});const a=(0,n(51900).Z)(i,(function(){var t=this,e=t._self._c;t._self._setupProxy;return t.validationErrors.length?e("div",{ref:"errors",staticClass:"js-ai-prompt-validation-errors"},t._l(t.validationErrors,(function(n){return e("p",{key:n,staticClass:"error-message"},[t._v("\n        "+t._s(n)+"\n    ")])})),0):t._e()}),[],!1,null,null,null).exports},90297:(t,e,n)=>{n.d(e,{Z:()=>l});n(47941),n(82526),n(57327),n(41539),n(38880),n(57658),n(89554),n(54747),n(49337),n(33321),n(69070);var i=n(4942),a=n(44925),r=["type"];function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const c={name:"SettingsBasicFactory",props:{setting:{type:Object,required:!0}},data:function(){return{localSettingType:null}},computed:{settingProps:function(){var t=this.setting,e=(t.type,(0,a.Z)(t,r));return o(o({},this.$attrs),e)},settingType:function(){return this.setting.type}},watch:{settingType:{immediate:!0,handler:function(t,e){t!==e&&(this.localSettingType=t)}}}};const l=(0,n(51900).Z)(c,(function(){var t=this;return(0,t._self._c)(t.settingType,t._g(t._b({tag:"component"},"component",t.settingProps,!1),t.$listeners))}),[],!1,null,null,null).exports},7217:(t,e,n)=>{n.d(e,{B:()=>i,Z:()=>r});var i={NOTIFICATION:"notification",WARNING:"warning",APPROVAL:"approval",ACCURACY:"accuracy",EXTRA_INFO:"extra-info",EXTRA_INFO_DARK:"extra-info-dark",INFO:"info",TIP:"tip",UPGRADE:"upgrade",LAUNCH:"launch"};const a={name:"AuthoringTip",props:{type:{type:String,default:"info"},showIcon:{type:Boolean,default:!0},title:{type:String,default:""},content:{type:String,default:""}},data:function(){return{imagePath:window.imagePath}},computed:{authoringTipClasses:function(){return{notification:"notification"===this.type,warning:"warning"===this.type,approval:"approval"===this.type,accuracy:"accuracy"===this.type,"extra-info":"extra-info"===this.type,"extra-info-dark":"extra-info-dark"===this.type,tip:"tip"===this.type,info:"info"===this.type,upgrade:"upgrade"===this.type,launch:"launch"===this.type,withoutIcon:!this.showIcon}},imageSrc:function(){switch(this.type){case"notification":return"".concat(this.imagePath,"/author/images/icons/small/alert-triangle-red.svg");case"warning":return"".concat(this.imagePath,"/author/images/svg/warning-icon.svg");case"approval":return"".concat(this.imagePath,"/author/images/thumbs-up.png");case"extra-info":case"extra-info-dark":return"".concat(this.imagePath,"/author/images/icons/small/extra-info.svg");case"tip":return"".concat(this.imagePath,"/author/images/icons/small/info.svg");case"info":return"".concat(this.imagePath,"/author/images/icons/small/bulb-yellow.svg");default:return"".concat(this.imagePath,"/author/images/tip-icon.png")}}}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"authoring-tip",class:t.authoringTipClasses},[t.showIcon?e("img",{staticClass:"authoring-tip-icon",attrs:{alt:"Tip",src:t.imageSrc}}):t._e(),t._v(" "),e("div",{staticClass:"w-full flex flex-d-col a-i-fs"},[t.title?e("span",{staticClass:"authoring-tip-title"},[t._v("\n            "+t._s(t.title)+"\n        ")]):t._e(),t._v(" "),e("div",{staticClass:"authoring-tip-txt w-full"},[t._t("default",(function(){return[e("span",{domProps:{innerHTML:t._s(t.content)}})]}))],2)])])}),[],!1,null,"1ec724b6",null).exports},3058:(t,e,n)=>{n.d(e,{Z:()=>u});n(79753),n(92222),n(47042);var i=n(4942),a=(n(9653),n(46418)),r=n(70538),s={name:"AuthorInputSetting",mixins:[a.Z],props:{label:{type:String,default:""},type:{type:String,default:"text"},placeholder:{type:String,required:!1},postfix:{type:String,required:!1},min:{type:Number,required:!1},max:{type:Number,required:!1},step:{type:Number,required:!1},inputStyle:{required:!1},inputClass:{required:!1},readonly:{type:Boolean,default:!1},inputSizeClass:{type:String,default:"form-big-text-input"},hasLineEffect:{type:Boolean,default:!0},isRequired:{type:Boolean,default:!1},shouldAutoComplete:{type:Boolean,default:!1},forceFocus:{type:Boolean,default:!1}},computed:{classes:function(){var t;return t={},(0,i.Z)(t,this.inputClass,!!this.inputClass),(0,i.Z)(t,this.inputSizeClass,!!this.inputSizeClass),t},lineEffectWidth:function(){return getComputedStyle(this.$refs.input).width}},mounted:function(){this.forceFocus&&this.$refs.input.focus()}},o=function(){(0,r.useCssVars)((function(t,e){return{c05cd09e:t.lineEffectWidth}}))},c=s.setup;s.setup=c?function(t,e){return o(),c(t,e)}:o;const l=s;const u=(0,n(51900).Z)(l,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"with-line-effect h-full",class:{disabled:t.disabled}},[t.label?e("div",{staticClass:"form-lbl"},[t._v(t._s(t.label))]):t._e(),t._v(" "),"checkbox"===t.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.valueForInput,expression:"valueForInput"}],ref:"input",staticClass:"form-text-input",class:t.classes,style:t.inputStyle,attrs:{disabled:t.disabled,required:t.isRequired,autocomplete:t.shouldAutoComplete?"on":"off",id:t.id,placeholder:t.placeholder,min:t.min,max:t.max,step:t.step,readonly:t.readonly,type:"checkbox"},domProps:{checked:Array.isArray(t.valueForInput)?t._i(t.valueForInput,null)>-1:t.valueForInput},on:{focus:function(e){return t.$emit("focus")},blur:function(e){return t.$emit("blur")},change:function(e){var n=t.valueForInput,i=e.target,a=!!i.checked;if(Array.isArray(n)){var r=t._i(n,null);i.checked?r<0&&(t.valueForInput=n.concat([null])):r>-1&&(t.valueForInput=n.slice(0,r).concat(n.slice(r+1)))}else t.valueForInput=a}}}):"radio"===t.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.valueForInput,expression:"valueForInput"}],ref:"input",staticClass:"form-text-input",class:t.classes,style:t.inputStyle,attrs:{disabled:t.disabled,required:t.isRequired,autocomplete:t.shouldAutoComplete?"on":"off",id:t.id,placeholder:t.placeholder,min:t.min,max:t.max,step:t.step,readonly:t.readonly,type:"radio"},domProps:{checked:t._q(t.valueForInput,null)},on:{focus:function(e){return t.$emit("focus")},blur:function(e){return t.$emit("blur")},change:function(e){t.valueForInput=null}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.valueForInput,expression:"valueForInput"}],ref:"input",staticClass:"form-text-input",class:t.classes,style:t.inputStyle,attrs:{disabled:t.disabled,required:t.isRequired,autocomplete:t.shouldAutoComplete?"on":"off",id:t.id,placeholder:t.placeholder,min:t.min,max:t.max,step:t.step,readonly:t.readonly,type:t.type},domProps:{value:t.valueForInput},on:{focus:function(e){return t.$emit("focus")},blur:function(e){return t.$emit("blur")},input:function(e){e.target.composing||(t.valueForInput=e.target.value)}}}),t._v(" "),t.postfix?e("label",{staticClass:"settings-lbl pl-5",attrs:{for:t.id}},[t._v(t._s(t.postfix))]):t._e(),t._v(" "),t.hasLineEffect?e("div",{staticClass:"line-effect"}):t._e()])])}),[],!1,null,"17395f74",null).exports},4909:(t,e,n)=>{n.d(e,{V:()=>u,Z:()=>d});var i=n(15861),a=(n(5212),n(41539),n(64687)),r=n.n(a),s=n(70538),o=n(47737),c=n(63647),l=n.n(c)().Wormhole,u={RIGHT:"right",LEFT:"left",NONE:"none"};const p=(0,s.defineComponent)({name:"HoverableDropdown",props:{position:{type:String,default:u.NONE},contentStyle:{default:""},contentClass:{default:""},disabled:{type:Boolean,default:!1},portalable:{type:Boolean,default:!1},useVShow:{type:Boolean,default:!1}},setup:function(){return{elementPosition:(0,o.Z)()}},data:function(){return{isVisible:!1}},computed:{positionClass:function(){return this.position===u.NONE?"":this.position===u.RIGHT?"right":"left"},isPortalEnabled:function(){return this.portalable&&this.hasDropdownComponentsOutlet},hasDropdownComponentsOutlet:function(){return l.hasTarget("dropdown-components-outlet")},trackerElementStyle:function(){if(this.isPortalEnabled){var t=this.elementPosition.rect;return{position:"fixed","z-index":"1000",top:"".concat(t.value.top+t.value.height,"px"),left:"".concat(t.value.left+(this.position===u.RIGHT?t.value.width:0),"px")}}}},mounted:function(){var t=this;return(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$nextTick();case 2:t.elementPosition.setElement(t.$el);case 3:case"end":return e.stop()}}),e)})))()},methods:{handleMouseEnter:function(t){var e=[this.$refs["hoverable-dropdown--tracker-element"],this.$refs["hoverable-dropdown"]];this.isVisible=e.some((function(e){var n;return null==e||null===(n=e.contains)||void 0===n?void 0:n.call(e,t.target)}))},handleMouseLeave:function(t){var e=[this.$refs["hoverable-dropdown--tracker-element"],this.$refs["hoverable-dropdown"]];this.isVisible=e.some((function(e){var n;return null==e||null===(n=e.contains)||void 0===n?void 0:n.call(e,t.relatedTarget)}))},close:function(){this.isVisible=!1}}});const d=(0,n(51900).Z)(p,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{ref:"hoverable-dropdown",staticClass:"hoverable-dropdown",on:{mouseenter:t.handleMouseEnter,mouseleave:t.handleMouseLeave}},[e("div",{staticClass:"hoverable-dropdown--trigger"},[t._t("trigger")],2),t._v(" "),e("portal",{attrs:{disabled:!t.isPortalEnabled,to:"dropdown-components-outlet"}},[t.isVisible||t.useVShow?e("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],ref:"hoverable-dropdown--tracker-element",staticClass:"hoverable-dropdown--tracker-element",style:t.trackerElementStyle,attrs:{"data-hover-ignored":"true"},on:{mouseenter:t.handleMouseEnter,mouseleave:t.handleMouseLeave}},[t.disabled?t._e():e("div",{staticClass:"hoverable-dropdown--content",class:[t.positionClass,t.contentClass],style:t.contentStyle},[t._t("content",null,{close:t.close})],2)]):t._e()])],1)}),[],!1,null,null,null).exports},25857:(t,e,n)=>{n.d(e,{Z:()=>c});n(26699),n(32023);var i=n(57272),a=n(55770),r=n(60492),s=n(86422);const o={name:"RichAnswerRenderer",components:{CorrectnessBadge:a.Z},props:{block:{type:Object,required:!0},answer:{required:!1},displayCorrectness:{type:Boolean,default:!1}},computed:{shouldDisplayOuterCorrectnessBadge:function(){return this.displayCorrectness&&this.block.blockData.isGraded&&!this.shouldDisplayCorrectnessIndicatorOnTheOption},shouldDisplayCorrectnessIndicatorOnTheOption:function(){return r.CP.includes(this.block.type)&&(0,s.Ix)(this.answer)},shouldDisplayAnswer:function(){var t;return(null===(t=this.block)||void 0===t?void 0:t.type)&&this.answer},answerComponentProps:function(){var t;return{is:null!==(t=i.y[this.block.type])&&void 0!==t?t:null,answer:this.answer,emptyAnswerFallbackText:"-",blockData:this.block.blockData,displayCorrectness:this.displayCorrectness&&this.shouldDisplayCorrectnessIndicatorOnTheOption}}}};const c=(0,n(51900).Z)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"pos-rel"},[t.shouldDisplayOuterCorrectnessBadge&&t.block.blockData.isGraded?e("correctness-badge",{staticClass:"badge",attrs:{"is-correct":!!t.answer.correct}}):t._e(),t._v(" "),t.shouldDisplayAnswer?e("component",t._b({staticClass:"word-break"},"component",t.answerComponentProps,!1)):t._e()],1)}),[],!1,null,"1e5b7340",null).exports},45129:(t,e,n)=>{n.d(e,{Z:()=>a});n(82526),n(41817);const i={name:"SimpleBlockRenderer",components:{SimpleWidgetsRenderer:n(32785).Z},props:{block:{type:Object,required:!0},withLiquidRender:{type:Boolean,default:!0},formattedText:{type:Boolean,default:!1}},computed:{widgets:function(){var t,e,n;return null!==(t=null!==(e=null===(n=this.block.blockData.description)||void 0===n?void 0:n.widgets)&&void 0!==e?e:this.block.blockData.widgets)&&void 0!==t?t:[]}}};const a=(0,n(51900).Z)(i,(function(){var t=this;return(0,t._self._c)("simple-widgets-renderer",{attrs:{withLiquidRender:t.withLiquidRender,widgets:t.widgets,"formatted-text":t.formattedText}})}),[],!1,null,null,null).exports}}]);